<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Jocelyn Béziau (Insee) et Céline Técher (Dreets)" />
  <meta name="copyright" content="Prise en main rapide de données sous R - mai 2022"/>
  <title>Prise en main rapide de données sous </title>
  <style type="text/css">
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
            pre > code.sourceCode { white-space: pre; position: relative; }
            pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
            pre > code.sourceCode > span:empty { height: 1.2em; }
            .sourceCode { overflow: visible; }
            code.sourceCode > span { color: inherit; text-decoration: inherit; }
            div.sourceCode { margin: 1em 0; }
            pre.sourceCode { margin: 0; }
            @media screen {
            div.sourceCode { overflow: auto; }
            }
            @media print {
            pre > code.sourceCode { white-space: pre-wrap; }
            pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
            }
            pre.numberSource code
              { counter-reset: source-line 0; }
            pre.numberSource code > span
              { position: relative; left: -4em; counter-increment: source-line; }
            pre.numberSource code > span > a:first-child::before
              { content: counter(source-line);
                position: relative; left: -1em; text-align: right; vertical-align: baseline;
                border: none; display: inline-block;
                -webkit-touch-callout: none; -webkit-user-select: none;
                -khtml-user-select: none; -moz-user-select: none;
                -ms-user-select: none; user-select: none;
                padding: 0 4px; width: 4em;
                color: #aaaaaa;
              }
            pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
            div.sourceCode
              {   }
            @media screen {
            pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
            }
            code span.al { color: #ff0000; font-weight: bold; } /* Alert */
            code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
            code span.at { color: #7d9029; } /* Attribute */
            code span.bn { color: #40a070; } /* BaseN */
            code span.bu { } /* BuiltIn */
            code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
            code span.ch { color: #4070a0; } /* Char */
            code span.cn { color: #880000; } /* Constant */
            code span.co { color: #60a0b0; font-style: italic; } /* Comment */
            code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
            code span.do { color: #ba2121; font-style: italic; } /* Documentation */
            code span.dt { color: #902000; } /* DataType */
            code span.dv { color: #40a070; } /* DecVal */
            code span.er { color: #ff0000; font-weight: bold; } /* Error */
            code span.ex { } /* Extension */
            code span.fl { color: #40a070; } /* Float */
            code span.fu { color: #06287e; } /* Function */
            code span.im { } /* Import */
            code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
            code span.kw { color: #007020; font-weight: bold; } /* Keyword */
            code span.op { color: #666666; } /* Operator */
            code span.ot { color: #007020; } /* Other */
            code span.pp { color: #bc7a00; } /* Preprocessor */
            code span.sc { color: #4070a0; } /* SpecialChar */
            code span.ss { color: #bb6688; } /* SpecialString */
            code span.st { color: #4070a0; } /* String */
            code span.va { color: #19177c; } /* Variable */
            code span.vs { color: #4070a0; } /* VerbatimString */
            code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
          </style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <script src="diapo_refonte_files/header-attrs-2.14/header-attrs.js"></script>
  <link href="diapo_refonte_files/slidy-2/styles/slidy.css" rel="stylesheet" />
  <script src="diapo_refonte_files/slidy-2/scripts/slidy.js"></script>
  <script src="diapo_refonte_files/slidy_shiny-1/slidy_shiny.js"></script>
  <link href="diapo_refonte_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
  <script src="diapo_refonte_files/pagedtable-1.1/js/pagedtable.js"></script>
  <script src="diapo_refonte_files/htmlwidgets-1.5.4/htmlwidgets.js"></script>
  <link href="diapo_refonte_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
  <script src="diapo_refonte_files/datatables-binding-0.22/datatables.js"></script>
  <script src="diapo_refonte_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="diapo_refonte_files/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
  <link href="diapo_refonte_files/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
  <script src="diapo_refonte_files/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
  <link href="diapo_refonte_files/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
  <script src="diapo_refonte_files/crosstalk-1.1.1/js/crosstalk.min.js"></script>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
   href="r_rapide.css" />
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Prise en main rapide de données sous
<img alt="R" src="www/logo_r.png" style="height:100px"></h1>
  <p class="author">
Jocelyn Béziau (Insee) et Céline Técher (Dreets)
  </p>
  <p class="date">Version du 27 avril 2022</p>
</div>
<div id="demandez-le-programme" class="slide section level2">
<h1>Demandez le programme !</h1>
<!-- mettre à jour sommaire avec noms/numéros des séquences et n° de diapo-->
<table>
<colgroup>
<col width="12%" />
<col width="8%" />
<col width="80%" />
</colgroup>
<thead>
<tr class="header">
<th>Séquence</th>
<th>Page</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>3</td>
<td>Travailler en R : RStudio, packages, trouver de l’aide</td>
</tr>
<tr class="even">
<td>2</td>
<td>13</td>
<td>Prise en main de données</td>
</tr>
<tr class="odd">
<td>3</td>
<td>21</td>
<td>Premiers pas sur la table</td>
</tr>
<tr class="even">
<td>4</td>
<td>29</td>
<td>Création de variables</td>
</tr>
<tr class="odd">
<td>5</td>
<td>40</td>
<td>Statistiques simples et pondérées</td>
</tr>
<tr class="even">
<td>6</td>
<td>47</td>
<td>Statistiques par modalités</td>
</tr>
<tr class="odd">
<td>7</td>
<td>58</td>
<td>Chaînes de caractères</td>
</tr>
<tr class="even">
<td>8</td>
<td>60</td>
<td>Dates</td>
</tr>
<tr class="odd">
<td>8</td>
<td>67</td>
<td>Fusion de tables</td>
</tr>
<tr class="even">
<td>10</td>
<td>77</td>
<td>Import/Export</td>
</tr>
<tr class="odd">
<td>11</td>
<td>81</td>
<td>Transposition</td>
</tr>
<tr class="even">
<td>12</td>
<td>87</td>
<td>Mise en forme des résultats</td>
</tr>
<tr class="odd">
<td>13</td>
<td>95</td>
<td>Graphiques</td>
</tr>
<tr class="even">
<td>14</td>
<td>134</td>
<td>Bases de données</td>
</tr>
<tr class="odd">
<td>15</td>
<td>139</td>
<td>Partager et diffuser ses résultats</td>
</tr>
<tr class="even">
<td>16</td>
<td>142</td>
<td>Bonnes pratiques, ressources et communautés R dans le SSP</td>
</tr>
</tbody>
</table>
</div>
<div id="séquence-1---travailler-en-r"
class="title-slide slide section level1">
<h1>Séquence 1 - Travailler en R</h1>

</div>
<div id="principes-généraux-12" class="slide section level2">
<h1>Principes généraux (1/2)</h1>
<p>R est un langage de programmation complet</p>
<ul>
<li>scientifique</li>
<li>multi-paradigme</li>
<li>programmable</li>
</ul>
</div>
<div id="principes-généraux-22" class="slide section level2">
<h1>Principes généraux (2/2)</h1>
<p>R est constitué d’un noyau constitué d’opérations de base et de
fonctions travaillant généralement en RAM</p>
<p>On peut le complèter par des “packages”, bibliothèques de fonctions à
charger en tant que de besoin</p>
<ul>
<li>des domaines d’application variés (stats, graphiques, SGBD, sites
interactifs, …)</li>
<li>complexité, efficacité et documentation hétérogènes</li>
<li>grand nombre d’auteurs : pas de logique d’ensemble, recouvrements,
…</li>
</ul>
</div>
<div id="pas-seuls-dans-lunivers" class="slide section level2">
<h1>Pas seuls dans l’univeRs</h1>
<p>Une galaxie de 19000 packages, près de 323000 fonctions, pour :</p>
<ul>
<li>ajouter des fonctionnalités</li>
<li>remplacer des parties du noyau par des alternatives plus efficaces
ou ergonomiques</li>
<li>interfacer R avec d’autres langages de programmation</li>
</ul>
<p><img src="www/galaxie.png" style="height:550px"/></p>
</div>
<div id="travailler-avec-r-une-question-de-mémoire"
class="slide section level2">
<h1>Travailler avec R : une question de mémoire</h1>
<p>En SAS, le mode de travail habituel consiste à <strong>appeler
successivement des procédures</strong>, qui prennent chacune <strong>en
entrée des fichiers de données</strong> pour produire <strong>des
fichiers de données en sortie</strong>. Ce qui se passe entre les deux
est paramétré par l’utilisateur mais est assimilable à une boîte
noire.</p>
<p>À l’inverse, R donne un maximum de contrôle sur la façon de traiter
les données, qui sont des objets chargés en mémoire (RAM) et non des
fichiers stockés sur le disque.</p>
<p>La taille de la mémoire disponible peut donc devenir décisive pour
les traitements.</p>
<h3 id="à-linsee-trois-environnements-peuvent-être-mobilisés">À L’Insee,
trois environnements peuvent être mobilisés</h3>
<ul>
<li>Le poste de travail individuel</li>
<li>AUS (accès aux données sécurisées)</li>
<li>Le <a href="https://www.sspcloud.fr/">SSPCloud</a></li>
</ul>
</div>
<div id="linterface-de-base-rgui" class="slide section level2">
<h1>L’interface de base : RGui</h1>
<p>Quoique minimaliste, cette interface permet d’utiliser toute la
puissance du langage R</p>
<p><img src="www/rgui.png" style="height:600px"/></p>
</div>
<div id="lenvironnement-de-développement-rstudio"
class="slide section level2">
<h1>L’environnement de développement : Rstudio</h1>
<p>Cette interface facilite la vie du statisticien et du développeur
C’est dans cet environnement que nous allons principalement
travailler</p>
<p><img src="www/rstudio_v3.png" style="height:600px"/></p>
</div>
<div id="prise-en-main-de-rstudio" class="slide section level2">
<h1>Prise en main de RStudio</h1>
<p>Utiliser la console pour obtenir le résultat de 6 fois 9</p>
<p>Ouvrir une nouvelle fenêtre de script (<em>File &gt; New File &gt; R
script</em> ou <em>CTRL + maj + N</em>) et y soumettre le même calcul
(saisir le code, puis le sélectionner et cliquer sur le bouton
<em>Run</em>)</p>
</div>
<div id="lenvironnement-tout-ce-qui-existe-est-un-objet"
class="slide section level2">
<h1>L’environnement : tout ce qui existe est un objet</h1>
<p>Supprimer des objets de l’environnement</p>
<p><img src="www/rstudio2.png" style="height:800px"/></p>
</div>
<div
id="linvite-de-commandes-tout-ce-qui-se-produit-est-un-appel-de-fonction"
class="slide section level2">
<h1>L’invite de commandes : tout ce qui se produit est un appel de
fonction</h1>
<p><img src="www/invite_commandes.png" style="height:800px"/></p>
</div>

<div id="séquence-2---prise-en-main-de-données"
class="title-slide slide section level1">
<h1>Séquence 2 - Prise en main de données</h1>

</div>
<div id="charger-un-package" class="slide section level2">
<h1>Charger un package</h1>
<p>On peut utiliser la fonction <code>import()</code> du package
<strong>rio</strong> pour récupérer des données dans R</p>
<p>L’utilisation d’un package nécessite deux étapes :</p>
<ul>
<li><strong>l’installation</strong> du package depuis un dépôt (CRAN ou
mirroir interne Insee) vers le disque dur. Une seule fois par package
(hors upgrade) et par version de R</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;rio&quot;</span>)</span></code></pre></div>
<ul>
<li><strong>le chargement en mémoire</strong>, pour indiquer à R que
l’on a besoin des fonctions de ce package. À chaque session R</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span></code></pre></div>
<p>Pour installer et charger en mémoire TOUS les packages utilisés dans
cette formation :</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>liste_packages_formation <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;gtools&quot;</span>, <span class="st">&quot;readODS&quot;</span>, <span class="st">&quot;tidyverse&quot;</span>, <span class="st">&quot;rio&quot;</span>, <span class="st">&quot;skimr&quot;</span>,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;tidymodels&quot;</span>, <span class="st">&quot;ggformula&quot;</span>, <span class="st">&quot;plotly&quot;</span>, <span class="st">&quot;DT&quot;</span>, <span class="st">&quot;questionr&quot;</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;RPostgres&quot;</span>, <span class="st">&quot;tables&quot;</span>, <span class="st">&quot;Hmisc&quot;</span>, <span class="st">&quot;RSQLite&quot;</span>, <span class="st">&quot;zoo&quot;</span>, <span class="st">&quot;ggformula&quot;</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(liste_packages_formation)</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(liste_packages_formation, <span class="at">FUN =</span> require, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="lire-un-fichier-avec-le-package-rio"
class="slide section level2">
<h1>Lire un fichier avec le package rio</h1>
<p>Chaque type de fichier possède ses spécificités, et possède en
général un package ou une fonction dédiée pour son import dans R. Le
package <strong>rio</strong> encapsule ces différentes fonctions pour
n’avoir à appeler qu’une unique fonction “couteau-suisse” (qui appelle
ensuite la fonction ad hoc selon le type de fichier en entrée)</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;poplegale_6815.RDS&quot;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;poplegale_6815.csv&quot;</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;poplegale_6815.sas7bdat&quot;</span>)</span></code></pre></div>
<p>Pour un import plus fin (numéro d’une feuille excel, colonnes à lire
dans une table SAS, …) ou en cas de problème, on peut toujours appeler
directement la fonction utilisée par <code>import()</code> et lui passer
des arguments supplémentaires.</p>
<p>Attention à charger le package en mémoire, sinon les fonctions
associées sont inutilisables et produisent une erreur de la forme :</p>
</div>
<div id="notion-de-fonction" class="slide section level2">
<h1>Notion de fonction</h1>
<p>Dans R, <strong>tout ce qui existe est un objet</strong> et
<strong>tout ce qui se produit est un appel de fonction</strong>.</p>
<p>Une fonction est donc un objet qui :</p>
<ul>
<li>réalise une tâche prédéfinie</li>
<li>se base sur des informations fournies en entrée (e.g. pour
<code>import()</code>, le nom du fichier à charger), appelées
<strong>arguments</strong> ou paramètres de la fonction</li>
<li>produit un <strong>résultat</strong> en sortie (e.g. pour
<code>import()</code>, un objet R contenant les données du fichier
importé)</li>
</ul>
<p>On peut affecter une fonction à un autre objet pour créer des alias
:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>lire <span class="ot">&lt;-</span> import</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lire</span>(<span class="st">&quot;donnees/support/popsR54.RDS&quot;</span>)</span></code></pre></div>
<p>ou définir de nouvelles fonctions :</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>lire <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">import</span>(x, <span class="at">setclass =</span> <span class="st">&quot;tibble&quot;</span>)</span></code></pre></div>
</div>
<div id="les-paramètres-dune-fonction" class="slide section level2">
<h1>Les paramètres d’une fonction</h1>
<ul>
<li>sont définis par le programmeur de la fonction et ne sont pas
forcément tous à alimenter lors de l’appel (par exemple la fonction
<code>import</code> a été construite avec un nombre variable de
paramètres alors qu’on n’en a utilisé qu’un seul). Le comportement de la
fonction s’adapte à ce qui est effectivement passé soit en testant si le
paramètre a été alimenté, soit en utilisant des valeurs par défaut.</li>
<li>ont systématiquement un nom qu’on peut ou pas utiliser en
fournissant dans ce dernier cas les arguments dans l’ordre attendu par
la fonction (comme pour les macros de SAS).<br> R admet en outre que les
noms fournis soient des abréviations non ambiguës des noms exacts. Les
écritures suivantes sont équivalentes :</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">&quot;import&quot;</span>) </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">topic=</span><span class="st">&quot;import&quot;</span>)     <span class="co"># (facultatif) Le premier paramètre s&#39;appelle &#39;topic&#39;</span></span></code></pre></div>
<p>Ainsi que :</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package=</span><span class="st">&quot;rio&quot;</span>)      <span class="co"># (obligatoire) &#39;package&#39; n&#39;est pas le premier paramètre </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">p=</span><span class="st">&quot;rio&quot;</span>) </span></code></pre></div>
<p>Des formations sont consacrées à la construction de fonctions dans R,
mais dépassent le cadre de la prise en main.</p>
</div>
<div id="arguments-dune-fonction" class="slide section level2">
<h1>Arguments d’une fonction</h1>
<p><strong>Tous les arguments d’une fonction</strong> possèdent un nom,
défini par le programmeur de la fonction, et sont documentés dans l’aide
de la fonction</p>
<p><strong>Certains arguments d’une fonction</strong> peuvent être
facultatifs (s’ils possèdent une valeur par défaut)</p>
<p>Lors de l’appel de la fonction, le nom des arguments peut être omis
s’ils sont listés exactement dans le bon ordre (comme pour les macros de
SAS). On peut également utiliser des noms abrégés s’ils ne sont pas
ambigus pour la fonction.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">topic =</span> <span class="st">&quot;import&quot;</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">&quot;import&quot;</span>) <span class="co"># nom facultatif : le premier argument de help() s&#39;appelle topic</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package =</span> <span class="st">&quot;rio&quot;</span>) <span class="co"># nom obligatoire : le premier argument de help() ne s&#39;appelle pas package</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">p =</span> <span class="st">&quot;rio&quot;</span>) <span class="co"># package est le seul argument de help() qui commence par un p</span></span></code></pre></div>
</div>
<div id="obtenir-de-laide-sur-une-fonction-ou-un-package"
class="slide section level2">
<h1>Obtenir de l’aide sur une fonction ou un package</h1>
<p>La fonction <code>help()</code> affiche l’aide en ligne pour une
fonction (si le package la contenant est chargé en mémoire) ou un
package (s’il est installé)</p>
<p>On peut utiliser <code>?</code> suivi du nom de la fonction pour
afficher l’aide correspondante, ou <code>??</code> suivi d’un mot-clef
pour rechercher les pages d’aide le contenant</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">&quot;import&quot;</span>) </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package =</span> <span class="st">&quot;rio&quot;</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>?import</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>??SAS</span></code></pre></div>
</div>
<div id="ne-pas-confondre-et--" class="slide section level2">
<h1>Ne pas confondre ‘=’ et ‘&lt;-’</h1>
<p>Les fonctions peuvent être appelées en cascade</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">mean</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>))</span></code></pre></div>
<p>L’assignation (<code>&lt;-</code>) est également une fonction. Son
appel peut donc être inclus dans n’importe quel appel de fonction</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">import</span>(file <span class="ot">&lt;-</span> <span class="fu">file.choose</span>())</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="at">file =</span> <span class="fu">file.choose</span>())</span></code></pre></div>
<p>Ces deux lignes <strong>ne sont pas tout à fait équivalentes</strong>
: dans le premier cas, on crée en plus un objet <code>file</code>
contenant le chemin menant au fichier sélectionné. Cela peut être utile
pour éviter de refaire la recherche du fichier ultérieurement</p>
</div>

<div id="séquence-3---premiers-pas-sur-la-table"
class="title-slide slide section level1">
<h1>Séquence 3 - Premiers pas sur la table</h1>

</div>
<div id="premières-observations-sur-la-table-de-données"
class="slide section level2">
<h1>Premières observations sur la table de données</h1>
<h3 id="dans-les-fenêtres-de-rstudio">Dans les fenêtres de RStudio</h3>
<ul>
<li>L’objet <code>tab_naissances</code> apparaît dans le panneau en haut
à droite</li>
<li>Le bouton bleu en forme de flèche affiche la liste des variables
composant cet objet</li>
<li>Cliquer sur le nom de la table l’ouvre dans le panneau en haut à
gauche (cette opération peut être chronophage selon le nombre de lignes
et de colonnes de l’objet)</li>
</ul>
<h3 id="en-ligne-de-commande">En ligne de commande</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>() <span class="co"># liste des objets en mémoire</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(tab_naissances) <span class="co"># liste des variables composant l&#39;objet tab_naissances</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(tab_naissances) <span class="co"># affiche l&#39;objet dans le panneau en haut à gauche</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tab_naissances, <span class="dv">5</span>) <span class="co"># les 5 premières lignes de la table</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(tab_naissances, <span class="dv">1</span>) <span class="co"># la dernière ligne de la table</span></span></code></pre></div>
</div>
<div id="enchaîner-les-fonctions-le-pipe" class="slide section level2">
<h1>Enchaîner les fonctions : le pipe</h1>
<p>Le résultat (sortie) d’une fonction peut être utilisé en argument
(entrée) d’une autre fonction. Dans la syntaxe R de base, cet
enchaînement se présente sous une forme logique mais peu lisible pour
décrire l’enchaînement chronologique des opérations :</p>
<p><code>digerer(manger(cuisiner(recette_tajine)))</code></p>
<p>L’opérateur <code>%&gt;%</code> (pipe), introduit par le package
<strong>magrittr</strong> et repris par <strong>dplyr</strong>, facilite
la lecture de cet enchaînement d’opérations :</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>recette_tajine <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cuisiner</span>() <span class="sc">%&gt;%</span> <span class="co"># les parenthèses sont optionnelles</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">manger</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">digerer</span>()</span></code></pre></div>
<p>Les commandes suivantes sont équivalentes :</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> head <span class="sc">%&gt;%</span> <span class="fu">tail</span>(<span class="dv">1</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">head</span>() <span class="sc">%&gt;%</span> <span class="fu">tail</span>(<span class="dv">1</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># écriture &quot;R de base&quot;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(<span class="fu">head</span>(tab_naissances), <span class="dv">1</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># écriture &quot;hybride&quot;, pour les gens à l&#39;esprit embrouillé</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(tab_naissances <span class="sc">%&gt;%</span> <span class="fu">head</span>(), <span class="dv">1</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tab_naissances) <span class="sc">%&gt;%</span> <span class="fu">tail</span>(<span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="sélectionner-des-colonnes-select" class="slide section level2">
<h1>Sélectionner des colonnes : <code>select()</code></h1>
<p>Une première syntaxe, similaire à SQL, permet de conserver une liste
de colonnes de la table</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">select</span>(sexe, jumeau, agemere) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<p>Remarque : chaque étape de cet enchaînement crée une nouvelle table,
mais à moins d’assigner celle-ci à un objet, elle n’est pas réutilisable
par la suite.</p>
</div>
<div id="lister-les-modalités-dune-colonne-distinct"
class="slide section level2">
<h1>Lister les modalités d’une colonne : <code>distinct()</code></h1>
<p>La fonction <code>distinct()</code> retourne une table sans doublons.
Elle peut être utile pour récupérer l’ensemble des modalités observées
pour une variable passée en argument</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># toutes les modalités prises par la variable csm (PCS de la mère)</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(csm)</span></code></pre></div>
<p>C’est l’équivalent de l’instruction SQL :</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> csm <span class="kw">FROM</span> tab_naissances</span></code></pre></div>
<p>Sans argument, la fonction <code>distinct()</code> renvoie une table
purgée des lignes en double</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">distinct</span>()</span></code></pre></div>
<p>C’est l’équivalent de l’instruction SQL :</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> <span class="op">*</span> <span class="kw">FROM</span> tab_naissances</span></code></pre></div>
</div>
<div id="le-point-sur-les-guillemets" class="slide section level2">
<h1>Le point sur les guillemets</h1>
<p>On ne met rien autour de notre paramètre lorsqu’on s’intéresse au
<em>contenu</em> de celui-ci, à ce qui se cache derrière ce symbole (une
fonction, une table, …)</p>
<p>Lorsqu’on ne veut pas que notre paramètre soit interprété comme un
objet R, il faut l’encadrer par des quotes (simples :
<code>'chaîne_de_caractères'</code> ou doubles :
<code>"chaîne_de_caractères"</code>)</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">import</span>(<span class="st">&quot;NAIS06.sas7bdat&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">import</span>(NAIS06.sas7bdat) </span></code></pre></div>
<p>Les quotes sont parfois optionnelles : par exemple, le comportement
des fonctions <code>help()</code> et <code>library()</code> reste le
même que l’on mette des quotes ou non</p>
<p>Il existe par ailleurs des exceptions (évaluation non standard :
NSE), où il <strong>ne faut pas</strong> mettre de quotes pour obtenir
le bon résultat. Les fonctions du package <strong>dplyr</strong> en sont
un bon exemple : les noms de colonnes doivent être laissés sans quotes.
D’une certaine façon, <strong>dplyr</strong> considère que c’est le
contenu de la colonne qui nous intéresse</p>
</div>
<div id="exercice" class="slide section level2">
<h1>Exercice</h1>
<ol style="list-style-type: decimal">
<li><p>Afficher le contenu de la 11ème observation de
<em>tab_naissances</em></p></li>
<li><p>Quel est le contenu de la variable <em>amar</em> de cette 11ème
observation?</p></li>
<li><p>Quelles sont les trois premières modalités différentes
rencontrées pour la variable <em>agemere</em>, les trois
dernières?</p></li>
</ol>
</div>
<div id="solution" class="slide section level2">
<h1>Solution</h1>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">11</span>) <span class="sc">%&gt;%</span> <span class="fu">tail</span>(<span class="dv">1</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">11</span>) <span class="sc">%&gt;%</span> <span class="fu">tail</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(amar)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 3</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(agemere) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">3</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(agemere) <span class="sc">%&gt;%</span> <span class="fu">tail</span>(<span class="dv">3</span>)</span></code></pre></div>
</div>

<div id="séquence-4---création-de-variables"
class="title-slide slide section level1">
<h1>Séquence 4 - Création de variables</h1>

</div>
<div id="modifier-un-objet-de-r-récupérer-le-dernier-résultat"
class="slide section level2">
<h1>Modifier un objet de R, récupérer le dernier résultat</h1>
<p><span style="color: red">En règle quasi générale, <strong>il est
impossible de modifier un objet de R</strong>.</span></p>
<p>Fonctionnellement, si on veut faire une modification à une table
associée à un symbole <code>&lt;symbole&gt;</code> donné :</p>
<ul>
<li>on construit une copie modifiée de la table</li>
<li>on associe la copie modifiée au symbole
<code>&lt;symbole&gt;</code></li>
<li>la précédente table associée au symbole <code>&lt;symbole&gt;</code>
est alors perdue parce que plus référençable (sauf si on l’avait
associée à un deuxième symbole).</li>
</ul>
<p>En pratique, c’est R qui se charge de minimiser le nombre de réelles
copies et de supprimer de la mémoire les objets “perdus” (non
référençables).</p>
<p>Par exemple, pour trier sur la région de naissance <em>regnais</em>,
on utilisera la fonction <code>arrange()</code> :</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(regnais)</span></code></pre></div>
<p>A la sortie il y a le résultat, une table triée, qui est juste
affiché mais aussi la table originale, non triée, qui est toujours
associée au symbole <em>tab_naissances</em>. Sur le moment, et en
interactif seulement, on peut récupérer son oubli en utilisant la
variable spéciale <code>.Last.value</code> qui contient le dernier
résultat d’évaluation, donc la table triée :</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="ot">&lt;-</span> .Last.value</span></code></pre></div>
<p>Mais le mieux est bien sûr de le faire en une seule fois, selon l’une
des syntaxes :</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="ot">&lt;-</span> tab_naissances <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(regnais)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(regnais) <span class="ot">-&gt;</span> tab_naissances</span></code></pre></div>
</div>
<div id="ajouter-modifier-une-colonne-mutate"
class="slide section level2">
<h1>Ajouter, modifier une colonne : <code>mutate()</code></h1>
<p>L’indicateur de naissance était en format texte. Pour faire des
calculs, il nous faut le convertir en numérique dans une nouvelle
colonne. La fonction <code>mutate</code> permet de créer une nouvelle
colonne à partir d’une formule de calcul arbitrairement compliquée
pouvant mobiliser les autres colonnes de la table.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>() <span class="ot">-&gt;</span> tab_naissances <span class="co"># Changement de type pour un affichage enrichi</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">jumeau_ =</span> <span class="fu">as.numeric</span>(jumeau)) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">1</span>)</span></code></pre></div>
<p>Ou en réutilisant le même nom (c’est bien une nouvelle variable, elle
n’a pas le même type) :</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">jumeau2 =</span> jumeau) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">jumeau =</span> <span class="fu">as.numeric</span>(jumeau2)) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">1</span>) </span></code></pre></div>
<p>REMARQUE : La syntaxe ci-dessous est également valide mais son
comportement est différent quand on accède à des bases de données, elle
est donc à proscrire.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">jumeau2 =</span> jumeau, <span class="at">jumeau =</span> <span class="fu">as.numeric</span>(jumeau2))</span></code></pre></div>
</div>
<div id="les-types-de-données-en-r" class="slide section level2">
<h1>Les types de données en R</h1>
<p>Les conversions vers un type de donnée <code>&lt;type&gt;</code> se
font systématiquement avec une fonction qui se nomme
<code>as.&lt;type&gt;()</code> et peut se tester avec une fonction
<code>is.&lt;type&gt;()</code>. Il existe potentiellement un nombre
infini de types de données car on peut en définir de nouveaux. Les plus
fréquents sont :</p>
<table style="width:100%;">
<colgroup>
<col width="46%" />
<col width="36%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th>nom R</th>
<th>Exemple</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>double</strong></td>
<td>42</td>
<td>virgule flottante double précision</td>
</tr>
<tr class="even">
<td><strong>integer</strong></td>
<td>42L</td>
<td>entier</td>
</tr>
<tr class="odd">
<td><strong>numeric</strong></td>
<td></td>
<td>un des deux cas précédents</td>
</tr>
<tr class="even">
<td><strong>character</strong></td>
<td>“42”</td>
<td>chaîne de caractères de longueur variable</td>
</tr>
<tr class="odd">
<td><strong>logical</strong></td>
<td>TRUE, FALSE</td>
<td>booléen</td>
</tr>
</tbody>
</table>
<p>…ainsi que <strong>data.frame</strong> : une table de données (comme
<em>tab_naissances</em>) et <strong>tibble</strong> qui en est un
sous-type.</p>
</div>
<div id="recoder-des-variables-ifelse" class="slide section level2">
<h1>Recoder des variables : <code>ifelse()</code></h1>
<p>Syntaxe :</p>
<ul>
<li><code>ifelse(condition)</code>,</li>
<li><code>valeur_si_vrai</code>,</li>
<li><code>valeur_si_faux)</code></li>
</ul>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">sexe_ =</span> <span class="fu">ifelse</span>(sexe <span class="sc">==</span> <span class="st">&#39;1&#39;</span>, <span class="st">&quot;garçon&quot;</span>, <span class="st">&quot;fille&quot;</span>))</span></code></pre></div>
</div>
<div id="travailler-avec-des-données-manquantes"
class="slide section level2">
<h1>Travailler avec des données manquantes</h1>
<p>Les valeurs manquantes sont le principal point d’incompatibilité avec
SAS et leur traitement nécessite de redoubler d’attention quand on
convertit un programme car le fonctionnement est radicalement différent
en R :</p>
<ul>
<li><p>Chaque type dispose de sa propre valeur manquante <code>NA</code>
(pour “Not Available”). Ceci est vrai pour les nombres mais aussi pour
les chaînes de caractères (vide n’est pas manquant), les booléens (vrai,
faux et “je ne sais pas”), et le reste…</p></li>
<li><p>Sur les nombres, il ne faut pas confondre <code>NA</code> et
<code>NaN</code> (pour “Not A Number”). Le résultat d’un calcul
impossible (comme une division par zéro), ne produit pas une valeur
manquante mais bien un résultat numérique de valeur <code>NaN</code>. De
plus, R connaît les nombres complexes.</p></li>
<li><p>Toute opération impliquant une valeur manquante produit une
valeur manquante, en particulier les comparaisons : <span
style="color: red"> <code>NA</code> n’est ni vrai, ni faux (il est faux
en SAS). <code>NA</code> n’est pas ordonné (il est plus petit que tout
en SAS)</span></p></li>
</ul>
<p>Dans les calculs statistiques (par exemple avec les fonctions
appelées par <code>summarise</code>), il y a généralement un argument
supplémentaire <code>na.rm</code> (pour “remove”) qui permet de ne pas
tenir compte des valeurs manquantes, mais son positionnement par défaut
est souvent à “faux” (<code>FALSE</code>).</p>
<ul>
<li>Le test d’égalité avec valeur manquante (<code>... == NA</code>)
renvoie systématiquement “valeur manquante”, y compris vis-à-vis de
“valeur manquante”. La seule façon de faire le test est de recourir à la
fonction <code>is.na()</code>.</li>
</ul>
</div>
<div id="travailler-avec-des-données-manquantes-is.na"
class="slide section level2">
<h1>Travailler avec des données manquantes : <code>is.na()</code></h1>
<p>Exemple de recodage d’une valeur manquante (dans l’exemple précédent,
si <em>sexe</em> était à valeur manquante, la comparaison avec ‘1’ ne
donne ni vrai, ni faux, et donc on ne prend aucune des deux branches du
<code>ifelse</code>) :</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexe_ =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(sexe_),<span class="st">&quot;inconnu&quot;</span>,sexe_))</span></code></pre></div>
<p><strong>dplyr</strong> propose aussi :</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexe_ =</span> <span class="fu">coalesce</span>(sexe_, <span class="st">&quot;inconnu&quot;</span>))</span></code></pre></div>
</div>
<div id="recoder-des-variables-case_when" class="slide section level2">
<h1>Recoder des variables : <code>case_when()</code></h1>
<p>Syntaxe :</p>
<p><code>case_when(condition1 ~ valeur1</code>,
<code>condition2 ~ valeur2</code>, <code>...</code>,
<code>conditionN ~ valeur2</code>,
<code>TRUE       ~ valeur_par_défaut)</code></p>
<p>Les conditions sont explorées successivement jusqu’à ce qu’une
d’entre elles donne <code>TRUE</code>, elles ne sont donc pas
nécessairement exclusives l’une de l’autre. La dernière ligne “voiture
balai” (qui n’est pas obligatoire) exploite cette fonctionnalité.</p>
<p>Décodons la variable <code>sexe</code> :</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexe_ =</span> <span class="fu">case_when</span>(sexe <span class="sc">==</span> <span class="st">&#39;1&#39;</span> <span class="sc">~</span> <span class="st">&quot;garçon&quot;</span>,</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>                           sexe <span class="sc">==</span> <span class="st">&#39;2&#39;</span> <span class="sc">~</span> <span class="st">&quot;fille&quot;</span>,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">is.na</span>(sexe) <span class="sc">~</span> <span class="st">&quot;inconnu&quot;</span>))</span></code></pre></div>
</div>
<div id="décoder-regrouper-avec-case_when" class="slide section level2">
<h1>Décoder, regrouper avec case_when()</h1>
<p>On a 32 modalités de catégories socioprofessionnelles (csm et csp),
ce qui constitue un niveau trop fin, on souhaite alors les regrouper en
un nombre plus réduit.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># liste des modalités</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(csm)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># regroupement</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">csm_ =</span> <span class="fu">case_when</span>(                                         <span class="co"># On crée une nouvelle colone &#39;csm_&#39;,</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">substr</span>(csm, <span class="dv">1</span>, <span class="dv">1</span>) <span class="sc">==</span> <span class="st">&#39;1&#39;</span> <span class="sc">~</span> <span class="st">&quot;agriculteurs&quot;</span>,              <span class="co"># en regardant le contenu de la colonne &#39;csm&#39; :</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">substr</span>(csm, <span class="dv">1</span>, <span class="dv">1</span>) <span class="sc">==</span> <span class="st">&#39;2&#39;</span> <span class="sc">~</span> <span class="st">&quot;chefs d&#39;entreprise&quot;</span>,        <span class="co"># la sous-chaine allant du caractère no 1 au caractère no 1</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">substr</span>(csm, <span class="dv">1</span>, <span class="dv">1</span>) <span class="sc">==</span> <span class="st">&#39;3&#39;</span> <span class="sc">~</span> <span class="st">&quot;cadres&quot;</span>,</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">substr</span>(csm, <span class="dv">1</span>, <span class="dv">1</span>) <span class="sc">==</span> <span class="st">&#39;4&#39;</span> <span class="sc">~</span> <span class="st">&quot;professions intermédiaires&quot;</span>,</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">substr</span>(csm, <span class="dv">1</span>, <span class="dv">1</span>) <span class="sc">==</span> <span class="st">&#39;5&#39;</span> <span class="sc">~</span> <span class="st">&quot;employés&quot;</span>,</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">substr</span>(csm, <span class="dv">1</span>, <span class="dv">1</span>) <span class="sc">==</span> <span class="st">&#39;6&#39;</span> <span class="sc">~</span> <span class="st">&quot;ouvriers&quot;</span>,                  <span class="co"># les modalités 1 à 6 sont recodées explicitement</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>        activp            <span class="sc">&lt;=</span> <span class="st">&#39;2&#39;</span> <span class="sc">~</span> <span class="st">&quot;chômeurs ou inactifs&quot;</span>,      <span class="co"># pour les autres cas on regarde si &#39;activp&#39; vaut 2</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span>                     <span class="sc">~</span> <span class="st">&quot;indéterminé&quot;</span>))              <span class="co"># et si tout échoue...</span></span></code></pre></div>
</div>
<div id="exercice-1" class="slide section level2">
<h1>Exercice</h1>
<ol style="list-style-type: decimal">
<li><p>Créer une nouvelle colonne “jweekend_” booléenne qui donne
<code>TRUE</code> si <em>jsemaine</em> tombe un weekend et
<code>FALSE</code> dans le cas contraire. On pourra utiliser
<code>ifelse()</code>, <code>case_when()</code>… ou aucun des
deux!</p></li>
<li><p>Discrétiser l’âge de la mère : moins de 18, [18,25[ , [25,35[ ,
[35,45[ , 45 et +</p></li>
</ol>
</div>
<div id="solution-de-lexercice" class="slide section level2">
<h1>Solution de l’exercice</h1>
<h3 id="avec-case_when-et-lappartenance-à-une-liste">Avec case_when et
l’appartenance à une liste</h3>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">jweekend_ =</span> <span class="fu">case_when</span>(jsemaine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;samedi&quot;</span>, <span class="st">&quot;dimanche&quot;</span>) <span class="sc">~</span> <span class="cn">TRUE</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>                           <span class="cn">TRUE</span>                                 <span class="sc">~</span> <span class="cn">FALSE</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>                          )</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><code>c()</code> est une fonction de base qui construit un objet
fondamental de R : un <strong>vecteur</strong>, si fondamental qu’en
fait <strong>il n’y a pas de données scalaires en R</strong>, et
<code>sexe == "1"</code> aurait pu s’écrire <code>sexe %in% "1"</code>.
En R, il faut toujours commencer par raisonner en termes d’opérations
sur des ensembles.</p>
<h3 id="avec-un-calcul-booléen">Avec un calcul booléen</h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">jweekend_ =</span> (jsemaine <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;samedi&quot;</span>, <span class="st">&quot;dimanche&quot;</span>)))</span></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">age_ =</span> <span class="fu">case_when</span>(agemere <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>                            agemere <span class="sc">&lt;</span> <span class="dv">25</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>                            agemere <span class="sc">&lt;</span> <span class="dv">35</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                            agemere <span class="sc">&lt;</span> <span class="dv">45</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>                            <span class="cn">TRUE</span>       <span class="sc">~</span> <span class="dv">5</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    ))</span></code></pre></div>
</div>

<div id="séquence-5---statistiques-simples-et-pondérées"
class="title-slide slide section level1">
<h1>Séquence 5 - Statistiques simples et pondérées</h1>

</div>
<div id="calculer-un-effectif" class="slide section level2">
<h1>Calculer un effectif</h1>
<p>Nombre de lignes de la table</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span>  <span class="fu">count</span>()</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ou bien (même résultat) :</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span>  <span class="fu">summarise</span>(<span class="at">nombre_de_naissances =</span> <span class="fu">n</span>())</span></code></pre></div>
<p>Total des naissances gémellaires</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">nombre_de_naissances_multiples =</span> <span class="fu">sum</span>(jumeau <span class="sc">==</span> <span class="st">&quot;1&quot;</span>))</span></code></pre></div>
<p><code>summarise()</code> propose aussi un ensemble de statistiques
simples : * nombre, somme : <code>n(), n_distinct(), sum()</code> *
indicateurs centraux : <code>mean(), median()</code> * indicateurs de
dispersion : <code>min(), max(), quantile(), sd(), var()</code> *
position : <code>first(), last(), nth()</code></p>
</div>
<div id="calculer-plusieurs-statistiques-à-la-fois"
class="slide section level2">
<h1>Calculer plusieurs statistiques à la fois</h1>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">q1_mere      =</span> <span class="fu">quantile</span>(agemere, <span class="fl">0.25</span>),</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">mediane_mere =</span> <span class="fu">quantile</span>(agemere, <span class="fl">0.5</span>),</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">q3_mere      =</span> <span class="fu">quantile</span>(agemere, <span class="fl">0.75</span>))</span></code></pre></div>
<p>Et les extrêmes :</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min_mere =</span> <span class="fu">min</span>(agemere),</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">max_mere =</span> <span class="fu">max</span>(agemere))</span></code></pre></div>
</div>
<div id="calculer-des-statistiques-pondérées"
class="slide section level2">
<h1>Calculer des statistiques pondérées</h1>
<p>Les fonctions utilisant des pondérations se trouvent dans le package
<strong>Hmisc</strong>, elles utilisent un argument supplémentaire
<code>w</code> qui permet de passer la colonne contenant les
pondérations. Il s’agit de :</p>
<ul>
<li>wtd.mean : la moyenne</li>
<li>wtd.var : la variance (en déduire l’écart type si besoin)</li>
<li>wtd.quantile : un quantile</li>
</ul>
<p>Jeu d’essai :</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Hmisc)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">premier_quartile =</span> <span class="fu">wtd.quantile</span>(age, <span class="at">w =</span> poids, <span class="at">probs =</span> .<span class="dv">25</span>),</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">mediane =</span> <span class="fu">wtd.quantile</span>(age, <span class="at">w =</span> poids, <span class="at">probs =</span> .<span class="dv">5</span>),</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">moyenne =</span> <span class="fu">wtd.mean</span>(age, <span class="at">w =</span> poids)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>                 )</span></code></pre></div>
</div>
<div id="travailler-sur-un-sous-ensemble-de-lignes-la-fonction-filter"
class="slide section level2">
<h1>Travailler sur un sous-ensemble de lignes : la fonction
<code>filter()</code></h1>
<p>La table concerne la France entière. Si nous souhaitons étudier une
région seule, on peut utiliser un filtre (condition).</p>
<p>Par exemple, on souhaite connaître le nombre de naissances en
Nouvelle Aquitaine et de mère française.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(regnais <span class="sc">==</span> <span class="st">&#39;75&#39;</span> <span class="sc">&amp;</span> indnatm <span class="sc">==</span> <span class="st">&#39;1&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nombre_naissances_aquitaine =</span> <span class="fu">n</span>())</span></code></pre></div>
<p>Si on a plusieurs conditions, on les réunit avec les opérateurs
logiques :</p>
<p>&amp; et (<span style="color: green"><code>and</code></span>), | ou
(<span style="color: green"><code>or</code></span>), ! négation (<span
style="color: green"><code>not</code></span>)</p>
<p>Les opérateurs de comparaison sont :</p>
<ul>
<li><strong><code>==</code></strong> (<span
style="color: green"><code>EQ</code></span>),
<strong><code>!=</code></strong> (<span
style="color: green"><code>NE</code></span>)</li>
<li><strong><code>&gt; &gt;= &lt; &lt;=</code></strong></li>
<li><strong><code>%in%</code></strong> est contenu dans une liste (<span
style="color: green"><code>in</code></span>)</li>
</ul>
<p><span style="color: red">Attention à la priorité des opérateurs. Par
exemple <code>!1+2</code> renvoie <code>FAUX</code> en R, mais
<code>!(1+2)</code> renvoie <code>VRAI</code></span></p>
</div>
<div id="exercice-2" class="slide section level2">
<h1>Exercice</h1>
<ol style="list-style-type: decimal">
<li>Calculer le nombre de naissances qui remplissent toutes les
conditions suivantes :</li>
</ol>
<ul>
<li>la naissance a lieu dans le département d’Ille-et-Vilaine
(<em>depnais</em> == 35)</li>
<li>la mère a plus de 40 ans (<em>agemere</em> &gt; 40)</li>
<li>la naissance a lieu hors mariage (année de mariage <em>amar</em> =
“0000”)</li>
<li>le bébé est une fille (<em>sexe</em> = “2”)</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Même chose pour les départements de Loire-Atlantique (44) et du
Mainte-et-Loire (49)</li>
</ol>
</div>
<div id="solution-de-lexercice-1" class="slide section level2">
<h1>Solution de l’exercice</h1>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((depnais <span class="sc">==</span> <span class="st">&quot;35&quot;</span>) <span class="sc">&amp;</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>        (agemere <span class="sc">&gt;</span> <span class="dv">40</span>) <span class="sc">&amp;</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>        (amar <span class="sc">==</span> <span class="st">&quot;0000&quot;</span>) <span class="sc">&amp;</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>        (sexe <span class="sc">==</span> <span class="st">&quot;2&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">count</span>()</span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(((depnais <span class="sc">==</span> <span class="st">&quot;44&quot;</span>) <span class="sc">|</span> (depnais <span class="sc">==</span> <span class="st">&quot;49&quot;</span>)) <span class="sc">&amp;</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>        (agemere <span class="sc">&gt;</span> <span class="dv">40</span>) <span class="sc">&amp;</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>        (amar <span class="sc">==</span> <span class="st">&quot;0000&quot;</span>) <span class="sc">&amp;</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>        (sexe <span class="sc">==</span> <span class="st">&quot;2&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">count</span>()</span></code></pre></div>
</div>

<div id="séquence-6---statistiques-par-modalités"
class="title-slide slide section level1">
<h1>Séquence 6 - Statistiques par modalités</h1>

</div>
<div id="regrouper-selon-une-catégorie-group_by-12"
class="slide section level2">
<h1>Regrouper selon une catégorie : <code>group_by()</code> (1/2)</h1>
<p>Nous avons compté le nombre de naissances en France entière.
Maintenant, nous souhaitons avoir une répartition par région.</p>
<p>On peut simplement indiquer la variable de regroupement en paramètre
de <code>count()</code>. Mais cela n’est possible que pour un comptage
simple.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tout simplement :</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> <span class="fu">count</span>(regnais)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ou bien :</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">nombre_naissances =</span> <span class="fu">n</span>())</span></code></pre></div>
</div>
<div id="regrouper-selon-une-catégorie-group_by-22"
class="slide section level2">
<h1>Regrouper selon une catégorie : <code>group_by()</code> (2/2)</h1>
<ul>
<li><p>Lorsqu’on utilise un regroupement, on perd toutes les variables
détail, ne restent que la ou les variables de regroupement et les
calculs.</p></li>
<li><p>Pour faire des statistiques sur modalités croisées, il suffit de
mettre plusieurs variables de regroupement.</p></li>
</ul>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(regnais, sexe) <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nombre_naissances =</span> <span class="fu">n</span>())</span></code></pre></div>
</div>
<div id="entre-filter-et-summarise" class="slide section level2">
<h1>Entre <code>filter()</code> et <code>summarise()</code></h1>
<p>Il est possible de filtrer sur une condition impliquant une
statistique, en redescendant le résultat d’un calcul sur un groupe de
lignes au niveau de chacune des lignes. Par exemple pour sélectionner
les communes ayant la plus forte population de leur département :</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;donnees/support/poplegale_6815.sas7bdat&quot;</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>p <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(D) <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(PMUN15 <span class="sc">==</span> <span class="fu">max</span>(PMUN15))</span></code></pre></div>
<p>Question : Pourquoi uniquement 11 départements (la table initiale
contient 98 départements) ?</p>
<!--Réponse : Le maximum d'un vecteur contenant des valeurs manquantes... est une valeur manquante. Ainsi, tous les départements pour lesquels au moins une commune n'a pas de valeur renseignée pour `PMUN15` ont leur maximum à `NA`. La comparaison entre cette valeur et la population de chaque commune renvoie alors `NA` et non `TRUE`. Ces départements ne sont donc pas inclus dans le résultat de `filter()`.-->
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(D) <span class="sc">%&gt;%</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">pmax =</span> <span class="fu">max</span>(PMUN15)) <span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(pmax)) <span class="sc">%&gt;%</span> </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">15</span>)</span></code></pre></div>
<p>Pour obtenir le maximum parmi les valeurs renseignées, on peut faire
utiliser l’argument <code>na.rm = TRUE</code> dans la fonction
<code>max()</code> :</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(D) <span class="sc">%&gt;%</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">pmax =</span> <span class="fu">max</span>(PMUN15, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(pmax)) <span class="sc">%&gt;%</span> </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">15</span>)</span></code></pre></div>
</div>
<div id="entre-mutate-et-summarise" class="slide section level2">
<h1>Entre <code>mutate()</code> et <code>summarise()</code></h1>
<p>Il est possible de créer une nouvelle colonne impliquant une
statistique, en redescendant le résultat d’un calcul fait sur un groupe
de lignes au niveau de chacune des lignes du groupe :</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(D) <span class="sc">%&gt;%</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span> (<span class="at">PMUN15max =</span> <span class="fu">max</span>(PMUN15, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
</div>
<div id="tris-arrange" class="slide section level2">
<h1>Tris : <code>arrange()</code></h1>
<p>Lorsqu’on utilise un regroupement, le résultat est trié en majeur
selon ce regroupement.</p>
<p>Si on souhaite effectuer un autre tri, on utilise la fonction
<code>arrange()</code>.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(regnais) <span class="sc">%&gt;%</span>                     <span class="co"># Par région...</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">nombre_naissances =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span>    <span class="co"># on calcule le nombre de naissances</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(nombre_naissances)                <span class="co"># et on trie le tout par ordre croissant des naissances</span></span></code></pre></div>
</div>
<div id="accéder-à-une-ligne-particulière-dun-groupe-row_number"
class="slide section level2">
<h1>Accéder à une ligne particulière d’un groupe :
<code>row_number()</code></h1>
<p>A l’intérieur de chaque groupe, le numéro d’ordre de la
ligne/observation est accessible par la fonction <code>row_number</code>
de <strong>dplyr</strong> :</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>poplegale_6815 <span class="sc">%&gt;%</span>                     </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(D) <span class="sc">%&gt;%</span>                           <span class="co"># Par département</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(PMUN15)) <span class="sc">%&gt;%</span>                 <span class="co">#   on range par ordre décroissant, au sein de chaque département</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">==</span>  <span class="dv">1</span>)                   <span class="co"># on ne garde que la première commune</span></span></code></pre></div>
</div>
<div id="la-fonction-ungroup" class="slide section level2">
<h1>La fonction <code>ungroup()</code></h1>
<p>Le regroupement de modalités par <code>group_by()</code> produit une
table qui a en attribut la liste des variables de regroupement.
Lorsqu’il y en a plusieurs, la fonction <code>summarise()</code>
n’enlève que la dernière variable : la table produite reste groupée sur
les premières variables.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span>                     </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(regnais, depnais) <span class="sc">%&gt;%</span>            <span class="co"># Par département (et région pour garder celle ci)</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nombre_naissances =</span> <span class="fu">n</span>()) <span class="ot">-&gt;</span> a   <span class="co"># on calcule le nombre de naissances</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>                                            <span class="co"># et on sauve dans &#39;a&#39;</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>a <span class="sc">%&gt;%</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nombre_naissances <span class="sc">==</span> <span class="fu">max</span>(nombre_naissances))   </span></code></pre></div>
<p>Et on récupère le département ayant le plus grand nombre de
naissances, dans chaque région.</p>
<p>Pour supprimer l’ensemble des regroupements, utiliser
<code>ungroup()</code>. Pour le département qui a le plus de naissances,
France entière :</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">%&gt;%</span>                     </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span>                               </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nombre_naissances <span class="sc">==</span> <span class="fu">max</span>(nombre_naissances))   </span></code></pre></div>
</div>
<div id="exercice-3" class="slide section level2">
<h1>Exercice</h1>
<ol style="list-style-type: decimal">
<li><p>Calculer le nombre de naissances par département. Quel est le
département qui a le plus de naissances?</p></li>
<li><p>Calculer le nombre de naissances par commune. Par département,
quelles sont les communes qui ont le plus de naissances ?</p></li>
<li><p>Calculer le nombre de naissances par jour de la semaine. En
recodant le jour de la semaine, réordonner les résultats (lundi le 1er,
mardi le 2ème…)</p></li>
</ol>
</div>
<div id="solution-de-lexercice-12" class="slide section level2">
<h1>Solution de l’exercice (1/2)</h1>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(depnais) <span class="sc">%&gt;%</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(n <span class="sc">==</span> <span class="fu">max</span>(n))</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> </span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(depnais, comnais) <span class="sc">%&gt;%</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(n <span class="sc">==</span> <span class="fu">max</span>(n))</span></code></pre></div>
</div>
<div id="solution-de-lexercice-22" class="slide section level2">
<h1>Solution de l’exercice (2/2)</h1>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>tab_naissances <span class="sc">%&gt;%</span> </span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">j =</span> <span class="fu">case_when</span>(jsemaine <span class="sc">==</span> <span class="st">&quot;lundi&quot;</span>    <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>                         jsemaine <span class="sc">==</span> <span class="st">&quot;mardi&quot;</span>    <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>                         jsemaine <span class="sc">==</span> <span class="st">&quot;mercredi&quot;</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>                         jsemaine <span class="sc">==</span> <span class="st">&quot;jeudi&quot;</span>    <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>                         jsemaine <span class="sc">==</span> <span class="st">&quot;vendredi&quot;</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>                         jsemaine <span class="sc">==</span> <span class="st">&quot;samedi&quot;</span>   <span class="sc">~</span> <span class="dv">6</span>,</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>                         jsemaine <span class="sc">==</span> <span class="st">&quot;dimanche&quot;</span> <span class="sc">~</span> <span class="dv">7</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(j, jsemaine) <span class="sc">%&gt;%</span> </span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
</div>

<div id="séquence-7---chaînes-de-caractères"
class="title-slide slide section level1">
<h1>Séquence 7 - Chaînes de caractères</h1>

</div>
<div id="aide-mémoire" class="slide section level2">
<h1>Aide-mémoire</h1>
<table>
<colgroup>
<col width="42%" />
<col width="57%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Cas d’utilisation</strong></th>
<th><strong>Fonction</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Concaténation</td>
<td>paste0(str<sub>1</sub>,str<sub>2</sub>,str<sub>3</sub>)</td>
</tr>
<tr class="even">
<td>Nombre de caractères</td>
<td>str_length(str)</td>
</tr>
<tr class="odd">
<td>Extraction d’une sous-chaîne</td>
<td>str_sub(str, pos, pos+len-1)</td>
</tr>
<tr class="even">
<td>Extraction de la fin</td>
<td>str_sub(str, pos)</td>
</tr>
<tr class="odd">
<td>Remplacement de la fin</td>
<td>str_sub(var, pos) &lt;- new_chaine</td>
</tr>
<tr class="even">
<td>Réduction des espaces</td>
<td>str_squish(str)</td>
</tr>
<tr class="odd">
<td>Elimination des espaces en fin</td>
<td>str_trim(str, side = “right”)</td>
</tr>
<tr class="even">
<td>Elimination des espaces en debut</td>
<td>str_trim(str, side = “left”)</td>
</tr>
<tr class="odd">
<td>Mise en majuscules</td>
<td>str_to_upper(str)</td>
</tr>
<tr class="even">
<td>Mise en minuscules</td>
<td>str_to_lower(str)</td>
</tr>
<tr class="odd">
<td>Remplacement de caractères</td>
<td>str_replace_all(old, new, str)</td>
</tr>
<tr class="even">
<td>Recherche d’un motif</td>
<td>str_locate(str,str<sub>2</sub>)</td>
</tr>
<tr class="odd">
<td>”</td>
<td>str_detect(str,str<sub>2</sub>)</td>
</tr>
<tr class="even">
<td>”</td>
<td>str_extract(str,str<sub>2</sub>)</td>
</tr>
<tr class="odd">
<td>Retournement</td>
<td>stri_reverse(str)</td>
</tr>
<tr class="even">
<td>Distance</td>
<td>stringdist(str,str<sub>2</sub>)</td>
</tr>
</tbody>
</table>
</div>

<div id="séquence-8---dates" class="title-slide slide section level1">
<h1>Séquence 8 - Dates</h1>

</div>
<div id="problématique" class="slide section level2">
<h1>Problématique</h1>
<p>Utiliser R pour travailler sur des données datées (annuelles,
trimestrielles, journalières, …) peut se faire de différentes façons,
l’une d’entre elles est le package <strong>lubridate</strong></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<p>Notre jeu d’exemple : ce fichier fictif d’emploi par département</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>fichier_date <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;donnees/support/fichier_date.RDS&quot;</span>)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>fichier_date</span></code></pre></div>
</div>
<div id="transformer-une-chaîne-de-caractères-en-date"
class="slide section level2">
<h1>Transformer une chaîne de caractères en date</h1>
<p>Pour convertir en Date une chaîne de caractères, on peut essayer
<code>as_date()</code>, mais si le format de la chaîne de caractères
n’est pas standard, elle peut ne pas être reconnue. Des fonctions ad hoc
comme <code>ydm()</code> et <code>ymd()</code> existent pour traduire
les formats (année/jour/mois) et (année/mois/jour) respectivement</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>fichier_date <span class="ot">&lt;-</span> fichier_date <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="fu">ymd</span>(Date_string))</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>fichier_date <span class="sc">%&gt;%</span> head</span></code></pre></div>
<p>Selon le format, d’autres commandes existent. Citons en particulier
les deux commandes suivantes.</p>
<p>Si la chaîne de caractères est de la forme “23/02/2022”, on peut
utiliser <code>dmy()</code>.</p>
<p>Si la chaîne de caractères est “2020 T3”, pour le troisième trimestre
de 2020, on peut utiliser <code>yq</code>.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">yq</span>(<span class="st">&quot;2020 T3&quot;</span>)</span></code></pre></div>
</div>
<div id="extraire-des-composants-de-la-date"
class="slide section level2">
<h1>Extraire des composants de la date</h1>
<p>Exemple :</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>fichier_date <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Annee =</span> <span class="fu">year</span>(Date),</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Trimestre =</span> <span class="fu">quarter</span>(Date),</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Mois =</span> <span class="fu">month</span>(Date),</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Jour =</span> <span class="fu">day</span>(Date)</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> as.data.frame <span class="sc">%&gt;%</span> head</span></code></pre></div>
</div>
<div id="filtrer-une-plage-de-dates" class="slide section level2">
<h1>Filtrer une plage de dates</h1>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>date_debut <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="st">&quot;2011-05-01&quot;</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>date_fin <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="st">&quot;2013-01-03&quot;</span>)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>intervalle <span class="ot">&lt;-</span> <span class="fu">interval</span>(date_debut, date_fin)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>fichier_date <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Date <span class="sc">%within%</span> intervalle)</span></code></pre></div>
</div>
<div id="exercice-4" class="slide section level2">
<h1>Exercice</h1>
<ul>
<li>Calculer l’effectif national par trimestre dans
<code>fichier_dates</code></li>
<li>Calculer ensuite l’évolution trimestrielle de l’emploi</li>
</ul>
</div>
<div id="solution-de-lexercice-2" class="slide section level2">
<h1>Solution de l’exercice</h1>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>fichier_date <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;donnees/support/fichier_date.RDS&quot;</span>)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>fichier_date <span class="sc">%&gt;%</span> </span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="fu">ymd</span>(Date_string)) <span class="sc">%&gt;%</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Annee =</span> <span class="fu">year</span>(Date),</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Trimestre =</span> <span class="fu">quarter</span>(Date)) <span class="sc">%&gt;%</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Annee, Trimestre) <span class="sc">%&gt;%</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Effectif_random =</span> <span class="fu">sum</span>(Effectif_random)) <span class="sc">%&gt;%</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># head() # effectif national par trimestre</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Annee, Trimestre) <span class="sc">%&gt;%</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Evol_trim =</span> <span class="dv">100</span><span class="sc">*</span>(Effectif_random <span class="sc">-</span> <span class="fu">lag</span>(Effectif_random))<span class="sc">/</span></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">lag</span>(Effectif_random)) <span class="sc">%&gt;%</span> </span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="co"># évolution relative de l&#39;emploi de trimestre en trimestre</span></span></code></pre></div>
</div>

<div id="séquence-9---fusion-de-tables"
class="title-slide slide section level1">
<h1>Séquence 9 - Fusion de tables</h1>

</div>
<div id="jeux-dexemple" class="slide section level2">
<h1>Jeux d’exemple</h1>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>superheros <span class="ot">&lt;-</span> <span class="fu">tribble</span>(<span class="sc">~</span>nom, <span class="sc">~</span>type, <span class="sc">~</span>sexe, <span class="sc">~</span>editeur,</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;Magneto&quot;</span>,       <span class="st">&quot;mechant&quot;</span>,   <span class="st">&quot;homme&quot;</span>,            <span class="st">&quot;Marvel&quot;</span>,</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;Storm&quot;</span>,        <span class="st">&quot;gentil&quot;</span>,   <span class="st">&quot;femme&quot;</span>,            <span class="st">&quot;Marvel&quot;</span>,</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;Mystique&quot;</span>,       <span class="st">&quot;mechant&quot;</span>,   <span class="st">&quot;femme&quot;</span>,            <span class="st">&quot;Marvel&quot;</span>,</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;Batman&quot;</span>,        <span class="st">&quot;gentil&quot;</span>,   <span class="st">&quot;homme&quot;</span>,                <span class="st">&quot;DC&quot;</span>,</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;Joker&quot;</span>,       <span class="st">&quot;mechant&quot;</span>,   <span class="st">&quot;homme&quot;</span>,                <span class="st">&quot;DC&quot;</span>,</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;Catwoman&quot;</span>,       <span class="st">&quot;mechant&quot;</span>,   <span class="st">&quot;femme&quot;</span>,                <span class="st">&quot;DC&quot;</span>,</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;Hellboy&quot;</span>,        <span class="st">&quot;gentil&quot;</span>,   <span class="st">&quot;homme&quot;</span>, <span class="st">&quot;Dark Horse Comics&quot;</span>)</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>editeurs <span class="ot">&lt;-</span> <span class="fu">tribble</span>( <span class="sc">~</span>editeur, <span class="sc">~</span>annee_creation,</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&quot;DC&quot;</span>,       <span class="dv">1934</span>,</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&quot;Marvel&quot;</span>,       <span class="dv">1939</span>,</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&quot;Image&quot;</span>,       <span class="dv">1992</span>)</span></code></pre></div>
</div>
<div id="fusion-verticale-ajouter-des-colonnes"
class="slide section level2">
<h1>Fusion verticale (ajouter des colonnes)</h1>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>random_value <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">alea =</span> <span class="fu">runif</span>(<span class="fu">nrow</span>(superheros), <span class="dv">1</span>, <span class="dv">10</span>))</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>superheros <span class="sc">%&gt;%</span> <span class="fu">bind_cols</span>(random_value)</span></code></pre></div>
<pre><code>## # A tibble: 7 x 5
##   nom      type    sexe  editeur            alea
##   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;             &lt;dbl&gt;
## 1 Magneto  mechant homme Marvel             9.23
## 2 Storm    gentil  femme Marvel             9.43
## 3 Mystique mechant femme Marvel             3.58
## 4 Batman   gentil  homme DC                 8.47
## 5 Joker    mechant homme DC                 6.78
## 6 Catwoman mechant femme DC                 5.67
## 7 Hellboy  gentil  homme Dark Horse Comics  7.63</code></pre>
</div>
<div id="fusion-horizontale-ajouter-des-lignes"
class="slide section level2">
<h1>Fusion horizontale (ajouter des lignes)</h1>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>(a <span class="ot">&lt;-</span> superheros <span class="sc">%&gt;%</span> <span class="fu">filter</span>(editeur<span class="sc">==</span><span class="st">&quot;Marvel&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(nom,sexe,type))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   nom      sexe  type   
##   &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;  
## 1 Magneto  homme mechant
## 2 Storm    femme gentil 
## 3 Mystique femme mechant</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>(b <span class="ot">&lt;-</span> superheros <span class="sc">%&gt;%</span> <span class="fu">filter</span>(editeur<span class="sc">==</span><span class="st">&quot;DC&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   nom      type    sexe  editeur
##   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  
## 1 Batman   gentil  homme DC     
## 2 Joker    mechant homme DC     
## 3 Catwoman mechant femme DC</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">%&gt;%</span> <span class="fu">bind_rows</span>(b)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   nom      sexe  type    editeur
##   &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;  
## 1 Magneto  homme mechant &lt;NA&gt;   
## 2 Storm    femme gentil  &lt;NA&gt;   
## 3 Mystique femme mechant &lt;NA&gt;   
## 4 Batman   homme gentil  DC     
## 5 Joker    homme mechant DC     
## 6 Catwoman femme mechant DC</code></pre>
</div>
<div id="fusion-selon-une-clef-de-jointure"
class="slide section level2">
<h1>Fusion selon une clef de jointure</h1>
<p>(sans préciser le <code>by</code>, la fonction utilise l’ensemble des
variables dont le nom est commun aux deux tables)</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(superheros, editeurs, <span class="at">by =</span> <span class="st">&quot;editeur&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   nom      type    sexe  editeur annee_creation
##   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt;
## 1 Magneto  mechant homme Marvel            1939
## 2 Storm    gentil  femme Marvel            1939
## 3 Mystique mechant femme Marvel            1939
## 4 Batman   gentil  homme DC                1934
## 5 Joker    mechant homme DC                1934
## 6 Catwoman mechant femme DC                1934</code></pre>
</div>
<div
id="conserver-uniquement-les-lignes-présentes-dans-la-première-table"
class="slide section level2">
<h1>Conserver uniquement les lignes présentes dans la première
table</h1>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(superheros, editeurs, <span class="at">by =</span> <span class="st">&quot;editeur&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 7 x 5
##   nom      type    sexe  editeur           annee_creation
##   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;                      &lt;dbl&gt;
## 1 Magneto  mechant homme Marvel                      1939
## 2 Storm    gentil  femme Marvel                      1939
## 3 Mystique mechant femme Marvel                      1939
## 4 Batman   gentil  homme DC                          1934
## 5 Joker    mechant homme DC                          1934
## 6 Catwoman mechant femme DC                          1934
## 7 Hellboy  gentil  homme Dark Horse Comics             NA</code></pre>
</div>
<div id="conserver-toutes-les-lignes-des-deux-tables"
class="slide section level2">
<h1>Conserver toutes les lignes des deux tables</h1>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(superheros, editeurs, <span class="at">by =</span> <span class="st">&quot;editeur&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 8 x 5
##   nom      type    sexe  editeur           annee_creation
##   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;                      &lt;dbl&gt;
## 1 Magneto  mechant homme Marvel                      1939
## 2 Storm    gentil  femme Marvel                      1939
## 3 Mystique mechant femme Marvel                      1939
## 4 Batman   gentil  homme DC                          1934
## 5 Joker    mechant homme DC                          1934
## 6 Catwoman mechant femme DC                          1934
## 7 Hellboy  gentil  homme Dark Horse Comics             NA
## 8 &lt;NA&gt;     &lt;NA&gt;    &lt;NA&gt;  Image                       1992</code></pre>
</div>
<div id="conserver-uniquement-les-lignes-communes-aux-deux-tables"
class="slide section level2">
<h1>Conserver uniquement les lignes communes aux deux tables</h1>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(superheros, editeurs)</span></code></pre></div>
<pre><code>## Joining, by = &quot;editeur&quot;</code></pre>
<pre><code>## # A tibble: 6 x 5
##   nom      type    sexe  editeur annee_creation
##   &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt;
## 1 Magneto  mechant homme Marvel            1939
## 2 Storm    gentil  femme Marvel            1939
## 3 Mystique mechant femme Marvel            1939
## 4 Batman   gentil  homme DC                1934
## 5 Joker    mechant homme DC                1934
## 6 Catwoman mechant femme DC                1934</code></pre>
</div>
<div
id="récupérer-toutes-les-lignes-de-la-première-table-qui-ne-sont-pas-présentes-dans-la-seconde"
class="slide section level2">
<h1>Récupérer toutes les lignes de la première table qui ne sont pas
présentes dans la seconde</h1>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(editeurs, superheros, <span class="at">by=</span> <span class="st">&quot;editeur&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 2
##   editeur annee_creation
##   &lt;chr&gt;            &lt;dbl&gt;
## 1 Image             1992</code></pre>
</div>
<div id="en-résumé" class="slide section level2">
<h1>En résumé</h1>
<ul>
<li><code>bind_rows()</code> : ajouter des lignes (à partir d’une table
contenant les mêmes variables)</li>
<li><code>bind_cols()</code> : ajouter des colonnes (à partir d’une
table contenant autant de lignes)</li>
<li><code>left_join()</code> : toutes les lignes présentes dans la
première table, enrichies des variables observées dans la seconde</li>
<li><code>right_join()</code> : toutes les lignes présentes dans la
seconde table, enrichies des variables observées dans la première</li>
<li><code>full_join()</code> : toutes les lignes présentes dans l’une ou
l’autre table, enrichies mutuellement des variables observées</li>
<li><code>inner_join()</code> : uniquement les lignes présentes dans les
deux tables, enrichies mutuellement des variables observées</li>
<li><code>anti_join()</code> : toutes les lignes de la première table
qui n’ont pas de correspondance dans la seconde</li>
<li><code>semi_join()</code> : toutes les lignes de la première table
qui ont une correspondance dans la seconde</li>
</ul>
</div>

<div id="séquence-10---importexport"
class="title-slide slide section level1">
<h1>Séquence 10 - Import/Export</h1>

</div>
<div id="import" class="slide section level2">
<h1>Import</h1>
<p>Pour la plupart des formats de fichiers (xlsx, ods, csv, txt,
sas7bdat, parquet, feather, …), on peut utiliser
<code>rio::import("nom_du_fichier.extension")</code> pour en faire un
objet R manipulable dans notre environnement.</p>
<p>C’est une surcouche autour des fonctions d’import des packages ad hoc
(<code>data.table::fread()</code> pour les csv,
<code>readODS::read_ods()</code> pour les ods, …)</p>
<!--arrow/disk.frame à la place de feather/fstplyr-->
</div>
<div id="export" class="slide section level2">
<h1>Export</h1>
<p>De façon symétrique,
<code>rio::export(objetR, "nom_du_fichier.extension")</code> permet de
sauver sur le disque un objet de l’environnement R, à partir des
fonctions ad hoc appelées de façon transparente comme pour l’import.</p>
</div>
<div id="stockage-intermédiaire" class="slide section level2">
<h1>Stockage intermédiaire</h1>
<p><code>saveRDS(objetR, "nom_du_fichier.RDS")</code> pour sauver sur le
disque un objet de l’environnement R</p>
<p><code>readRDS("nom_du_fichier.RDS")</code> pour charger cet objet
dans l’environnement par la suite. Attention, cela écrase sans préavis
tout objet R pré-existant qui porte le même nom que l’objet chargé
depuis le .RDS</p>
<p><code>save(objetR1, objetR2, ..., file = "nom_du_fichier.RData")</code>
pour sauvegarder plusieurs objets R dans un seul fichier</p>
<p><code>load("nom_du_fichier.RData")</code> pour charger dans
l’environnement tous les objets R contenus dans ce fichier. Attention,
cela écrasera sans préavis tous les objets R pré-existants qui portent
le même nom que l’un des objets chargés depuis le .RData</p>
</div>

<div id="séquence-11---transposition"
class="title-slide slide section level1">
<h1>Séquence 11 - Transposition</h1>

</div>
<div id="transposition-pivot_longer-et-pivot_wider"
class="slide section level2">
<h1>Transposition : pivot_longer() et pivot_wider()</h1>
<p>Remarque : ces fonctions remplacent leurs ancêtres dépréciées
<code>gather()</code> et <code>spread()</code> à partir de la version
1.0 du package <strong>tidyr</strong></p>
<p>Dans une table R, le contenu d’une cellule peut servir à définir un
nom de variable, et vice-versa.</p>
<p>Selon l’utilisation des données, on peut choisir alternativement
entre ces représentations</p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Metropole"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Q1_2000"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Q1_2002"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Q1_2004"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["Q1_2006"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Boston","2":"148","3":"189","4":"234","5":"272"},{"1":"Phil","2":"150","3":"170","4":"180","5":"186"},{"1":"SanFran","2":"111","3":"132","4":"164","5":"219"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Une ligne par ville, avec une colonne par date de référence, et dans
les cellules l’indice du loyer correspondant : cette représentation est
facilement lisible par un humain.</p>
<p>Elle ne permet cependant pas de représenter directement l’évolution
comparée des loyers au cours du temps : notamment, les fonctions de
ggplot2 auront besoin d’une colonne contenant les différentes périodes
de référence pour servir d’axe de temps.</p>
</div>
<div
id="quand-les-noms-de-variables-sont-eux-mêmes-des-variables-dintérêt-pivot_longer"
class="slide section level2">
<h1>Quand les noms de variables sont eux-mêmes des variables d’intérêt :
<code>pivot_longer()</code></h1>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pivot_longer</span>(df,</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">cols =</span> selection_des_colonnes_a_pivoter,</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">names_to =</span> <span class="st">&quot;nom_de_la_colonne_a_creer_depuis_les_noms_de_variables&quot;</span>,</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">value_to =</span> <span class="st">&quot;nom_de_la_colonne_a_creer_depuis_les_cellules&quot;</span>)</span></code></pre></div>
<p>L’argument <code>cols</code> liste toutes les variables concernées
par le pivot (toutes celles dont le nom contient une information
variable, comme ici la date de référence, sont de bonnes candidates
!)</p>
<p>Les arguments <code>names_to</code> et <code>values_to</code>
permettent de renseigner respectivement le nom de la colonne contenant
l’ensemble des variables “transformées en valeurs” (ici, la période de
référence), et le nom de la colonne contenant l’ensemble des valeurs
correspondant (ici le prix du loyer par ville à chaque période de
référence)</p>
</div>
<div id="résultat-de-la-transposition" class="slide section level2">
<h1>Résultat de la transposition</h1>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>Metro_x_Quarter_long <span class="ot">&lt;-</span> Metro_x_Quarter <span class="sc">%&gt;%</span> </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>Metropole,</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;Periode&quot;</span>,</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;Prix_loyer&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Ville =</span> Metropole)</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>Metro_x_Quarter_long <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">4</span>)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Ville"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Periode"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Prix_loyer"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Boston","2":"Q1_2000","3":"148"},{"1":"Boston","2":"Q1_2002","3":"189"},{"1":"Boston","2":"Q1_2004","3":"234"},{"1":"Boston","2":"Q1_2006","3":"272"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="graphique" class="slide section level2">
<h1>Graphique</h1>
<p>Cette représentation des données est cette fois adaptée pour réaliser
le graphique qui nous intéresse</p>
<p><img src="diapo_refonte_files/figure-slidy/unnamed-chunk-79-1.png" width="768" /></p>
</div>
<div
id="quand-on-veut-rendre-plus-présentable-une-table-longue-pivot_wider"
class="slide section level2">
<h1>Quand on veut rendre plus “présentable” une table longue :
<code>pivot_wider()</code></h1>
<p>Si l’on a besoin de regrouper des cellules dans une colonne
synthétique (généralement pour présenter le tableau à un lecteur humain,
ou pour des fonctions qui requièrent un format particulier en entrée)
:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pivot_wider</span>(df,</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">names_from =</span> column_to_pivot_into_new_column,</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">values_from =</span>   column_with_measurement_values  )</span></code></pre></div>
<p>Comme pour <code>pivot_longer()</code>, on retrouve des arguments
<code>names_</code> et <code>values_</code>, mais cette fois dans
l’autre sens (<code>from</code> au lieu de <code>to</code>). Cela
illustre l’aspect réciproque de ces deux fonctions.</p>
</div>

<div id="séquence-12---mise-en-forme-des-résultats"
class="title-slide slide section level1">
<h1>Séquence 12 - Mise en forme des résultats</h1>

</div>
<div id="dtdatatables" class="slide section level2">
<h1><code>DT::datatables()</code></h1>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)  </span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>poplegale_6815 <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(<span class="st">&quot;donnees/support/poplegale_6815.sas7bdat&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(REGION <span class="sc">==</span> <span class="st">&quot;52&quot;</span>)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(poplegale_6815)</span></code></pre></div>
<div id="htmlwidget-79307f2e17466358a46d" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-79307f2e17466358a46d">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900","901","902","903","904","905","906","907","908","909","910","911","912","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","930","931","932","933","934","935","936","937","938","939","940","941","942","943","944","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","970","971","972","973","974","975","976","977","978","979","980","981","982","983","984","985","986","987","988","989","990","991","992","993","994","995","996","997","998","999","1000","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1012","1013","1014","1015","1016","1017","1018","1019","1020","1021","1022","1023","1024","1025","1026","1027","1028","1029","1030","1031","1032","1033","1034","1035","1036","1037","1038","1039","1040","1041","1042","1043","1044","1045","1046","1047","1048","1049","1050","1051","1052","1053","1054","1055","1056","1057","1058","1059","1060","1061","1062","1063","1064","1065","1066","1067","1068","1069","1070","1071","1072","1073","1074","1075","1076","1077","1078","1079","1080","1081","1082","1083","1084","1085","1086","1087","1088","1089","1090","1091","1092","1093","1094","1095","1096","1097","1098","1099","1100","1101","1102","1103","1104","1105","1106","1107","1108","1109","1110","1111","1112","1113","1114","1115","1116","1117","1118","1119","1120","1121","1122","1123","1124","1125","1126","1127","1128","1129","1130","1131","1132","1133","1134","1135","1136","1137","1138","1139","1140","1141","1142","1143","1144","1145","1146","1147","1148","1149","1150","1151","1152","1153","1154","1155","1156","1157","1158","1159","1160","1161","1162","1163","1164","1165","1166","1167","1168","1169","1170","1171","1172","1173","1174","1175","1176","1177","1178","1179","1180","1181","1182","1183","1184","1185","1186","1187","1188","1189","1190","1191","1192","1193","1194","1195","1196","1197","1198","1199","1200","1201","1202","1203","1204","1205","1206","1207","1208","1209","1210","1211","1212","1213","1214","1215","1216","1217","1218","1219","1220","1221","1222","1223","1224","1225","1226","1227","1228","1229","1230","1231","1232","1233","1234","1235","1236","1237","1238","1239","1240","1241","1242","1243","1244","1245","1246","1247","1248","1249","1250","1251","1252","1253","1254","1255","1256","1257","1258","1259","1260","1261","1262","1263","1264","1265","1266","1267","1268","1269","1270","1271","1272","1273","1274","1275","1276","1277","1278","1279","1280","1281","1282","1283","1284","1285","1286","1287","1288","1289","1290","1291","1292","1293","1294","1295","1296","1297","1298","1299","1300","1301","1302","1303","1304","1305","1306","1307","1308","1309","1310","1311","1312","1313","1314","1315","1316","1317","1318","1319","1320","1321","1322","1323","1324","1325","1326","1327","1328","1329","1330","1331","1332","1333","1334","1335","1336","1337","1338","1339","1340","1341","1342","1343","1344","1345","1346","1347","1348","1349","1350","1351","1352","1353","1354","1355","1356","1357","1358","1359","1360","1361","1362","1363","1364","1365","1366","1367","1368","1369","1370","1371","1372","1373","1374","1375","1376","1377","1378","1379","1380","1381","1382","1383","1384","1385","1386","1387","1388","1389","1390","1391","1392","1393","1394","1395","1396","1397","1398","1399","1400","1401","1402","1403","1404","1405","1406","1407","1408","1409","1410","1411","1412","1413","1414","1415","1416","1417","1418","1419","1420","1421","1422","1423","1424","1425","1426","1427","1428","1429","1430","1431","1432","1433","1434","1435","1436","1437","1438","1439","1440","1441","1442","1443","1444","1445","1446","1447","1448","1449","1450","1451","1452","1453","1454","1455","1456","1457","1458","1459","1460","1461","1462","1463","1464","1465","1466","1467","1468","1469","1470","1471","1472","1473","1474","1475","1476","1477","1478","1479","1480","1481","1482","1483","1484","1485","1486","1487","1488","1489","1490","1491","1492","1493","1494","1495","1496","1497","1498","1499","1500","1501","1502","1503","1504","1505","1506","1507","1508","1509","1510","1511","1512","1513","1514","1515","1516","1517","1518","1519","1520","1521","1522","1523","1524","1525","1526","1527","1528","1529","1530","1531","1532","1533","1534","1535","1536","1537","1538","1539","1540","1541","1542","1543","1544","1545","1546","1547","1548"],["44001","44002","44003","44005","44006","44007","44009","44010","44012","44013","44014","44015","44016","44017","44018","44019","44020","44021","44022","44023","44024","44025","44026","44027","44028","44029","44030","44031","44032","44033","44035","44036","44037","44038","44039","44041","44043","44044","44045","44046","44047","44048","44049","44050","44051","44052","44053","44054","44055","44056","44057","44058","44061","44062","44063","44064","44065","44066","44067","44068","44069","44070","44071","44072","44073","44074","44075","44076","44077","44078","44079","44080","44081","44082","44083","44084","44085","44086","44087","44088","44089","44090","44091","44092","44093","44094","44095","44096","44097","44098","44099","44100","44101","44102","44103","44104","44105","44106","44107","44108","44109","44110","44111","44112","44113","44114","44115","44116","44117","44118","44119","44120","44121","44122","44123","44124","44125","44126","44127","44128","44129","44130","44131","44132","44133","44134","44135","44136","44137","44138","44139","44140","44141","44142","44143","44144","44145","44146","44148","44149","44150","44151","44152","44153","44154","44155","44156","44157","44158","44159","44160","44161","44162","44163","44164","44165","44166","44168","44169","44170","44171","44172","44173","44174","44175","44176","44178","44179","44180","44182","44183","44184","44185","44186","44187","44188","44189","44190","44191","44192","44193","44194","44195","44196","44197","44198","44199","44200","44201","44202","44203","44204","44205","44206","44207","44208","44209","44210","44211","44212","44213","44214","44215","44216","44217","44218","44219","44220","44221","44222","44223","44224","49002","49003","49007","49008","49009","49010","49011","49012","49015","49017","49018","49020","49021","49022","49023","49026","49027","49028","49029","49030","49035","49036","49038","49041","49045","49046","49048","49050","49053","49054","49055","49056","49057","49058","49060","49061","49063","49064","49065","49067","49068","49069","49070","49076","49080","49082","49086","49089","49090","49092","49099","49100","49102","49107","49109","49110","49112","49113","49114","49120","49121","49123","49125","49127","49129","49130","49131","49132","49135","49138","49140","49144","49149","49155","49159","49160","49161","49163","49167","49170","49171","49174","49176","49178","49180","49182","49183","49188","49192","49193","49194","49195","49200","49201","49205","49209","49211","49214","49215","49216","49217","49218","49219","49220","49221","49222","49223","49224","49228","49231","49235","49236","49237","49240","49241","49244","49246","49247","49248","49253","49257","49259","49260","49261","49262","49266","49267","49269","49271","49272","49274","49278","49283","49284","49288","49289","49291","49292","49294","49298","49299","49301","49302","49304","49306","49307","49308","49310","49311","49321","49323","49326","49328","49329","49330","49331","49332","49333","49334","49336","49337","49338","49339","49341","49343","49344","49345","49347","49352","49353","49355","49358","49359","49361","49362","49364","49367","49368","49369","49370","49371","49373","49374","49377","49378","49381","53001","53002","53003","53004","53005","53006","53007","53008","53009","53010","53011","53012","53013","53014","53015","53016","53017","53018","53019","53021","53022","53023","53025","53026","53027","53028","53029","53030","53031","53033","53034","53035","53036","53037","53038","53039","53040","53041","53042","53043","53045","53046","53047","53048","53049","53051","53052","53053","53054","53055","53056","53057","53058","53059","53061","53062","53063","53064","53065","53066","53067","53068","53069","53071","53072","53073","53074","53075","53076","53077","53078","53079","53080","53082","53083","53084","53085","53086","53087","53088","53089","53090","53091","53092","53093","53094","53096","53097","53098","53099","53100","53101","53102","53103","53104","53105","53106","53107","53108","53109","53110","53111","53112","53113","53114","53115","53116","53117","53118","53119","53120","53121","53122","53123","53124","53125","53126","53127","53128","53129","53130","53131","53132","53133","53134","53135","53136","53137","53138","53139","53140","53141","53142","53143","53144","53145","53146","53147","53148","53150","53151","53152","53153","53154","53155","53156","53157","53158","53159","53160","53161","53162","53163","53164","53165","53168","53169","53170","53172","53173","53174","53175","53176","53177","53178","53179","53180","53181","53182","53184","53185","53186","53187","53188","53189","53190","53191","53192","53193","53195","53196","53197","53198","53199","53200","53201","53202","53203","53204","53206","53207","53208","53209","53210","53211","53212","53213","53214","53215","53216","53218","53219","53220","53221","53222","53223","53224","53225","53226","53228","53229","53230","53231","53232","53233","53234","53235","53236","53237","53238","53239","53240","53241","53242","53243","53244","53245","53246","53247","53248","53249","53250","53251","53253","53254","53255","53256","53257","53258","53259","53260","53261","53262","53263","53264","53265","53266","53267","53269","53270","53271","53272","53273","53274","53276","72001","72002","72003","72004","72005","72006","72007","72008","72009","72010","72011","72012","72013","72015","72016","72017","72018","72019","72020","72021","72022","72023","72024","72025","72026","72027","72028","72029","72031","72032","72033","72034","72035","72036","72037","72038","72039","72040","72041","72042","72043","72044","72045","72046","72047","72048","72049","72050","72051","72052","72053","72054","72056","72057","72058","72059","72060","72061","72062","72064","72065","72066","72067","72068","72070","72071","72072","72073","72074","72075","72076","72077","72078","72079","72080","72081","72083","72084","72085","72086","72087","72088","72089","72090","72091","72093","72094","72095","72096","72097","72098","72099","72100","72101","72102","72103","72104","72105","72106","72107","72109","72110","72111","72112","72113","72114","72115","72116","72117","72118","72119","72120","72121","72122","72123","72124","72125","72126","72127","72128","72129","72130","72131","72132","72133","72134","72135","72136","72137","72138","72139","72141","72142","72143","72144","72145","72146","72147","72148","72149","72150","72151","72152","72153","72154","72155","72156","72157","72158","72160","72161","72163","72164","72165","72166","72167","72168","72169","72170","72171","72172","72173","72174","72175","72176","72177","72178","72179","72180","72181","72182","72183","72184","72185","72186","72187","72188","72189","72190","72191","72192","72193","72194","72195","72196","72197","72198","72199","72200","72201","72202","72204","72205","72208","72209","72210","72211","72212","72213","72214","72215","72216","72217","72218","72219","72220","72221","72222","72223","72224","72225","72226","72227","72228","72229","72230","72231","72232","72233","72234","72235","72236","72237","72238","72239","72241","72243","72244","72245","72246","72247","72248","72249","72250","72251","72252","72253","72254","72255","72256","72257","72259","72260","72261","72262","72264","72265","72266","72267","72268","72269","72270","72271","72272","72273","72274","72275","72276","72277","72278","72279","72280","72281","72282","72283","72284","72286","72287","72289","72290","72291","72292","72293","72294","72295","72296","72297","72298","72299","72300","72302","72303","72304","72305","72306","72307","72308","72309","72310","72311","72312","72313","72314","72315","72316","72317","72319","72320","72321","72322","72323","72324","72325","72326","72327","72328","72329","72330","72331","72332","72333","72334","72335","72336","72337","72338","72339","72340","72341","72342","72343","72344","72345","72346","72347","72348","72349","72350","72351","72352","72353","72354","72355","72356","72357","72358","72359","72360","72361","72362","72363","72364","72366","72367","72368","72369","72370","72372","72373","72374","72375","72376","72377","72378","72379","72380","72381","72382","72383","72385","72386","85001","85002","85003","85004","85005","85006","85008","85009","85010","85011","85012","85013","85014","85015","85016","85017","85018","85019","85020","85021","85022","85023","85024","85025","85026","85027","85028","85029","85031","85033","85034","85035","85036","85037","85038","85039","85040","85041","85042","85045","85046","85047","85048","85049","85050","85051","85053","85054","85055","85056","85058","85059","85060","85061","85062","85064","85065","85066","85067","85070","85071","85072","85073","85074","85076","85077","85078","85080","85081","85082","85083","85084","85086","85087","85088","85089","85090","85092","85093","85094","85095","85096","85097","85098","85099","85100","85101","85102","85103","85104","85105","85106","85107","85108","85109","85110","85111","85112","85113","85114","85115","85116","85117","85118","85119","85120","85121","85123","85125","85126","85127","85128","85129","85130","85131","85132","85133","85134","85135","85136","85137","85138","85139","85140","85141","85142","85143","85144","85145","85146","85147","85148","85149","85151","85152","85153","85154","85155","85156","85157","85158","85159","85160","85161","85162","85163","85164","85166","85167","85168","85169","85171","85172","85174","85175","85176","85177","85178","85179","85181","85182","85184","85185","85186","85187","85188","85189","85190","85191","85192","85193","85194","85196","85197","85198","85199","85200","85201","85202","85204","85205","85206","85207","85208","85209","85210","85211","85213","85214","85215","85216","85217","85218","85220","85221","85222","85223","85224","85226","85227","85229","85231","85232","85233","85234","85235","85236","85237","85238","85239","85240","85242","85243","85244","85245","85246","85247","85248","85250","85251","85252","85254","85255","85256","85259","85260","85261","85262","85264","85265","85266","85267","85268","85269","85271","85273","85274","85276","85277","85278","85280","85281","85282","85284","85285","85286","85287","85288","85289","85290","85291","85292","85293","85294","85295","85296","85297","85298","85299","85300","85301","85302","85303","85304","85305","85306","85307","44004","44008","44011","44034","44040","44059","44060","44147","44181","49001","49004","49005","49006","49013","49014","49019","49024","49025","49031","49032","49033","49034","49037","49039","49040","49042","49043","49044","49047","49049","49051","49052","49059","49062","49066","49071","49072","49073","49074","49075","49077","49078","49079","49081","49083","49084","49085","49087","49088","49091","49093","49094","49095","49096","49097","49098","49101","49103","49104","49105","49106","49108","49111","49115","49116","49117","49119","49122","49126","49128","49133","49134","49136","49137","49139","49141","49142","49143","49145","49147","49148","49150","49151","49153","49154","49156","49157","49158","49162","49165","49169","49172","49173","49175","49177","49179","49181","49184","49185","49186","49187","49189","49190","49191","49196","49197","49198","49199","49202","49204","49206","49207","49208","49212","49213","49225","49226","49227","49229","49230","49232","49233","49234","49238","49239","49242","49243","49245","49249","49250","49251","49252","49254","49256","49258","49263","49264","49265","49268","49270","49273","49276","49277","49279","49280","49281","49282","49285","49290","49295","49296","49297","49300","49303","49305","49309","49312","49313","49314","49315","49316","49317","49318","49319","49320","49322","49324","49325","49327","49335","49342","49346","49348","49349","49350","49351","49354","49356","49360","49363","49365","49366","49372","49375","49376","49380","53032","53050","53095","53194","53205","53252","72063","72069","72082","72108","72159","72162","72203","72207","72240","72258","72288","72301","72318","72384","85030","85043","85044","85052","85063","85069","85091","85150","85165","85180","85212","85219","85257","85272","85279","49210","85068","53024","72206","44042","44167","44177","49016","49118","49146","49152","49164","49166","49168","49275","49286","49287","49293","49357","49379","53020","53044","53060","53070","53149","53166","53167","53171","53183","53217","53227","53268","53275","85079","85122","85124","85170","85203","85228","85230","85253","85258","85263","85270","85275","85283"],["Abbaretz","Aigrefeuille-sur-Maine","Ancenis","Chaumes-en-Retz","Assérac","Avessac","Basse-Goulaine","Batz-sur-Mer","La Bernerie-en-Retz","Besné","Le Bignon","Blain","La Boissière-du-Doré","Bonnœuvre","Bouaye","Bouée","Bouguenais","Villeneuve-en-Retz","Boussay","Bouvron","Brains","Campbon","Carquefou","Casson","Le Cellier","Divatte-sur-Loire","La Chapelle-des-Marais","La Chapelle-Glain","La Chapelle-Heulin","La Chapelle-Launay","La Chapelle-sur-Erdre","Châteaubriant","Château-Thébaud","Chauvé","Cheix-en-Retz","La Chevrolière","Clisson","Conquereuil","Cordemais","Corsept","Couëron","Couffé","Le Croisic","Crossac","Derval","Donges","Drefféac","Erbray","La Baule-Escoublac","Fay-de-Bretagne","Fégréac","Fercé","Frossay","Le Gâvre","Gétigné","Gorges","Grand-Auverné","Grandchamps-des-Fontaines","Guémené-Penfao","Guenrouet","Guérande","La Haie-Fouassière","Haute-Goulaine","Herbignac","Héric","Indre","Issé","Jans","Joué-sur-Erdre","Juigné-des-Moutiers","Le Landreau","Lavau-sur-Loire","Legé","Ligné","La Limouzinière","Le Loroux-Bottereau","Louisfert","Lusanger","Machecoul-Saint-Même","Maisdon-sur-Sèvre","Malville","La Marne","Marsac-sur-Don","Massérac","Maumusson","Mauves-sur-Loire","La Meilleraye-de-Bretagne","Mésanger","Mesquer","Missillac","Moisdon-la-Rivière","Monnières","La Montagne","Montbert","Montoir-de-Bretagne","Montrelais","Mouais","Les Moutiers-en-Retz","Mouzeil","Mouzillon","Nantes","Nort-sur-Erdre","Notre-Dame-des-Landes","Noyal-sur-Brutz","Nozay","Orvault","Oudon","Paimbœuf","Le Pallet","Pannecé","Paulx","Le Pellerin","Petit-Auverné","Petit-Mars","Pierric","Le Pin","Piriac-sur-Mer","La Plaine-sur-Mer","La Planche","Plessé","Pontchâteau","Pont-Saint-Martin","Pornic","Pornichet","Port-Saint-Père","Pouillé-les-Côteaux","Le Pouliguen","Préfailles","Prinquiau","Puceul","Quilly","La Regrippière","La Remaudière","Remouillé","Rezé","Riaillé","Rouans","Rougé","Ruffigné","Saffré","Saint-Aignan-Grandlieu","Saint-André-des-Eaux","Sainte-Anne-sur-Brivet","Saint-Aubin-des-Châteaux","Saint-Brevin-les-Pins","Saint-Colomban","Corcoué-sur-Logne","Saint-Étienne-de-Mer-Morte","Saint-Étienne-de-Montluc","Saint-Fiacre-sur-Maine","Saint-Géréon","Saint-Gildas-des-Bois","Saint-Herblain","Vair-sur-Loire","Saint-Hilaire-de-Chaléons","Saint-Hilaire-de-Clisson","Saint-Jean-de-Boiseau","Saint-Joachim","Saint-Julien-de-Concelles","Saint-Julien-de-Vouvantes","Saint-Léger-les-Vignes","Sainte-Luce-sur-Loire","Saint-Lumine-de-Clisson","Saint-Lumine-de-Coutais","Saint-Lyphard","Saint-Malo-de-Guersac","Saint-Mars-de-Coutais","Saint-Mars-du-Désert","Saint-Mars-la-Jaille","Saint-Michel-Chef-Chef","Saint-Molf","Saint-Nazaire","Saint-Nicolas-de-Redon","Sainte-Pazanne","Saint-Père-en-Retz","Saint-Philbert-de-Grand-Lieu","Sainte-Reine-de-Bretagne","Saint-Sébastien-sur-Loire","Saint-Sulpice-des-Landes","Saint-Viaud","Saint-Vincent-des-Landes","Sautron","Savenay","Sévérac","Sion-les-Mines","Les Sorinières","Soudan","Soulvache","Sucé-sur-Erdre","Teillé","Le Temple-de-Bretagne","Thouaré-sur-Loire","Les Touches","Touvois","Trans-sur-Erdre","Treffieux","Treillières","Trignac","La Turballe","Vallet","Loireauxence","Vay","Vertou","Vieillevigne","Vigneux-de-Bretagne","Villepot","Vritz","Vue","La Chevallerais","La Roche-Blanche","Geneston","La Grigonnais","Allonnes","Tuffalun","Angers","Angrie","Antoigné","Armaillé","Artannes-sur-Thouet","Aubigné-sur-Layon","Avrillé","Baracé","Baugé-en-Anjou","Beaucouzé","Beaufort-en-Anjou","Beaulieu-sur-Layon","Beaupréau-en-Mauges","Bécon-les-Granits","Bégrolles-en-Mauges","Béhuard","Blaison-Saint-Sulpice","Blou","Bouchemaine","Bouillé-Ménard","Bourg-l'Évêque","Brain-sur-Allonnes","La Breille-les-Pins","Brézé","Briollay","Brissac Loire Aubance","Brossay","Candé","Cantenay-Épinard","Carbay","Cernusson","Les Cerqueux","Chacé","Challain-la-Potherie","Chalonnes-sur-Loire","Chambellay","Les Hauts d'Anjou","Chenillé-Champteussé","Champtocé-sur-Loire","Orée d'Anjou","Chanteloup-les-Bois","La Chapelle-Saint-Laud","Châteauneuf-sur-Sarthe","Chaudefonds-sur-Layon","Terranjou","Chazé-sur-Argos","Cheffes","Chemillé-en-Anjou","Cholet","Cizay-la-Madeleine","Cléré-sur-Layon","Cornillé-les-Caves","Coron","Corzé","Le Coudray-Macouard","Courchamps","Courléon","Denée","Dénezé-sous-Doué","Distré","Doué-en-Anjou","Durtal","Écouflant","Écuillé","Épieds","Étriché","Feneu","Les Bois d'Anjou","Fontevraud-l'Abbaye","Freigné","Gennes-Val de Loire","Grez-Neuville","Huillé","Ingrandes-Le Fresne sur Loire","La Jaille-Yvon","Jarzé Villages","Les Garennes sur Loire","Juvardeil","La Lande-Chasles","Lézigné","Le Lion-d'Angers","Loiré","Longué-Jumelles","Louresse-Rochemenier","Val d'Erdre-Auxence","Marcé","Maulévrier","Le May-sur-Èvre","Mazé-Milon","Mazières-en-Mauges","Longuenée-en-Anjou","La Ménitré","Miré","Montigné-lès-Rairies","Montilliers","Montreuil-Juigné","Montreuil-Bellay","Montreuil-sur-Loir","Montreuil-sur-Maine","Montrevault-sur-Èvre","Montsoreau","Morannes sur Sarthe-Daumeray","Mouliherne","Mozé-sur-Louet","Mûrs-Erigné","Neuillé","Noyant-Villages","Nuaillé","Parnay","Passavant-sur-Layon","La Pellerine","La Plaine","Le Plessis-Grammoire","Mauges-sur-Loire","Les Ponts-de-Cé","La Possonnière","Ombrée d'Anjou","Le Puy-Notre-Dame","Les Rairies","Rochefort-sur-Loire","La Romagne","Les Rosiers-sur-Loire","Rou-Marson","Saint-Augustin-des-Bois","Saint-Barthélemy-d'Anjou","Saint-Christophe-du-Bois","Saint-Clément-de-la-Place","Saint-Clément-des-Levées","Saint-Cyr-en-Bourg","Sainte-Gemmes-sur-Loire","Saint-Georges-sur-Loire","Saint-Germain-des-Prés","Saint-Jean-de-la-Croix","Saint-Jean-de-Linières","Saint-Just-sur-Dive","Val-du-Layon","Saint-Lambert-la-Potherie","Saint-Léger-des-Bois","Saint-Léger-sous-Cholet","Sèvremoine","Saint-Macaire-du-Bois","Saint-Martin-de-la-Place","Saint-Martin-du-Fouilloux","Loire-Authion","Saint-Melaine-sur-Aubance","Saint-Paul-du-Bois","Saint-Philbert-du-Peuple","Saint-Sigismond","Verrières-en-Anjou","Sarrigné","Saumur","Savennières","Sceaux-d'Anjou","Segré-en-Anjou Bleu","La Séguinière","Seiches-sur-le-Loir","Sermaise","Somloire","Soucelles","Soulaines-sur-Aubance","Soulaire-et-Bourg","Souzay-Champigny","La Tessoualle","Thorigné-d'Anjou","Bellevigne-en-Layon","Tiercé","Toutlemonde","Trélazé","Trémentines","Turquant","Les Ulmes","Varennes-sur-Loire","Varrains","Vaudelnay","Erdre-en-Anjou","Vernantes","Vernoil-le-Fourrier","Verrie","Vezins","Lys-Haut-Layon","Villebernier","Villevêque","Vivy","Yzernay","Ahuillé","Alexain","Ambrières-les-Vallées","Ampoigné","Andouillé","Argenton-Notre-Dame","Argentré","Aron","Arquenay","Assé-le-Bérenger","Astillé","Athée","Averton","Azé","La Baconnière","Bais","Val-du-Maine","Ballots","Bannes","La Bazoge-Montpinçon","La Bazouge-de-Chemeré","La Bazouge-des-Alleux","Bazougers","Beaulieu-sur-Oudon","Beaumont-Pied-de-Bœuf","Belgeard","Bierné","Le Bignon-du-Maine","La Bigottière","La Boissière","Bonchamp-lès-Laval","Bouchamps-lès-Craon","Bouère","Bouessay","Boulay-les-Ifs","Le Bourgneuf-la-Forêt","Bourgon","Brains-sur-les-Marches","Brecé","Brée","La Brûlatte","Le Buret","Carelles","Chailland","Châlons-du-Maine","Champéon","Champfrémont","Champgenéteux","Changé","Chantrigné","La Chapelle-Anthenaise","La Chapelle-au-Riboul","La Chapelle-Craonnaise","La Chapelle-Rainsouin","Charchigné","Château-Gontier","Châtelain","Châtillon-sur-Colmont","Châtres-la-Forêt","Chemazé","Chémeré-le-Roi","Chérancé","Chevaigné-du-Maine","Colombiers-du-Plessis","Commer","Congrier","Contest","Cosmes","Cossé-en-Champagne","Cossé-le-Vivien","Coudray","Couesmes-Vaucé","Couptrain","Courbeveille","Courcité","Craon","Crennes-sur-Fraubée","La Croixille","La Cropte","Cuillé","Daon","Denazé","Désertines","Deux-Évailles","La Dorée","Entrammes","Ernée","Évron","Fontaine-Couverte","Forcé","Fougerolles-du-Plessis","Fromentières","Gastines","Le Genest-Saint-Isle","Gennes-sur-Glaize","Gesnes","Gesvres","Gorron","La Gravelle","Grazay","Grez-en-Bouère","La Haie-Traversaine","Le Ham","Hambers","Hardanges","Hercé","Le Horps","Houssay","Le Housseau-Brétignolles","L' Huisserie","Izé","Javron-les-Chapelles","Jublains","Juvigné","Laigné","Landivy","Larchamp","Lassay-les-Châteaux","Laubrières","Launay-Villiers","Laval","Lesbois","Levaré","Lignières-Orgères","Livet","Livré-la-Touche","Loigné-sur-Mayenne","Loiron-Ruillé","Longuefuye","Loupfougères","Louverné","Louvigné","Madré","Maisoncelles-du-Maine","Marcillé-la-Ville","Marigné-Peuton","Martigné-sur-Mayenne","Mayenne","Mée","Ménil","Méral","Meslay-du-Maine","Mézangers","Montaudin","Montenay","Montflours","Montigné-le-Brillant","Montjean","Montourtier","Montreuil-Poulay","Montsûrs-Saint-Céneré","Moulay","Neau","Neuilly-le-Vendin","Niafles","Nuillé-sur-Vicoin","Olivet","Oisseau","Origné","La Pallu","Parigné-sur-Braye","Parné-sur-Roc","Le Pas","La Pellerine","Peuton","Placé","Pommerieux","Pontmain","Port-Brillet","Préaux","Pré-en-Pail-Saint-Samson","Quelaines-Saint-Gault","Ravigny","Renazé","Rennes-en-Grenouilles","Le Ribay","La Roë","La Rouaudière","Ruillé-Froid-Fonds","Sacé","Saint-Aignan-de-Couptrain","Saint-Aignan-sur-Roë","Saint-Aubin-du-Désert","Saint-Aubin-Fosse-Louvain","Saint-Baudelle","Saint-Berthevin","Saint-Berthevin-la-Tannière","Saint-Brice","Saint-Calais-du-Désert","Saint-Charles-la-Forêt","Saint-Christophe-du-Luat","Saint-Cyr-en-Pail","Saint-Cyr-le-Gravelais","Saint-Denis-d'Anjou","Saint-Denis-de-Gastines","Saint-Denis-du-Maine","Saint-Ellier-du-Maine","Saint-Erblon","Saint-Fort","Saint-Fraimbault-de-Prières","Sainte-Gemmes-le-Robert","Saint-Georges-Buttavent","Saint-Georges-le-Fléchard","Saint-Georges-sur-Erve","Saint-Germain-d'Anxure","Saint-Germain-de-Coulamer","Saint-Germain-le-Fouilloux","Saint-Germain-le-Guillaume","Saint-Hilaire-du-Maine","Blandouet-Saint Jean","Saint-Jean-sur-Mayenne","Saint-Julien-du-Terroux","Saint-Laurent-des-Mortiers","Saint-Léger","Saint-Loup-du-Dorat","Saint-Loup-du-Gast","Sainte-Marie-du-Bois","Saint-Mars-du-Désert","Saint-Mars-sur-Colmont","Saint-Mars-sur-la-Futaie","Saint-Martin-de-Connée","Saint-Martin-du-Limet","Saint-Michel-de-Feins","Saint-Michel-de-la-Roë","Saint-Ouën-des-Toits","Saint-Ouën-des-Vallons","Saint-Pierre-des-Landes","Saint-Pierre-des-Nids","Saint-Pierre-la-Cour","Saint-Pierre-sur-Erve","Saint-Pierre-sur-Orthe","Saint-Poix","Saint-Quentin-les-Anges","Saint-Saturnin-du-Limet","Saint-Sulpice","Sainte-Suzanne-et-Chammes","Saint-Thomas-de-Courceriers","Saulges","La Selle-Craonnaise","Senonnes","Simplé","Soucé","Soulgé-sur-Ouette","Thubœuf","Thorigné-en-Charnie","Torcé-Viviers-en-Charnie","Trans","Vaiges","Vautorte","Vieuvy","Villaines-la-Juhel","Villepail","Villiers-Charlemagne","Vimarcé","Voutré","Aigné","Aillières-Beauvoir","Allonnes","Amné","Ancinnes","Arçonnay","Ardenay-sur-Mérize","Arnage","Arthezé","Asnières-sur-Vègre","Assé-le-Boisne","Assé-le-Riboul","Aubigné-Racan","Les Aulneaux","Auvers-le-Hamon","Auvers-sous-Montfaucon","Avesnes-en-Saosnois","Avessé","Avezé","Avoise","Le Bailleul","Ballon-Saint Mars","La Bazoge","Bazouges Cré sur Loir","Beaufay","Beaumont-sur-Dême","Beaumont-Pied-de-Bœuf","Beaumont-sur-Sarthe","Beillé","Berfay","Bernay-en-Champagne","Bérus","Bessé-sur-Braye","Béthon","Blèves","Boëssé-le-Sec","Bonnétable","La Bosse","Bouër","Bouloire","Bourg-le-Roi","Bousse","Brains-sur-Gée","Le Breil-sur-Mérize","Brette-les-Pins","Briosne-lès-Sables","La Bruère-sur-Loir","Brûlon","Cérans-Foulletourte","Chahaignes","Challes","Champagné","Champfleur","Champrond","Changé","Chantenay-Villedieu","La Chapelle-aux-Choux","La Chapelle-d'Aligné","La Chapelle-du-Bois","La Chapelle-Huon","La Chapelle-Saint-Aubin","La Chapelle-Saint-Fray","La Chapelle-Saint-Rémy","La Chartre-sur-le-Loir","Chassillé","Montval-sur-Loir","Château-l'Hermitage","Chaufour-Notre-Dame","Chemiré-en-Charnie","Chemiré-le-Gaudin","Chenay","Chenu","Chérancé","Chérisay","Cherré","Cherreau","Chevillé","Clermont-Créans","Cogners","Commerveil","Conflans-sur-Anille","Congé-sur-Orne","Conlie","Connerré","Contilly","Cormes","Coudrecieux","Coulaines","Coulans-sur-Gée","Coulombiers","Coulongé","Courcebœufs","Courcelles-la-Forêt","Courcemont","Courcival","Courdemanche","Courgains","Courgenard","Courtillers","Crannes-en-Champagne","Crissé","Crosmières","Cures","Dangeul","Degré","Dehault","Dissay-sous-Courcillon","Dissé-sous-Ballon","Dissé-sous-le-Lude","Dollon","Domfront-en-Champagne","Doucelles","Douillet","Duneau","Dureil","Écommoy","Écorpain","Épineu-le-Chevreuil","Étival-lès-le-Mans","Évaillé","Fatines","Fay","Fercé-sur-Sarthe","La Ferté-Bernard","Fillé","Flée","La Fontaine-Saint-Martin","Fontenay-sur-Vègre","Villeneuve-en-Perseigne","Fresnay-sur-Sarthe","Fyé","Gesnes-le-Gandelin","Grandchamp","Le Grand-Lucé","Gréez-sur-Roc","Le Grez","Guécélard","La Guierche","Jauzé","Joué-en-Charnie","Joué-l'Abbé","Juigné-sur-Sarthe","Juillé","Jupilles","La Flèche","Laigné-en-Belin","Lamnay","Lavardin","Lavaré","Lavernat","Lhomme","Ligron","Livet-en-Saosnois","Lombron","Longnes","Louailles","Loué","Louplande","Louvigny","Louzes","Le Luart","Luceau","Lucé-sous-Ballon","Luché-Pringé","Le Lude","Maigné","Maisoncelles","Malicorne-sur-Sarthe","Mamers","Le Mans","Mansigné","Marçon","Mareil-en-Champagne","Mareil-sur-Loir","Maresché","Marigné-Laillé","Marollette","Marolles-les-Braults","Marolles-lès-Saint-Calais","Mayet","Les Mées","Melleray","Meurcé","Mézeray","Mézières-sur-Ponthouin","Mézières-sous-Lavardin","La Milesse","Moitron-sur-Sarthe","Moncé-en-Belin","Moncé-en-Saosnois","Monhoudou","Montaillé","Montbizot","Montmirail","Montreuil-le-Chétif","Montreuil-le-Henri","Mont-Saint-Jean","Moulins-le-Carbonnel","Mulsanne","Nauvay","Neufchâtel-en-Saosnois","Neuvillalais","Neuville-sur-Sarthe","Neuvillette-en-Charnie","Neuvy-en-Champagne","Nogent-le-Bernard","Nogent-sur-Loir","Nouans","Noyen-sur-Sarthe","Nuillé-le-Jalais","Oisseau-le-Petit","Oizé","Panon","Parcé-sur-Sarthe","Parennes","Parigné-le-Pôlin","Parigné-l'Évêque","Notre-Dame-du-Pé","Peray","Pezé-le-Robert","Piacé","Pincé","Pirmil","Pizieux","Poillé-sur-Vègre","Montfort-le-Gesnois","Pontvallain","Précigné","Préval","Prévelles","Pruillé-le-Chétif","Pruillé-l'Éguillé","La Quinte","Rahay","René","Requeil","Roézé-sur-Sarthe","Rouessé-Fontaine","Rouessé-Vassé","Rouez","Rouillon","Rouperroux-le-Coquet","Ruaudin","Ruillé-en-Champagne","Loir en Vallée","Sablé-sur-Sarthe","Saint-Aignan","Saint-Aubin-de-Locquenay","Saint-Aubin-des-Coudrais","Saint-Biez-en-Belin","Saint-Calais","Saint-Calez-en-Saosnois","Saint-Célerin","Sainte-Cérotte","Saint-Christophe-du-Jambet","Saint-Christophe-en-Champagne","Saint-Corneille","Saint-Cosme-en-Vairais","Saint-Denis-des-Coudrais","Saint-Denis-d'Orques","Saint-Georges-de-la-Couée","Saint-Georges-du-Bois","Saint-Georges-du-Rosay","Saint-Georges-le-Gaultier","Saint-Germain-d'Arcé","Saint-Germain-sur-Sarthe","Saint-Gervais-de-Vic","Saint-Gervais-en-Belin","Sainte-Jamme-sur-Sarthe","Saint-Jean-d'Assé","Saint-Jean-de-la-Motte","Saint-Jean-des-Échelles","Saint-Jean-du-Bois","Saint-Léonard-des-Bois","Saint-Longis","Saint-Maixent","Saint-Marceau","Saint-Mars-de-Locquenay","Saint-Mars-d'Outillé","Saint-Mars-la-Brière","Saint-Martin-des-Monts","Saint-Michel-de-Chavaignes","Sainte-Osmane","Saint-Ouen-de-Mimbré","Saint-Ouen-en-Belin","Saint-Ouen-en-Champagne","Saint-Paterne - Le Chevain","Saint-Paul-le-Gaultier","Saint-Pavace","Saint-Pierre-de-Chevillé","Saint-Pierre-des-Bois","Saint-Pierre-des-Ormes","Saint-Pierre-du-Lorouër","Saint-Rémy-de-Sillé","Saint-Rémy-des-Monts","Saint-Rémy-du-Val","Sainte-Sabine-sur-Longève","Saint-Saturnin","Saint-Symphorien","Saint-Ulphace","Saint-Victeur","Saint-Vincent-des-Prés","Saint-Vincent-du-Lorouër","Saosnes","Sarcé","Sargé-lès-le-Mans","Savigné-l'Évêque","Savigné-sous-le-Lude","Sceaux-sur-Huisne","Ségrie","Semur-en-Vallon","Sillé-le-Guillaume","Sillé-le-Philippe","Solesmes","Sougé-le-Ganelon","Souillé","Souligné-Flacé","Souligné-sous-Ballon","Soulitré","Souvigné-sur-Même","Souvigné-sur-Sarthe","Spay","Surfonds","La Suze-sur-Sarthe","Tassé","Tassillé","Teillé","Teloché","Tennie","Terrehault","Théligny","Thoigné","Thoiré-sous-Contensor","Thoiré-sur-Dinan","Thorée-les-Pins","Thorigné-sur-Dué","Torcé-en-Vallée","Trangé","Tresson","Le Tronchet","Tuffé Val de la Chéronne","Vaas","Valennes","Vallon-sur-Gée","Vancé","Verneil-le-Chétif","Vernie","Vezot","Vibraye","Villaines-la-Carelle","Villaines-la-Gonais","Villaines-sous-Lucé","Villaines-sous-Malicorne","Vion","Viré-en-Champagne","Vivoin","Voivres-lès-le-Mans","Volnay","Vouvray-sur-Huisne","Yvré-le-Pôlin","Yvré-l'Évêque","L' Aiguillon-sur-Mer","L' Aiguillon-sur-Vie","Aizenay","Angles","Antigny","Apremont","Aubigny-Les Clouzeaux","Auchay-sur-Vendée","Avrillé","Barbâtre","La Barre-de-Monts","Bazoges-en-Paillers","Bazoges-en-Pareds","Beaufou","Beaulieu-sous-la-Roche","Beaurepaire","Beauvoir-sur-Mer","Bellevigny","Benet","La Bernardière","Le Bernard","Bessay","Bois-de-Céné","La Boissière-de-Montaigu","La Boissière-des-Landes","Boufféré","Bouillé-Courdault","Bouin","Le Boupère","Bourneau","Bournezeau","Bretignolles-sur-Mer","La Bretonnière-la-Claye","Breuil-Barret","Les Brouzils","La Bruffière","La Caillère-Saint-Hilaire","Cezais","Chaillé-les-Marais","La Chaize-Giraud","La Chaize-le-Vicomte","Challans","Chambretaud","Champagné-les-Marais","Le Champ-Saint-Père","Chantonnay","La Chapelle-aux-Lys","La Chapelle-Hermier","La Chapelle-Palluau","La Chapelle-Thémer","Chasnais","La Châtaigneraie","Château-d'Olonne","Château-Guibert","Châteauneuf","Chauché","Chavagnes-en-Paillers","Chavagnes-les-Redoux","Cheffois","Coëx","Commequiers","La Copechagnière","Corpe","La Couture","Cugand","Curzon","Damvix","Doix lès Fontaines","Dompierre-sur-Yon","Les Epesses","L' Épine","Essarts en Bocage","Falleron","Faymoreau","Le Fenouiller","La Ferrière","Sèvremont","Fontenay-le-Comte","Fougeré","Foussais-Payré","Froidfond","La Garnache","La Gaubretière","La Génétouze","Le Girouard","Givrand","Le Givre","Grand'Landes","Grosbreuil","Grues","Le Gué-de-Velluire","La Guérinière","La Guyonnière","L' Herbergement","Les Herbiers","L' Hermenault","L' Île-d'Elle","L' Île-d'Olonne","L' Île-d'Yeu","Jard-sur-Mer","La Jaudonnière","La Jonchère","Lairoux","Landeronde","Les Landes-Genusson","Landevieille","Le Langon","Liez","Loge-Fougereuse","Longèves","Longeville-sur-Mer","Luçon","Les Lucs-sur-Boulogne","Maché","Les Magnils-Reigniers","Maillé","Maillezais","Mallièvre","Mareuil-sur-Lay-Dissais","Marillet","Marsais-Sainte-Radégonde","Martinet","Le Mazeau","La Meilleraie-Tillay","Menomblet","La Merlatière","Mervent","Mesnard-la-Barotière","Monsireigne","Montaigu","Montournais","Montreuil","Moreilles","Mortagne-sur-Sèvre","Les Achards","Mouchamps","Mouilleron-Saint-Germain","Mouilleron-le-Captif","Moutiers-les-Mauxfaits","Moutiers-sur-le-Lay","Mouzeuil-Saint-Martin","Nalliers","Nesmy","Nieul-le-Dolent","Nieul-sur-l'Autise","Noirmoutier-en-l'Île","Notre-Dame-de-Monts","Olonne-sur-Mer","L' Orbrie","Oulmes","Palluau","Péault","Le Perrier","Petosse","Les Pineaux","Pissotte","Le Poiré-sur-Velluire","Le Poiré-sur-Vie","Poiroux","Pouillé","Pouzauges","Puy-de-Serre","Puyravault","La Rabatelière","Réaumur","La Réorthe","Notre-Dame-de-Riez","Rocheservière","La Roche-sur-Yon","Rochetrejoux","Rosnay","Les Sables-d'Olonne","Saint-André-Goule-d'Oie","Montréverd","Saint-Aubin-des-Ormeaux","Saint-Aubin-la-Plaine","Saint-Avaugourd-des-Landes","Saint-Benoist-sur-Mer","Sainte-Cécile","Saint-Christophe-du-Ligneron","Saint-Cyr-des-Gâts","Saint-Cyr-en-Talmondais","Saint-Denis-du-Payré","Saint-Denis-la-Chevasse","Saint-Étienne-de-Brillouet","Saint-Étienne-du-Bois","Sainte-Flaive-des-Loups","Rives de l'Yon","Sainte-Foy","Saint-Fulgent","Sainte-Gemme-la-Plaine","Saint-Georges-de-Montaigu","Saint-Georges-de-Pointindoux","Saint-Germain-de-Prinçay","Saint-Gervais","Saint-Gilles-Croix-de-Vie","Sainte-Hermine","Saint-Hilaire-de-Loulay","Saint-Hilaire-de-Riez","Saint-Hilaire-des-Loges","Saint-Hilaire-de-Voust","Saint-Hilaire-la-Forêt","Saint-Hilaire-le-Vouhis","Saint-Jean-de-Beugné","Saint-Jean-de-Monts","Saint-Juire-Champgillon","Saint-Julien-des-Landes","Saint-Laurent-de-la-Salle","Saint-Laurent-sur-Sèvre","Saint-Maixent-sur-Vie","Saint-Malô-du-Bois","Saint-Mars-la-Réorthe","Brem-sur-Mer","Saint-Martin-de-Fraigneau","Saint-Martin-des-Fontaines","Saint-Martin-des-Noyers","Saint-Martin-des-Tilleuls","Saint-Martin-Lars-en-Sainte-Hermine","Saint-Mathurin","Saint-Maurice-des-Noues","Saint-Maurice-le-Girard","Saint-Mesmin","Saint-Michel-en-l'Herm","Saint-Michel-le-Cloucq","Saint-Paul-en-Pareds","Saint-Paul-Mont-Penit","Sainte-Pexine","Saint-Philbert-de-Bouaine","Saint-Pierre-du-Chemin","Saint-Pierre-le-Vieux","Saint-Prouant","Sainte-Radégonde-des-Noyers","Saint-Révérend","Saint-Sigismond","Saint-Sulpice-en-Pareds","Saint-Urbain","Saint-Valérien","Saint-Vincent-Sterlanges","Saint-Vincent-sur-Graon","Saint-Vincent-sur-Jard","Sallertaine","Sérigné","Sigournais","Soullans","Le Tablier","La Taillée","Tallud-Sainte-Gemme","Talmont-Saint-Hilaire","La Tardière","Thiré","Thorigny","Thouarsais-Bouildroux","Tiffauges","La Tranche-sur-Mer","Treize-Septiers","Treize-Vents","Triaize","Vairé","Velluire","Venansault","Vendrennes","La Verrie","Vix","Vouillé-les-Marais","Vouvant","Xanton-Chassenon","La Faute-sur-Mer","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],[2042,3700,7510,6666,1801,2525,8698,2974,2834,2958,3667,9638,1038,560,7300,937,18815,4909,2629,3110,2741,3974,19411,2183,3666,6701,4069,819,3266,2913,19159,12067,2983,2753,1027,5391,6883,1099,3671,2700,20573,2518,4040,2899,3487,7699,2149,2946,15611,3568,2440,493,3184,1760,3614,4495,776,5665,5231,3322,16294,4563,5633,6582,5876,3935,1872,1314,2399,352,2958,761,4491,5088,2387,8031,1009,1027,7341,2873,3395,1442,1496,694,1046,3200,1498,4665,1938,5199,1955,2125,6135,3076,7058,867,384,1576,1887,2764,303382,8539,2098,589,4087,25634,3720,3197,3234,1340,1972,4964,432,3608,981,785,2231,4058,2576,5193,10604,5696,14902,10416,2894,1000,4455,1213,3499,1098,1377,1532,1276,1862,39649,2288,2860,2247,714,3814,3879,6197,2922,1765,13492,3316,2825,1680,6840,1164,2893,3751,45786,4584,2235,2222,5566,3934,6860,968,1708,15172,2118,2114,4627,3181,2627,4721,2400,4642,2499,69784,3157,6547,4488,8767,2330,26371,686,2407,1519,7639,8319,1632,1612,8063,1998,356,6903,1779,1889,9468,2463,1770,1046,841,8734,7636,4460,8838,7487,2071,23124,3964,5822,668,804,1608,1563,1180,3636,1651,3037,1775,151520,946,468,313,422,367,13518,565,11862,5042,7104,1422,22965,2809,2012,120,1235,1007,6644,741,252,1980,595,1271,2844,10778,370,2869,2125,249,357,887,1409,824,6513,379,5515,358,1872,16244,720,736,3188,966,3910,1062,974,21492,53800,476,344,485,1606,1796,911,485,149,1401,465,1671,10986,3371,3983,623,738,1538,2235,2610,1528,1131,5161,1459,549,2615,319,2750,4470,811,118,772,4714,862,6825,825,4818,843,3166,3845,5733,1131,6378,2116,1011,405,1220,7497,3999,548,729,16001,439,3634,866,2021,5383,995,5760,1510,451,126,151,1045,2327,18356,12488,2423,8988,1201,996,2336,1825,2305,670,1210,9303,2642,2190,1130,894,3465,3531,1404,226,1803,397,3352,2619,1666,2722,25572,457,1149,1670,15697,2024,602,1288,369,6967,814,27486,1337,1171,17603,4041,2982,309,905,2572,1357,1480,772,3126,1217,5783,4323,1305,14145,2912,593,582,1847,1231,1175,5715,1988,1271,470,1691,7858,1522,2879,2574,1850,1806,605,2798,563,2272,213,2766,1773,639,435,865,501,600,3375,1888,1250,915,1269,125,995,515,534,1133,488,187,606,681,339,501,118,5900,556,1089,753,172,1792,655,263,822,535,701,309,263,1223,709,575,302,526,5764,602,975,505,336,417,510,11745,489,1041,787,1366,414,160,177,475,1212,912,858,291,322,3057,879,376,123,635,899,4509,195,691,221,909,479,154,502,198,292,2242,5757,7280,437,1035,1250,831,159,2131,986,230,532,2623,519,631,1017,490,405,617,200,309,758,481,266,4182,473,1403,723,1466,867,1151,1091,2333,343,391,49848,194,318,778,147,756,921,2582,337,400,4163,1108,326,528,814,550,1798,13016,216,987,1084,2882,688,903,1362,256,1253,1023,368,382,2561,963,761,347,341,1231,417,1178,424,193,842,1332,541,349,228,333,671,871,1833,167,2341,2149,234,2529,112,458,242,330,555,496,373,892,248,220,1140,7366,346,530,384,215,779,486,538,1555,1591,430,537,173,1637,1002,876,1418,416,379,386,376,1151,480,846,626,1654,254,189,309,372,361,214,157,469,568,415,448,181,261,1722,187,955,1991,2136,141,459,403,419,510,244,1323,192,312,956,342,433,166,1093,295,193,763,230,1152,586,141,2903,174,1114,241,913,1627,220,11128,552,972,1848,480,5191,406,400,915,523,2159,118,1506,247,89,371,744,617,1240,2191,3672,2070,1474,343,483,1933,546,337,494,458,2233,334,97,622,3874,133,321,2077,315,435,805,1539,2148,570,250,1597,3384,710,1229,3840,1388,69,6446,862,269,1660,883,544,2398,468,960,1455,246,6200,272,1059,214,958,224,428,376,311,1731,938,407,1279,200,132,533,345,1864,2898,141,906,631,7464,1660,474,536,634,409,687,93,616,588,494,943,352,601,1045,503,483,797,272,951,140,552,1476,1020,252,337,1056,70,4642,297,306,1953,344,836,617,583,8875,1518,545,619,330,2245,2025,1009,963,160,1917,339,393,2976,1075,86,646,1296,1156,475,569,15185,2399,962,741,842,615,889,505,71,1925,336,737,2231,1472,189,100,1452,1239,108,1575,3876,345,189,1912,5304,143325,1594,1039,365,657,902,1652,148,2067,278,3168,104,451,265,1905,692,710,2617,249,3620,257,218,553,1823,418,302,307,661,706,5088,11,1032,591,2396,304,373,946,375,284,2654,529,663,1325,41,2136,524,1093,4913,639,65,370,377,195,528,80,612,3004,1730,2989,685,218,1322,823,791,190,375,1216,2631,278,816,777,2304,302,3403,355,2186,12496,274,675,918,730,3281,169,873,318,224,201,1377,1997,122,814,157,2078,438,526,341,569,400,2111,2076,1719,935,254,636,478,511,721,546,560,2389,2665,186,750,181,1006,1297,231,2142,292,1932,366,238,227,376,844,685,531,760,2487,580,231,461,522,876,216,296,3603,4018,430,570,619,439,2318,1095,1211,905,662,692,1187,649,179,627,2898,344,4460,333,143,498,3010,1104,133,219,164,87,478,719,1599,1375,1356,454,154,1673,1522,319,799,328,625,345,72,2598,159,556,695,1031,1445,212,943,1379,905,120,1761,4281,2121,1918,9212,2759,1057,1784,6285,1122,1374,1780,2188,1361,1175,1465,2185,2336,3947,5858,4007,1792,1215,427,1962,2270,1369,3288,571,2152,3108,747,3305,4434,589,653,2779,3900,1112,301,1922,1054,3708,20133,1555,1757,1840,8279,251,909,944,379,724,2536,13834,1553,1013,2497,3550,832,987,3134,3407,976,1070,214,3448,493,750,1717,4227,2812,1654,8719,1553,214,4572,5167,6470,13640,1180,1099,1785,4859,3032,1905,1009,2082,485,653,2149,838,544,1363,2733,3119,15992,879,1551,2710,4771,2642,621,430,611,2275,2302,1354,1076,274,379,1314,2473,9394,3392,1422,1609,768,973,258,2806,111,531,1085,461,1539,646,987,1055,1380,972,5180,1686,794,387,5964,4925,2843,1835,4862,2093,737,1249,2315,2832,2457,1293,4666,2029,14875,804,832,1085,592,1954,689,620,1110,663,8414,1069,620,5525,321,682,961,818,1101,2043,3221,53578,929,610,13940,1804,3580,1346,529,1042,449,1600,2531,539,372,384,2278,590,2104,2362,4148,2017,3787,2054,4248,1637,1515,2573,7540,2884,4493,11222,1961,633,831,1040,597,8621,404,1652,363,3607,1036,1586,958,2601,809,170,2305,1052,414,2225,659,594,1752,2362,1305,1337,813,246,3326,1343,971,1552,895,1423,400,422,1778,524,786,1456,1309,3036,981,873,4220,749,575,477,7363,1307,567,1229,757,1605,2863,3144,1263,1041,1633,684,4652,1672,3967,1802,770,860,724,671,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1916,3320,7551,3761,1789,2437,8091,3071,2564,2646,3309,9434,913,561,5958,860,18194,3408,2684,2863,2584,3805,17805,2089,3713,5195,3772,822,3045,2778,17300,12022,2862,2515,844,5017,6732,1046,2983,2742,18591,2290,4050,2739,3246,6748,1843,2940,16040,3230,2278,485,2977,1557,3397,4189,805,4837,5035,3007,15534,4358,5530,5817,5276,4006,1827,1098,2163,353,2876,758,4290,4592,2139,7052,898,1019,5914,2636,3161,1364,1447,643,1011,3033,1345,4394,1727,4843,1920,1932,5985,2976,6793,822,388,1316,1783,2594,284970,7781,1970,582,3835,24504,3355,3206,2948,1349,1909,4382,433,3462,943,731,2209,3835,2382,4631,9683,5684,14101,10451,2724,873,4979,1256,3103,960,1280,1544,1140,1695,38425,2127,2663,2253,719,3537,3506,5336,2588,1615,12248,3129,2553,1483,6611,1194,2692,3454,43153,2407,1967,2019,5131,4046,6820,924,1518,11907,1959,1891,4326,3212,2505,4027,2445,4435,2324,67031,3109,5437,4135,8061,2135,25017,650,2116,1462,6901,7565,1557,1678,7444,2013,397,6258,1740,1850,7674,2268,1627,970,786,7965,7264,4582,8425,3514,1940,21443,3905,5438,653,729,1415,1377,1131,3524,1548,3013,958,147571,951,485,284,434,359,12639,471,3681,4938,6380,1449,6784,2687,1877,127,1096,1022,6175,738,221,2012,595,1308,2668,2931,324,2861,2070,244,310,821,1266,827,6492,344,2068,227,1792,2373,681,646,3016,957,1057,1023,912,7028,54098,498,326,431,1550,1672,906,464,167,1403,452,1673,7518,3349,3748,600,709,1541,2159,955,1554,1149,2086,1491,524,1645,309,1691,2499,811,105,719,3687,881,6826,837,2861,859,3180,3970,4811,1000,1872,2194,1024,366,1153,7107,4014,494,689,1281,480,1790,917,2063,5326,945,1896,1379,482,130,160,964,2283,3966,11696,2342,3110,1267,970,2232,1763,2357,683,1020,8702,2624,1911,1149,982,3957,3335,1364,239,1734,404,1894,2472,1527,2492,6829,436,1156,1621,2374,2100,612,1313,374,4440,818,27283,1375,972,6801,3765,2960,331,940,2620,1156,1408,753,3059,1138,1838,4254,1138,12384,2813,563,571,1891,1207,1228,2219,1982,1251,436,1634,4271,1449,2851,2413,1791,1839,564,2787,558,2261,208,2681,1756,631,418,791,517,615,3256,1606,1275,727,1279,136,908,521,454,1036,509,204,553,673,328,449,127,5842,567,1034,766,161,1797,621,228,827,536,706,312,283,1185,641,598,316,570,5509,605,933,514,325,393,511,11585,488,1026,798,1360,453,168,191,449,1240,924,913,316,330,2938,856,390,155,657,909,4556,208,671,221,967,484,157,525,209,316,2202,5791,7148,391,1001,1352,811,188,2050,984,223,534,2772,534,605,1005,491,431,601,204,330,768,431,234,4088,495,1452,682,1434,862,1172,1052,2423,315,395,50940,197,313,710,148,760,879,1486,336,412,3946,1057,355,515,798,556,1653,13299,203,961,1089,2749,702,900,1387,236,1272,987,352,403,2107,993,697,386,316,1226,425,1180,412,180,736,1263,532,300,223,333,688,870,1910,173,2032,1962,213,2671,113,467,250,340,501,449,390,868,291,232,1186,7277,384,536,384,220,774,461,543,1519,1687,432,536,166,1532,1016,850,1394,382,409,328,401,1024,480,833,479,1526,271,194,286,333,361,236,201,438,621,410,491,170,249,1685,200,977,1932,1971,137,476,398,403,513,229,975,223,303,932,352,373,187,1105,296,189,731,231,1155,584,124,3072,195,1061,227,888,1546,215,11064,505,896,1852,488,5118,375,406,898,483,2076,106,1524,237,103,376,757,539,1234,1262,3630,1195,1359,350,495,2097,517,364,458,432,2322,339,95,632,3994,118,310,2042,324,441,705,1475,2105,513,266,1540,3242,766,1214,3757,1421,82,6164,884,276,1543,888,549,2138,421,894,1461,264,4732,251,1097,211,930,202,426,383,308,1708,858,406,1256,195,125,569,327,1869,2926,144,886,623,7447,1555,428,572,602,425,680,86,640,597,476,906,354,552,969,529,498,740,282,1009,134,579,1482,971,241,316,1023,68,4695,318,286,2041,398,760,606,639,9235,1516,558,614,336,945,2173,1031,968,166,2043,384,389,2755,1086,94,629,1251,1184,472,573,15087,2332,926,740,841,635,910,481,76,1961,360,769,2139,1517,183,103,1381,1280,109,1665,4049,344,193,1970,5473,142626,1583,1024,327,623,869,1539,137,2155,275,3191,100,485,303,1824,673,659,2385,229,3425,266,209,585,1706,404,311,256,669,730,4402,15,978,579,2386,304,378,899,413,284,2611,488,704,1202,38,2077,556,1079,4794,588,63,365,361,196,481,88,654,3083,1654,3141,647,231,1248,787,832,195,377,1199,2815,267,802,781,2201,324,3325,316,1173,12466,247,705,952,721,3419,170,766,325,209,197,1130,2005,120,894,173,1813,430,539,382,551,383,2049,2077,1483,903,255,639,535,524,784,493,538,2250,2470,173,802,194,948,1333,197,1611,294,1855,360,212,226,375,760,680,561,676,2497,561,245,418,502,933,203,292,3541,4041,431,584,604,455,2364,1089,1372,900,682,718,1160,688,178,610,2846,328,4192,302,139,523,3016,1051,134,214,164,104,432,684,1594,1283,1385,479,141,1633,1570,338,818,340,622,348,64,2620,171,527,682,1000,1423,231,926,1277,853,155,1872,4375,2312,1693,8107,2433,1029,1597,3046,614,1238,1793,2157,1118,1167,1177,2053,2185,3904,3859,3696,1672,1055,412,1669,2093,1300,2922,481,2200,2956,787,3071,4157,619,645,2595,3640,1071,318,1946,939,3414,18686,1457,1700,1674,8248,250,847,921,355,651,2691,13353,1461,892,2249,3335,793,964,3025,3021,901,912,197,3269,459,801,883,4066,2644,1743,5063,1511,232,4328,4858,2445,14339,1072,1211,1514,4493,2969,1735,873,1957,428,517,2052,811,556,1478,2706,2733,15229,849,1447,2710,4591,2543,592,387,603,2172,2290,1228,1102,268,363,1226,2377,9636,3264,1354,1504,764,968,241,2737,115,519,870,422,1539,639,908,1068,1248,913,5050,1717,807,360,6028,2631,2676,1314,4647,1856,658,1141,2209,2615,2278,1243,4567,1876,13618,833,738,1020,531,1859,606,587,1219,627,7837,902,647,5460,303,657,860,814,1029,1927,2970,52664,869,558,14603,1672,1333,1299,480,941,349,1497,2478,521,349,378,2132,516,1940,2135,2574,1816,3590,1951,3877,1545,1495,2289,7250,2612,4235,10488,1957,647,636,980,571,8192,418,1364,371,3446,929,1476,895,2582,835,162,2228,953,396,1936,640,603,1788,2186,1260,1204,689,240,2976,1355,966,1479,804,1332,415,392,1663,493,718,1320,1229,2770,1021,835,4088,640,551,472,6991,1298,563,1112,715,1489,2728,2956,1144,1039,1504,555,4490,1492,3747,1760,690,852,724,828,1910,1284,1765,780,2259,1235,982,1014,1152,890,2504,357,1830,450,454,1596,392,253,603,1208,418,811,830,679,1473,3291,1008,277,407,1115,630,336,496,137,989,1160,1196,136,729,1314,586,776,54,634,1446,289,786,101,858,728,272,1038,149,532,923,303,979,2767,543,761,2866,985,431,532,608,1282,1529,310,1938,604,647,1289,358,1656,487,258,210,756,1865,405,456,348,2579,2228,551,299,340,487,3208,1218,1368,1635,281,86,2427,2078,438,539,342,265,523,640,1084,1872,2129,301,354,1608,264,1468,1970,111,196,2939,214,822,445,608,1836,324,1357,1281,915,2486,1332,1259,1065,257,1804,254,635,1143,319,732,924,1167,2817,1190,784,783,1565,2677,1486,695,412,1590,785,2789,1744,1699,2152,779,765,794,896,368,376,3299,1036,300,1436,976,1323,287,870,179,1266,1063,550,342,338,436,765,1738,2090,1286,349,397,1762,1478,902,319,1266,2432,619,313,203,334,229,864,448,427,324,174,623,803,366,409,785,40,382,249,137,880,419,796,765,1269,433,1745,705,2529,820,1053,1143,1058,1123,408,1984,901,1754,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1747,2564,7407,3240,1668,2357,7883,3217,2499,2237,3111,8544,822,554,5632,807,16503,3027,2548,2575,2479,3379,17898,2012,3558,4738,3199,775,2715,2634,16660,12390,2731,2253,699,4925,6600,1011,2790,2486,18657,2137,4121,2526,2881,6338,1503,2695,16095,2877,2131,485,2575,1256,3305,3420,711,4225,4876,2780,15226,4065,5439,5117,4813,3688,1809,1021,1901,325,2701,733,3968,3778,1968,6023,847,1000,5732,2426,3063,1328,1327,573,949,2860,1197,3892,1658,4474,1785,1714,6021,2803,6310,791,328,1138,1520,2418,282853,7031,1839,529,3581,24218,3062,3054,2577,1122,1779,4181,392,3269,883,681,2254,3474,2269,3938,8924,5373,13681,10423,2533,793,5308,1182,2674,879,1154,1422,1047,1613,37333,1898,2498,2262,681,3248,3481,4917,2204,1456,11750,2747,2306,1231,6587,1141,2652,3273,43901,2059,1791,1773,4698,3915,6692,926,1375,11776,1725,1742,4030,3112,2404,3985,2367,4103,2030,68838,2935,4758,3843,7312,1789,24508,624,2046,1415,6809,6899,1394,1511,7251,2015,393,6111,1620,1768,7375,2071,1425,828,703,7258,7230,4341,7906,3527,1725,21091,3726,5165,687,760,1277,1149,921,3233,1347,2838,888,152337,820,461,298,458,361,12242,408,3423,4677,5754,1355,6456,2551,1721,127,1038,946,5918,717,211,1848,537,1317,2531,2552,290,2721,1964,242,263,770,1233,801,5971,296,1869,222,1701,2162,670,583,2656,922,910,959,879,6784,54632,431,333,428,1456,1581,869,443,143,1405,450,1363,7442,3310,3738,557,607,1387,2039,847,1497,1119,1952,1436,480,1552,275,1489,2471,831,99,700,3705,765,6892,773,2549,805,2890,3790,4485,963,1658,2053,960,360,1147,6781,4060,450,686,1209,501,1660,886,1917,5287,872,1890,1322,482,131,154,920,2142,4001,11440,2289,3192,1302,956,2128,1644,2281,700,965,9075,2658,1727,1113,1018,3905,3212,1301,237,1555,348,1660,2356,1473,2477,6424,417,1152,1559,2340,2092,568,1262,368,4474,802,28654,1401,769,6671,3630,3019,319,880,2458,1193,1346,707,3023,978,1789,3980,1112,12207,2794,516,520,1896,1188,1183,1700,1856,1230,416,1635,4125,1388,2722,2050,1610,1717,450,2775,522,2310,203,2480,1698,624,385,695,489,648,3229,1467,1338,737,1172,134,753,504,353,976,496,194,471,679,362,383,120,5381,552,930,746,164,1657,608,235,834,456,685,302,301,1143,553,569,290,574,5261,609,859,500,303,326,472,11025,467,968,752,1206,460,169,209,493,1150,955,884,319,325,2867,766,388,167,582,998,4629,186,604,223,929,495,159,526,197,329,2076,5793,7152,373,999,1427,791,193,2036,937,208,532,2759,536,577,996,484,434,563,217,327,754,388,225,3862,485,1473,689,1388,750,1212,1045,2450,290,396,51233,195,319,731,124,790,839,1449,326,427,3538,799,357,453,845,543,1507,13742,192,920,1042,2645,662,912,1416,226,1247,953,326,404,2091,922,701,364,295,1184,427,1085,335,182,719,1174,523,314,224,299,656,879,1903,170,2120,1822,209,2710,110,530,243,338,492,414,375,869,244,277,1132,6889,362,514,360,210,703,436,528,1460,1685,421,515,147,1578,972,824,1376,300,397,271,399,941,451,799,480,1365,257,196,239,328,353,207,192,458,627,405,470,161,231,1668,170,964,1909,1817,136,489,392,397,518,215,960,223,341,896,360,342,186,1073,276,161,730,244,1157,581,120,3106,192,997,249,856,1525,223,11301,435,899,1911,443,5229,344,423,871,474,2080,97,1493,226,107,362,782,520,1120,1307,3481,1205,1293,347,488,2161,490,381,449,408,2430,307,105,644,4090,126,238,1989,318,430,587,1355,1910,466,257,1407,2998,802,1169,3561,1342,113,5651,861,277,1342,866,525,2165,384,872,1497,221,4785,197,1023,200,928,153,458,384,236,1569,787,384,1128,199,132,598,296,1778,2837,153,839,609,7479,1343,412,577,558,423,643,82,630,595,460,803,344,518,881,528,526,686,264,972,125,554,1365,964,222,300,929,68,4599,344,273,2108,365,718,579,597,9262,1486,565,554,316,900,2241,992,957,169,2025,414,398,2689,1107,93,598,1152,1169,446,583,15321,2145,845,788,817,584,966,440,73,1927,341,698,2097,1448,172,105,1237,1191,99,1621,4088,346,199,1933,5696,144016,1516,1008,307,554,878,1511,114,2177,267,3148,100,490,275,1662,672,560,2405,207,3194,266,198,541,1528,423,305,248,648,722,4668,19,909,537,2215,274,368,867,335,260,2502,399,686,997,34,1999,539,1019,4658,483,54,364,358,196,440,90,658,3050,1521,2841,620,181,1277,683,778,201,361,1067,2587,217,784,787,2150,319,3348,318,1214,12602,235,677,953,670,3589,170,617,323,188,194,1012,1957,115,860,184,1781,400,557,357,474,387,1814,1973,1326,925,254,595,516,485,743,453,514,2175,2389,169,750,184,809,1249,179,1604,273,1841,353,192,225,365,767,690,563,609,2236,543,215,365,458,892,193,288,3567,4003,442,577,594,473,2360,1033,1338,971,547,733,1157,652,176,619,2497,278,3949,298,128,516,3039,1005,96,200,160,77,414,664,1589,1107,1355,469,131,1520,1635,356,779,350,682,329,66,2625,174,487,685,936,1327,228,907,1098,743,133,1845,4383,2283,1521,7334,1977,1030,1342,2762,576,1081,1710,2055,966,1126,1053,1907,1927,3652,3517,3521,1491,830,394,1410,1908,1249,2434,447,2206,2824,743,2852,3454,614,667,2392,3342,1042,312,1782,690,2981,17676,1402,1553,1506,7958,251,681,826,302,587,2621,12950,1352,732,2130,3213,782,901,2827,2649,786,851,189,3171,429,747,801,3758,2431,1705,4730,1283,245,3912,4301,2251,14354,902,1187,1204,4202,2737,1503,715,1761,358,454,1748,743,514,1543,2621,2469,14833,850,1393,2541,4880,2449,566,362,590,2061,2230,1047,1052,253,358,1130,2271,9682,3113,1251,1443,757,963,238,2570,121,487,724,432,1511,650,711,1077,1163,809,4822,1754,812,299,6134,2340,2569,1232,4085,1630,605,1131,2110,2318,2125,1116,4855,1772,12352,819,727,850,522,1761,512,537,1169,631,7008,788,586,5326,304,624,790,779,943,1746,2691,50717,772,507,15596,1549,1128,1236,414,820,338,1414,2117,515,386,361,1936,444,1640,1939,2550,1705,3319,1795,3687,1371,1425,2064,7281,2512,3934,10063,1846,635,560,916,506,7650,452,1266,367,3411,735,1429,790,2432,827,162,2152,885,445,1623,578,577,1858,1958,1224,1096,591,225,2556,1370,926,1402,771,1272,323,388,1221,462,655,1277,1146,2628,991,828,3851,553,492,415,6533,1216,524,949,676,1460,2644,2600,957,976,1335,508,4107,1327,3591,1702,642,789,689,1008,1584,1223,1716,727,2021,1068,879,905,1120,817,2414,307,1798,411,426,1419,377,238,555,1231,381,769,784,690,1423,3393,927,274,339,1059,599,332,478,126,931,1049,1231,135,680,1112,551,695,55,623,1416,307,693,94,891,647,252,1057,130,454,840,297,950,2590,544,741,2804,877,438,523,563,1285,1475,285,1687,577,602,1188,309,1487,407,201,184,775,1844,328,403,340,2501,2135,483,282,305,455,3167,1168,1257,1604,251,96,2349,2036,382,528,342,224,462,605,876,1847,2087,342,322,1559,259,1458,1745,114,184,2687,169,782,365,466,1798,268,1288,1306,895,2335,1246,1176,977,255,1646,261,602,1053,287,712,958,1052,2718,1045,740,637,1513,2672,1498,638,367,1583,734,2708,1666,1656,1909,751,712,738,784,341,355,3161,1001,268,1367,998,1284,280,806,190,1183,1038,489,315,285,410,754,1635,2053,1214,350,382,1612,1558,835,302,1316,2248,571,265,189,333,163,826,441,404,321,174,661,800,361,372,771,45,396,255,137,804,423,834,651,1124,430,1434,696,2401,827,987,1018,1003,975,339,1875,726,1558,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1511,2151,7010,2670,1360,2154,7499,3049,2139,2031,2582,7733,672,506,5251,661,15627,2403,2361,2411,2172,2897,15377,1320,3448,4272,2955,761,1852,2258,16391,12065,2484,1695,529,4851,5939,955,2515,1959,17808,1790,4278,2136,2491,6157,1322,2351,15831,2489,1992,517,2106,945,3076,2649,684,3466,4572,2408,13603,3337,4925,4353,3987,3643,1776,989,1690,322,2140,614,3586,2948,1405,4939,796,947,5420,2050,2980,916,1200,449,806,2407,1027,3133,1467,3813,1733,1541,5841,2296,6204,663,259,905,1213,1760,270251,5885,1649,481,3155,23554,2616,2758,2394,911,1354,3774,386,2438,783,602,1898,2517,2075,3416,7773,4754,11903,9668,2143,698,5266,1038,2055,630,905,1088,814,1443,35478,1721,2131,2143,603,2679,3483,3532,1925,1312,9594,2027,1990,1003,6231,996,2487,3059,43726,1842,1545,1475,4562,3772,6260,876,1158,11261,1348,1335,3178,3126,1858,3405,2192,3177,1501,65874,2800,3448,3454,6253,1681,25223,608,1837,1323,6824,5883,1187,1365,6239,2007,402,5868,1300,1557,6661,1950,1301,682,618,6032,6956,4042,6807,3190,1228,20268,3263,4712,669,803,995,652,840,2217,1101,2558,807,151279,678,414,290,399,334,12991,317,3663,4851,5390,1069,6217,2327,1531,110,951,824,6153,638,214,1793,444,1299,2282,2296,243,2595,1865,208,279,641,1309,774,5594,299,1501,187,1533,1748,632,420,2409,791,777,841,822,6169,54204,412,351,438,1304,1520,865,430,126,1391,404,1217,7450,3224,3703,457,545,1162,1799,723,1189,985,1946,1307,406,1418,248,1401,2273,766,86,634,3347,754,6928,613,2065,637,2830,3891,3875,954,1453,1899,969,350,1121,6666,4112,299,558,1180,544,1599,854,2000,5115,869,1839,1356,460,135,135,811,2013,3623,11387,2128,3307,1236,866,1991,1587,2242,599,826,9832,2501,1392,1005,1070,3681,3011,1134,239,1400,347,1466,2209,1307,2604,5687,388,1115,1368,2228,1942,562,1117,312,4553,743,29857,1157,721,6410,3506,2412,227,790,1858,1189,1189,678,2941,752,1682,3605,958,11025,2817,448,478,1800,1146,1058,1560,1852,1214,388,1582,3992,1349,2607,1873,1576,1379,402,2903,421,2042,181,2325,1550,508,329,547,488,601,2999,1194,1487,665,1036,118,525,443,262,933,401,190,335,633,304,331,111,4793,514,907,563,168,1537,587,229,830,459,607,255,324,1136,422,512,248,554,4909,588,657,448,266,234,396,11131,404,942,641,1019,403,166,206,514,1091,1036,765,273,281,2706,640,383,160,488,992,4659,178,547,239,849,440,148,539,152,396,1847,5703,7283,388,873,1566,674,162,1907,790,174,543,2894,548,494,922,420,422,548,245,335,734,363,212,3592,477,1512,699,1340,674,1286,1017,2532,248,350,50947,203,358,735,111,787,704,1273,274,368,2912,667,356,400,740,487,1309,13724,171,785,913,2612,555,914,1399,204,1088,797,304,414,2020,907,712,426,287,1050,381,1101,278,160,624,936,515,291,211,326,589,893,1814,156,2138,1739,198,2791,105,473,241,333,436,320,360,926,236,252,1005,6873,384,455,318,190,553,441,474,1337,1683,307,465,166,1571,904,780,1391,237,342,274,393,670,405,664,420,1196,232,188,215,332,305,210,169,435,623,420,493,136,210,1435,174,946,1712,1638,151,531,384,376,546,188,1020,246,334,882,325,256,180,971,231,159,737,238,1071,573,115,3179,205,859,236,821,1349,237,12332,334,908,1837,427,5565,292,375,791,420,2100,110,1374,189,116,306,642,491,850,1382,2860,1086,1103,337,474,1973,388,350,384,366,2597,275,96,596,4018,111,179,1883,327,384,456,1113,1491,359,256,1341,2445,747,1089,3294,1118,100,5200,727,322,1165,799,591,2094,364,734,1547,263,5148,118,810,203,901,108,462,384,220,1285,726,323,1000,204,129,606,291,1665,2590,161,855,568,7544,1095,350,541,434,408,574,80,617,516,458,627,283,468,701,473,510,657,213,900,108,556,1234,936,166,278,762,74,4316,301,235,1954,314,629,505,490,9239,1086,549,463,295,845,2335,863,742,146,1933,398,372,2594,917,82,518,1007,1167,458,527,15241,1910,696,649,736,438,902,358,71,1825,261,484,2042,1193,175,118,995,1043,85,1531,4201,349,204,1686,6084,146105,1355,984,280,504,700,1416,117,2121,248,2915,107,492,259,1487,576,415,2264,158,2463,236,192,515,1161,462,287,232,604,666,5213,18,763,426,2221,213,338,797,378,250,2290,315,679,736,28,1810,415,899,4503,313,50,336,337,187,382,93,554,2884,1283,2645,568,145,1222,546,636,220,354,1021,2327,222,739,715,2101,277,2862,289,1205,12716,196,660,883,562,3785,166,415,314,223,190,826,1911,89,815,195,1762,386,538,347,435,399,1764,1669,1034,845,233,491,503,450,668,405,432,1834,2360,153,740,154,750,1050,186,1568,260,1799,342,151,226,339,791,645,514,563,1995,500,189,290,407,829,189,284,3481,3721,470,547,586,441,2585,867,1384,810,365,663,1009,560,167,522,2300,183,3597,284,93,476,2654,978,72,176,130,89,369,616,1546,811,1040,473,105,1500,1540,353,696,329,522,285,69,2587,167,433,572,746,1117,164,816,846,697,89,1665,4230,2206,1109,6095,1582,1127,1119,2329,522,1008,1420,1810,844,1053,907,1727,1551,3399,2969,3202,1172,623,337,1263,1568,1083,1766,435,2242,2764,623,2439,2686,442,694,2031,3101,1080,267,1599,597,2443,16132,1275,1327,1316,7541,280,560,686,335,480,2762,12908,1107,527,1926,2963,735,821,2418,2297,672,724,161,2776,356,705,793,3191,2110,1685,4186,1099,267,3213,3948,1842,13792,841,1192,929,3576,2571,1393,533,1309,273,381,1257,758,467,1486,2343,1896,13932,843,1359,1820,4788,2235,545,296,532,1817,1986,791,1010,225,370,910,1962,9311,2702,1094,1395,689,934,268,2277,102,480,604,439,1499,652,646,1059,891,740,4708,1714,644,219,5938,2050,2443,1177,3493,1419,541,1101,1880,1976,1855,985,5001,1528,10060,774,639,659,430,1506,444,448,1101,633,5786,621,502,5385,320,531,689,746,817,1211,2241,49262,736,427,15532,1307,952,1150,304,656,319,1219,1630,464,301,338,1665,372,1451,1579,2364,1357,3077,1574,3176,1129,1368,1648,6797,2256,3569,8761,1840,638,423,763,417,6886,447,1105,345,3307,515,1189,760,2054,787,206,2003,758,403,1256,572,532,1747,1931,1206,926,488,217,2255,1404,881,1305,704,910,365,381,770,444,607,1062,871,2235,928,812,3425,468,436,376,5363,1182,418,881,643,1328,2510,2372,956,956,1002,508,3527,1071,3539,1572,529,867,651,905,1367,1062,1451,627,1583,855,700,876,932,636,2184,262,1799,390,421,1290,361,209,501,1242,367,666,724,687,1275,2803,768,309,316,1021,528,315,445,134,803,944,1002,140,596,1064,483,628,54,576,1409,252,610,113,940,456,244,1102,148,397,724,271,869,2410,546,597,2572,791,407,478,481,1246,1312,262,1668,466,495,1033,262,1455,354,197,184,739,1809,287,259,294,2338,1914,396,286,292,375,3153,1132,1063,1481,247,93,2154,1946,372,438,285,179,428,523,674,1705,2054,322,314,1420,248,1290,518,111,165,2652,129,709,393,418,1761,180,1319,1275,1016,2154,1218,950,976,214,1424,288,531,928,237,635,791,966,2417,857,590,455,1411,2623,1311,570,344,1448,591,2472,1450,1538,1496,702,679,650,684,364,325,3053,991,211,1219,844,1205,251,653,180,1026,900,366,247,221,360,713,1268,1923,1198,365,350,1366,1395,813,288,1252,2102,495,271,157,328,172,619,459,334,331,150,681,660,357,353,713,51,428,220,117,622,471,857,547,1018,422,1009,682,2107,870,853,835,933,857,309,1729,609,1185,1204,46,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1572,1987,6896,2321,1239,2233,5910,2734,1828,2059,2378,7434,627,532,4815,618,15099,2346,2316,2402,1889,2918,12877,1202,3139,4012,3206,808,1838,2249,14830,12783,2357,1589,442,4272,5495,893,2374,1633,16319,1805,4428,2277,2558,6377,1296,2392,14845,2388,1874,499,2099,995,2912,2603,754,2464,4464,2383,11665,2911,3823,4175,3378,3262,1821,1041,1740,335,2026,637,3532,2730,1279,4353,817,926,5072,1985,2860,835,1192,510,833,2138,1097,3068,1372,3915,1810,1379,5555,2246,6585,587,280,739,1190,1679,244995,5362,1527,443,3050,23115,2353,2842,2070,952,1311,3712,414,2309,781,602,1442,2104,2052,3298,7549,3835,9815,8133,1695,672,4912,857,2175,599,859,1093,795,1231,33262,1735,1891,2167,624,2608,3033,2919,2093,1346,8688,1889,1959,1041,5759,935,2362,3126,42774,1921,1333,1334,4120,3994,5418,955,946,9648,1255,1175,2889,3294,1744,3127,2114,2663,1154,64812,2917,3159,3250,5159,1779,22202,596,1713,1437,6026,5314,1318,1499,5174,2072,402,4806,1271,1420,5140,1935,1340,666,626,4511,7020,3587,6116,3039,1122,18235,3127,4026,690,813,887,652,930,1958,1016,2498,726,141404,700,418,297,328,263,12878,301,3748,3867,5364,981,5937,2252,1520,94,863,752,5799,719,198,1801,345,1379,2005,2275,300,2542,1632,214,270,632,1282,873,5354,268,1461,183,1335,1524,664,404,2370,827,695,854,857,6016,55132,400,408,469,1376,1365,956,426,165,1235,371,1098,7260,3195,3361,380,587,1024,1676,628,1108,1017,1867,1040,373,1410,239,1434,2006,779,104,583,3095,747,6781,579,2011,619,2610,3914,3714,836,1408,1780,958,365,1086,6451,4041,294,469,1298,561,1534,951,1802,4224,860,1722,1261,438,124,143,817,1718,3564,11032,1962,3279,1322,854,1877,1603,2204,643,776,9369,2282,1320,937,1169,3803,3101,1139,179,1008,361,1352,2079,978,2470,5543,360,1129,1315,1995,1579,583,1204,266,3488,635,30131,1164,710,6434,3482,2248,244,825,1742,1032,1063,640,2781,680,1546,3047,973,10539,3034,403,468,1847,1179,1037,1455,1749,1296,369,1394,4131,1306,2432,1885,1634,1399,418,2841,385,1926,187,2160,1378,473,298,521,408,582,2670,1152,1571,586,1049,131,495,406,261,869,380,186,332,630,288,349,152,3832,507,857,568,131,1466,582,224,865,482,622,254,358,1067,377,496,241,567,4323,594,661,452,280,216,363,11085,393,1045,598,1015,383,201,230,567,987,1035,695,257,275,2806,546,451,149,487,938,4767,190,482,243,863,408,153,585,179,415,1802,6052,6904,450,809,1745,623,166,1877,739,170,489,2837,477,469,887,391,422,451,258,328,684,333,202,2863,505,1400,718,1495,668,1391,1107,2459,292,343,50473,200,324,773,111,840,642,1240,262,400,2679,664,362,365,656,458,1214,13549,164,747,809,2418,555,938,1433,185,1038,742,274,364,2073,919,652,403,318,1004,397,1110,256,138,554,821,586,321,205,309,587,935,1813,130,2422,1691,186,2860,122,476,260,306,398,318,393,975,268,290,721,6382,438,425,314,149,523,463,472,1278,1721,246,529,134,1189,750,771,1309,189,320,272,388,596,371,633,428,1158,245,204,218,306,303,233,190,451,684,430,469,135,230,1287,166,979,1595,1622,129,542,424,397,558,137,935,249,333,904,331,237,170,889,230,181,647,273,1019,574,138,3171,219,761,243,819,1155,237,13561,321,916,1752,369,5600,281,338,754,398,2103,101,1197,182,104,282,554,495,787,1269,2745,1088,1063,329,429,1874,344,316,393,360,2815,274,92,590,3899,141,185,1829,323,382,430,1079,1385,292,218,1296,2296,785,1013,3307,1117,65,4428,648,294,1098,643,537,1817,330,688,1669,247,5473,106,808,206,819,134,472,361,242,1220,694,298,930,191,134,621,242,1642,2545,172,785,530,7370,1069,364,497,390,359,556,65,628,513,445,469,234,455,703,400,439,594,230,910,102,594,1200,850,165,328,749,77,4235,315,257,1861,351,522,444,512,9355,836,470,447,247,839,2452,802,633,134,1961,410,420,2261,837,75,464,822,1091,431,560,14953,1754,647,587,712,399,842,338,63,1786,229,368,1929,1137,167,114,952,979,101,1486,4424,308,177,1659,6071,145502,1255,912,220,500,586,1304,147,1916,300,2877,117,505,232,1434,598,379,2117,177,2257,220,169,542,1076,447,291,244,638,681,5058,15,794,412,2121,258,313,777,354,250,2192,283,641,714,20,1640,431,816,4324,238,61,332,325,192,367,94,470,2657,1249,2299,580,138,1036,510,505,189,333,1001,1903,207,748,689,1592,263,2579,262,1287,12178,218,651,757,570,4063,133,403,300,183,171,735,1903,81,693,198,1625,372,575,352,433,402,1655,1640,1021,815,230,471,497,507,614,395,406,1739,2271,151,702,139,741,898,160,1543,264,1698,319,131,202,301,722,627,507,569,1697,469,185,269,379,724,181,237,2870,3576,439,472,533,429,2583,803,1277,723,308,654,916,500,180,455,2314,185,3614,248,86,421,2521,850,94,174,132,94,335,616,1518,784,925,407,128,1330,1564,350,630,332,434,279,76,2609,175,425,481,725,965,193,771,773,608,82,1619,3682,2175,993,5344,1314,1078,1152,2245,452,1004,1269,1727,826,987,968,1632,1368,3277,2532,3224,1109,591,350,1232,1584,1036,1423,418,2268,2832,722,2336,2165,403,741,1951,2980,1088,287,1553,546,2287,14203,1310,1257,1436,7458,299,563,647,366,465,2904,10976,1066,520,1813,2870,756,816,2283,2053,672,702,169,2627,405,673,813,2975,2107,1653,3907,1086,280,2902,3765,1958,14456,833,1230,878,3379,2547,1319,466,940,265,407,1091,718,435,1402,1983,1706,13413,855,1352,1457,4941,1817,516,238,514,1613,2004,646,945,221,341,897,1979,9099,2629,899,1326,734,930,277,2207,116,473,557,463,1504,684,603,1023,901,688,4323,1717,598,224,5724,1918,2398,1184,3238,1348,601,1005,1763,1963,1714,943,4846,1333,8546,700,591,623,361,1532,432,421,1090,666,5326,585,505,5473,349,438,708,736,829,957,2245,45219,766,451,15830,1353,895,1027,292,590,283,1179,1434,500,274,387,1543,357,1416,1556,2230,823,2932,1350,2769,1092,1388,1546,6296,2285,3238,7416,1742,666,363,819,388,5959,436,1075,378,3247,453,1085,797,1709,697,191,1953,719,425,1137,611,522,1811,1999,1272,832,504,232,2105,1402,863,1240,662,812,361,378,621,443,550,1031,658,2245,877,789,3045,393,404,351,4409,1335,446,828,675,1208,2065,2126,1024,1027,942,514,3163,989,3497,1670,528,829,691,885,1285,905,1430,618,1447,848,734,773,870,564,2085,267,1803,356,433,1142,372,196,480,1101,365,760,782,663,1305,2622,669,289,294,916,521,331,477,142,785,907,924,145,578,1186,529,574,49,664,1551,261,644,97,1046,501,263,1153,150,378,756,302,801,2560,532,588,2310,719,360,481,416,1196,1140,244,1633,491,487,907,265,1507,320,201,186,735,1796,279,262,342,2447,2016,375,258,249,354,3207,1116,1014,1439,226,87,2140,1955,373,417,291,166,409,514,651,1689,1576,328,303,1424,280,1256,546,135,172,2469,129,729,451,382,1813,191,1431,1233,923,1696,1134,770,998,192,1437,275,422,968,241,571,777,898,1955,853,587,447,1381,2511,1271,565,320,1497,585,2505,1308,1387,1510,722,693,634,671,421,307,3137,1029,208,1289,727,1080,246,587,170,1056,922,353,282,251,355,718,1257,1958,1206,389,338,1278,1198,769,286,1172,2193,476,269,151,320,197,644,434,388,347,139,663,604,318,289,704,47,436,198,94,548,415,836,523,1028,373,860,686,1960,856,820,852,964,730,316,1798,592,1033,1262,51,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1647,1829,7076,2151,1128,2395,4099,2590,1799,2062,2279,7366,551,521,3445,571,14043,2283,2161,2334,1578,2747,9664,974,2681,3560,3037,838,1800,1839,12246,14023,2144,1348,367,3368,4959,929,2004,1351,14113,1469,4313,2067,2558,6726,1145,2152,14553,2175,1752,459,1911,892,2749,2379,877,2223,4476,2270,9140,2674,3225,3778,3140,3513,1896,1023,1764,366,1851,555,3441,2211,1147,4033,766,914,5060,1637,2085,798,1197,507,826,2139,1074,2717,1201,3883,1807,1235,5419,2249,5772,587,302,693,872,1554,240539,5050,1274,422,3158,23245,2001,3321,1857,980,1348,3478,438,1800,816,680,1263,2006,1883,3436,7220,3320,8704,7266,1716,561,4383,775,2009,580,793,905,730,1136,33562,1655,1710,2055,671,2492,2489,2541,2004,1351,8582,1817,1918,995,5018,935,2327,2997,41958,1845,1362,1173,3627,4253,5095,1023,721,8399,1189,1080,2364,3286,1518,2831,2179,2517,852,68348,2951,2940,2917,4255,1768,17825,628,1576,1394,4692,5679,1290,1627,4299,2026,430,4135,1203,1009,4505,1633,1362,652,629,3569,7180,3120,5717,2929,1119,15631,2948,3183,649,828,784,546,843,1595,931,2490,708,136038,704,442,307,292,257,10811,312,3898,2266,4720,995,5782,1820,1435,93,800,799,5014,733,207,1708,270,1207,1683,1942,280,2653,1374,175,246,548,1070,945,5281,320,1436,181,1233,1384,605,353,2555,817,702,905,811,5748,55524,400,438,491,1380,1265,829,368,192,1079,338,964,6724,3240,3233,327,487,982,1509,579,1118,1118,1734,860,361,1450,249,1364,1781,654,97,640,2709,852,6773,593,1916,593,2330,3806,3192,698,1058,1708,1035,349,907,5623,4093,262,380,1331,449,1577,1079,1434,3275,721,1815,1119,312,155,156,787,1545,3495,10739,1844,3299,1472,802,1814,1434,1933,554,718,9129,1885,1200,909,1172,4345,3015,981,173,635,336,1203,1688,711,1857,5413,367,1018,1061,1927,989,615,1060,256,2608,481,32149,1101,607,6777,3108,2207,268,865,1348,694,1046,571,2677,576,1452,2627,836,11009,2805,412,467,1840,1203,1005,1405,1696,1368,319,1265,4090,1245,2207,1806,1545,1454,410,3013,406,1822,161,1844,1293,404,271,506,461,551,2003,1037,1457,592,1092,142,334,447,249,864,440,180,307,604,251,342,131,3444,518,911,540,160,1397,625,220,971,540,595,251,387,1069,284,503,246,613,2889,606,570,442,270,250,375,8023,341,1086,526,1027,417,216,288,607,799,975,716,316,317,2780,502,498,186,503,1002,4829,180,534,223,827,430,195,654,217,502,1582,5901,6398,487,635,1773,619,168,1664,759,193,486,2825,404,465,976,null,399,490,300,347,671,334,216,2290,548,1455,731,1584,691,1456,1239,2595,317,358,50360,254,370,855,131,768,580,1236,237,394,2536,528,375,350,662,493,1189,13317,213,779,915,2201,522,1009,1354,198,825,742,305,401,2108,883,618,398,281,1028,403,1083,225,140,498,770,662,327,229,330,585,2183,1904,135,2560,1727,206,2881,148,527,265,341,442,239,429,935,292,324,501,5624,504,429,315,149,526,435,408,1279,1789,240,null,151,823,706,730,1358,152,327,284,432,552,360,688,486,978,276,183,223,233,263,254,284,470,null,442,415,128,281,1093,180,1011,1528,1668,160,565,466,422,534,182,925,288,348,943,345,269,187,817,252,201,663,307,969,598,178,3081,232,698,254,915,871,237,15623,354,862,1488,331,5367,286,356,781,417,1923,101,1201,167,108,319,537,426,787,1236,2366,1186,1103,354,459,1938,327,319,391,352,2919,271,113,615,3826,163,177,1594,329,414,380,1076,1352,257,225,1126,2226,775,919,3333,1056,59,4072,714,297,1041,548,458,1559,241,616,1741,230,5617,102,681,224,803,105,571,362,233,1075,558,288,826,207,113,613,247,1603,2635,162,613,573,7291,819,357,466,370,381,612,98,653,512,419,393,251,458,661,340,456,387,215,952,111,649,1109,720,180,384,687,73,4148,316,265,1485,365,430,474,458,9614,744,464,487,272,861,2692,836,652,133,1792,436,348,1663,663,81,482,711,797,359,623,14752,1687,593,602,728,391,903,337,89,1261,218,335,1868,914,197,139,914,906,113,1433,4489,316,204,1769,6450,147697,1250,994,210,470,608,1280,133,1840,243,2876,149,476,129,1546,631,291,1548,191,2056,234,226,502,1158,460,339,283,670,640,3776,16,704,470,1906,268,336,699,355,267,2029,305,615,714,25,1432,439,686,4024,182,65,353,366,171,401,86,463,1452,1205,2110,461,171,771,504,467,203,398,1030,1866,256,737,767,1450,300,2047,281,1284,11773,239,662,716,552,4445,155,408,295,231,147,726,1981,103,779,247,1284,363,674,376,429,419,1363,1700,1074,765,203,544,512,471,574,394,431,1770,2157,159,682,188,776,785,219,1258,355,1700,369,158,201,328,666,566,499,543,1206,479,240,236,356,791,185,289,2418,3076,453,463,581,438,2863,735,1224,793,274,593,847,389,149,423,1848,142,3685,283,118,430,2355,829,115,206,147,118,338,617,1493,819,595,468,141,1287,1590,388,649,374,523,299,78,2591,204,411,481,730,851,190,746,712,598,77,1740,3306,2152,1483,5149,1153,1027,1131,2193,473,940,1091,1701,793,1097,857,1482,1240,3165,2186,3062,1060,574,324,1251,1500,902,1237,408,2292,2892,736,2168,2029,325,699,1845,2986,1171,290,1486,null,2218,12845,1237,1188,1376,7235,332,621,618,459,348,3055,8836,1074,452,1728,2909,742,764,2239,1862,639,667,153,2525,438,695,764,2358,2016,1568,3631,1065,343,2279,3361,1897,15295,720,1230,820,3152,2432,1125,489,708,276,375,1033,709,431,1305,1554,1654,12049,914,1357,1167,4880,1612,517,282,434,1444,1941,630,946,223,341,735,1876,9066,2342,789,1102,748,868,292,2012,109,445,527,504,1462,719,597,890,815,703,4661,1642,549,217,5301,1793,2293,1127,2927,1259,649,1045,1716,1790,1601,890,4518,1325,7500,670,589,665,361,1385,383,409,1068,693,4904,567,550,5699,391,389,695,714,903,922,2182,45098,747,452,16100,1272,813,835,301,496,314,1180,1449,502,277,379,1432,388,1478,1399,1902,640,2777,1235,2417,999,1202,1446,6159,2339,2605,6041,1667,705,289,757,347,5435,485,1013,429,3208,414,890,752,1425,528,189,1867,674,450,1075,636,486,1682,1944,1196,745,452,259,2032,1409,812,1076,645,826,378,430,565,403,600,1020,528,2325,926,761,2629,362,421,302,3865,1276,452,819,669,1188,2071,1907,959,981,907,492,2636,862,3241,1725,460,777,646,693,1211,808,1324,596,1377,877,794,804,781,449,1758,274,1699,423,405,901,385,176,492,831,321,850,851,591,1272,2190,574,308,307,875,514,402,506,150,745,948,919,170,569,1186,532,487,44,727,1506,207,606,134,1075,443,268,1135,153,393,753,296,894,2570,489,680,1775,785,286,441,413,1061,1090,268,1473,462,514,950,272,1596,297,185,248,744,1761,244,258,375,2514,1924,408,269,301,335,3095,1033,967,1395,257,97,2159,1926,370,434,297,163,366,575,704,1763,1163,385,217,1303,304,1147,565,116,214,2492,131,796,494,311,1963,209,1501,1368,916,939,1093,743,965,225,1410,297,387,969,240,592,772,963,1604,858,568,451,1345,2559,1243,586,304,1284,598,2345,1152,1203,1319,728,691,435,691,424,298,3205,1044,220,1297,754,824,259,612,162,1044,902,314,282,257,359,767,1234,1981,1112,492,346,1088,813,789,287,1098,2104,464,331,159,349,205,570,406,342,375,121,589,573,325,224,664,45,426,234,91,629,354,844,437,990,322,807,647,1848,808,806,752,937,724,267,1673,591,922,1225,72,2775,975,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1828,1489,6986,1933,1079,2356,3036,2236,1735,1636,1880,7153,517,524,2209,435,11684,2161,2040,2295,1174,2666,6239,608,2035,2970,2767,898,1307,1354,5858,13231,1573,1238,326,2444,4537,959,1817,951,13396,1262,4243,1658,2591,6280,803,1885,15006,1965,1714,501,1913,825,2274,2028,905,1578,4590,2156,7644,2157,2582,3239,2521,3709,1909,991,1724,389,1386,442,3433,1662,1233,3488,606,934,4549,1331,1037,764,1166,509,824,1741,1045,2051,1015,3687,1842,1019,5165,1734,5352,541,331,635,720,1404,256693,4606,1112,376,3237,20239,1599,3565,1507,1067,1382,2902,508,1204,791,698,1110,1797,1532,3395,6394,2690,8154,5521,1370,515,4276,628,1475,609,781,850,710,939,35730,1677,1447,1982,684,2206,1717,1833,1532,1387,8614,1625,1812,1078,3900,761,1911,2521,39867,1613,1255,964,3102,4161,4272,947,484,5939,997,1015,1554,2461,1266,2033,2035,2447,706,69251,2763,2645,2627,3633,1497,17326,716,1359,1414,2726,5046,1238,1786,3149,1884,502,2346,1193,480,2887,1359,1409,706,688,2396,7253,2959,4984,2882,1099,13853,2793,2371,700,843,743,495,723,1252,806,2302,691,137587,787,448,335,162,271,9386,304,3807,1395,4048,944,5428,1432,1254,100,658,823,3227,746,255,1485,281,877,1164,1668,337,2664,1177,181,236,540,855,972,4682,283,1240,217,1320,1252,523,285,2061,764,713,988,632,5108,52976,406,441,397,1273,1252,699,340,224,931,325,983,6497,3251,3209,265,430,922,1208,587,1105,1187,1592,765,384,1517,267,1326,1411,605,115,567,2327,883,6317,583,1725,526,1838,3551,2555,536,659,1503,961,353,822,3832,3989,183,338,1465,503,1610,1192,1107,2621,570,1698,570,365,185,165,707,1157,3197,9589,1519,3165,1500,764,1620,1182,1824,407,522,5965,1302,901,935,983,4466,2330,792,178,490,326,1201,744,472,1236,4850,403,1011,596,1705,628,627,797,267,2535,213,32515,1045,455,6694,2225,2168,217,922,906,506,792,531,2052,386,1498,2025,630,11250,2341,413,472,1655,1228,898,1291,1715,1332,236,1073,3709,1162,1701,1672,1421,885,433,2867,440,1746,188,1246,1141,427,295,469,466,521,1361,875,1251,584,1129,164,201,494,260,743,473,202,290,664,289,383,158,2235,528,1030,324,160,1402,670,293,1050,515,437,259,441,1073,298,555,272,643,2002,651,407,491,299,296,393,8342,328,1207,428,1026,443,232,340,688,608,910,629,360,358,2626,424,643,219,416,954,4661,158,606,250,861,461,217,711,239,540,1183,5612,5407,546,524,1645,593,200,1231,801,174,573,2511,365,473,1078,null,396,562,335,371,707,349,269,1651,607,1490,761,1620,694,1473,1241,2602,365,330,51544,283,384,887,139,798,569,965,240,383,1808,464,488,291,624,520,1079,12436,240,768,956,1981,432,1001,1156,164,616,634,319,416,1959,605,560,415,250,926,337,1130,255,174,327,707,729,296,258,344,610,2239,1990,160,2445,1555,235,2913,145,568,320,381,487,251,451,800,359,393,295,4897,562,409,341,161,541,437,428,1316,1884,230,null,176,544,643,720,1344,140,395,295,501,535,383,755,523,761,268,199,236,232,282,310,288,522,null,551,430,153,317,840,193,1099,1419,1782,148,660,488,451,558,200,853,327,401,967,371,298,231,748,282,240,791,318,977,632,183,2732,306,713,310,980,646,280,15852,384,675,1040,241,5004,284,406,784,483,1942,127,935,170,144,363,483,471,780,1231,1795,1244,1105,379,533,2134,376,321,432,239,3000,219,135,726,3833,201,204,1433,327,358,393,1025,1337,326,235,1150,2014,865,745,2757,589,80,3684,738,275,1067,528,503,921,174,617,1826,278,5772,66,541,280,762,94,619,423,210,528,552,296,779,255,144,514,292,1472,2523,192,679,733,7423,843,425,532,427,435,702,92,674,499,407,204,321,527,657,413,542,374,268,949,157,591,1125,666,185,454,570,75,4069,354,345,1063,445,308,496,322,9137,617,469,433,320,783,2683,831,604,151,1746,519,314,982,621,100,531,372,820,302,646,14516,1363,733,494,761,434,798,351,88,973,226,283,1791,769,231,154,792,699,145,1384,4090,342,200,1732,6392,152285,1292,981,176,449,663,1223,113,1674,227,3019,161,499,142,1255,690,335,1241,249,1688,263,262,556,1273,451,359,323,792,549,3055,19,650,515,1121,281,379,788,392,300,2010,242,602,644,33,1190,467,469,3582,185,78,373,375,107,474,104,482,1218,1025,2111,274,207,594,582,448,263,480,745,1616,274,717,819,864,337,1553,327,1086,10717,284,654,620,563,4320,180,418,295,275,181,590,1940,143,826,304,782,380,708,430,425,478,939,1769,1179,727,252,527,568,381,692,378,421,2025,1915,118,748,226,650,879,275,1040,446,802,380,184,242,386,696,502,579,468,849,588,288,226,356,775,206,348,1936,2269,493,424,659,413,2777,695,1003,838,276,460,805,410,141,389,1176,164,3602,297,139,449,2043,846,137,233,168,130,374,626,1555,808,583,533,147,1275,1598,476,695,440,564,379,89,2391,266,424,531,796,788,237,701,614,652,85,1386,2597,2117,1394,5407,964,927,1109,1644,417,912,1127,1674,760,1180,815,1303,1201,3041,1565,2761,789,561,306,1214,1430,713,1103,408,2237,2762,620,2172,1920,295,615,1886,2974,1218,299,1292,null,2081,11794,1206,1020,1236,6991,375,542,null,506,285,2906,7552,941,478,1756,2910,711,758,2193,1701,564,599,148,2425,542,757,582,1547,1957,1585,3359,942,413,1464,2393,1819,15275,645,1310,743,2807,2196,762,616,541,263,398,961,739,449,1312,1091,1531,10599,864,1412,934,4766,1413,547,277,418,822,1792,616,953,238,350,554,1791,9002,2213,768,845,779,853,317,1831,130,439,553,508,1479,767,513,844,672,725,4797,1648,476,239,4691,1400,2235,1191,1894,1261,604,1061,1749,1390,1391,871,4070,1376,5954,557,550,574,366,1218,395,440,863,728,3800,546,581,5506,391,348,660,720,911,713,1948,44713,690,436,17463,1117,827,700,290,434,303,1159,1390,551,283,406,1345,426,1494,1145,1618,546,2599,1170,2072,727,965,1342,6710,2304,2079,5028,1564,702,260,738,352,5540,601,964,463,2835,360,808,636,1161,489,219,1769,595,521,756,654,485,1628,1937,948,612,462,274,1918,1456,772,899,630,803,416,461,562,396,551,1000,452,2080,781,688,2272,330,408,362,3347,1032,448,926,690,1121,2125,1551,892,946,820,400,1787,808,2845,1521,391,835,540,698,955,566,1292,617,1238,759,804,840,631,402,1261,242,1371,451,370,502,362,201,478,582,347,871,911,519,1230,1587,513,414,306,980,519,425,529,187,779,1045,780,200,578,1179,529,449,57,738,1517,226,595,154,1017,427,250,1008,155,407,774,363,836,2644,516,637,1524,841,291,384,486,690,921,326,1322,466,553,898,332,1504,283,181,226,787,1652,196,275,412,2380,1877,392,309,314,353,2977,842,987,1322,328,107,2045,1807,354,407,233,165,333,584,601,1717,731,405,219,1086,330,1095,617,111,217,2277,141,819,543,313,1874,184,1515,1393,885,456,964,488,1032,299,1309,229,333,955,246,507,819,1020,1324,878,442,440,1341,2415,1261,608,299,1228,629,2080,961,1101,1210,811,644,242,670,496,293,3212,1014,165,1214,600,589,329,590,145,963,894,280,319,250,347,825,1249,1920,951,558,376,904,614,838,308,1093,1922,500,368,169,373,209,494,421,377,391,107,230,449,308,159,656,47,433,236,112,680,339,792,424,870,264,692,645,1630,695,780,713,936,647,271,1460,586,830,1197,67,2092,1041,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[2007,1280,5639,1948,1151,2405,2160,2277,1683,1440,1471,7052,523,566,1607,455,10047,2225,2106,2285,1021,2569,3744,647,1844,2675,2550,1097,1212,1307,2878,11986,1377,1307,308,2139,4179,1048,1453,807,12380,1318,4102,1558,2675,6458,859,1808,13336,2127,1835,545,2018,861,2007,1701,1051,1291,4977,2368,6499,1919,1981,3078,2531,4286,1898,1076,1882,435,1354,461,3521,1664,1244,3204,556,1020,4240,1284,856,788,1227,571,862,1403,1129,1839,1019,3652,1810,941,5025,1614,5171,514,356,614,790,1357,259208,4436,1127,385,3242,13510,1371,3802,1442,1171,1516,2685,560,1086,896,752,1134,1635,1471,3523,5835,2134,2795,5400,1361,570,3788,601,1214,685,837,957,747,854,33509,1739,1443,1995,723,2320,1357,1554,1233,1472,8008,1657,1029,1169,3595,651,1648,2510,18604,1444,1311,991,2615,4152,3850,1008,451,3420,1013,954,1357,2247,1231,1716,1873,2242,690,63289,2568,2527,2682,3341,1303,14159,824,1508,1421,1229,4317,1273,2039,2194,1831,582,1696,1267,391,1974,1326,1497,710,700,1717,7076,2716,4603,2741,1219,12089,2892,2008,770,904,772,499,671,952,780,2253,750,128533,925,471,403,148,324,4603,384,3657,821,3623,948,4955,1563,1146,85,555,867,1685,891,319,1366,334,841,776,1671,289,2444,813,192,254,569,867,1141,4259,368,1071,243,1384,1169,542,370,1665,791,792,967,680,4735,41766,445,494,406,1213,1158,673,361,273,845,435,831,6018,3161,888,281,489,921,1100,679,1198,1415,1447,853,491,1429,306,1270,931,539,150,538,2215,970,4805,602,1747,547,1670,3383,2512,405,567,1179,741,394,831,1616,3086,233,381,1469,547,1729,1248,978,2186,633,1638,395,342,232,226,729,780,3084,7175,1516,3017,1639,781,1618,1048,1714,423,557,4241,1029,904,956,737,4789,2001,761,181,246,298,1175,421,401,701,3859,471,1112,506,1758,434,717,798,306,1684,232,21551,1031,503,5959,1672,2199,250,955,672,402,746,475,1648,369,1601,1968,544,11664,2037,475,446,1726,1106,1083,1314,1808,1378,211,1044,1877,1137,1317,1434,1283,841,468,1812,502,1691,195,1043,1056,456,348,488,542,542,1103,905,1105,624,1242,185,163,592,286,781,533,240,301,758,366,407,175,1387,525,1149,324,177,1435,722,353,1125,504,373,334,538,1117,325,615,294,717,1414,731,419,567,307,323,439,7888,401,1378,348,1050,520,280,394,740,622,1046,620,420,451,2443,392,618,225,423,948,4482,180,705,315,997,526,242,833,246,585,1019,5146,4537,662,342,1701,585,239,777,743,208,625,2400,393,520,1093,317,432,707,376,408,735,398,189,812,740,1335,918,1792,701,1525,1268,1806,400,319,45674,336,456,825,169,789,576,782,285,471,1215,316,521,327,694,504,1048,11382,289,820,1027,1676,435,1060,1084,201,559,709,383,270,1736,297,606,453,272,966,364,1254,255,187,306,674,826,288,266,429,612,659,1757,189,2315,1381,262,3007,182,593,396,463,558,274,462,756,389,454,215,2289,664,481,399,236,528,486,469,1445,2048,292,630,188,430,659,764,1394,200,437,304,602,509,418,824,565,611,319,243,267,255,315,368,351,624,842,691,435,172,438,769,220,1232,1610,1750,173,785,481,594,566,275,888,374,487,1068,442,342,235,527,345,276,498,352,962,722,218,2321,337,810,351,1064,519,291,11570,437,711,611,237,3697,300,387,809,600,1858,139,1066,193,182,401,533,566,810,1169,1319,1103,1156,548,627,1902,440,373,458,196,2667,142,126,664,3505,215,239,1532,332,407,420,1059,1176,380,263,1171,1738,864,832,2234,435,93,2989,804,321,1148,587,511,678,238,730,1800,288,5436,77,520,311,784,85,703,408,216,564,372,347,839,327,165,513,372,1435,2383,241,587,904,3721,903,543,562,532,452,825,130,860,574,375,182,372,656,654,451,622,365,296,1029,226,594,1244,753,209,533,561,101,3810,433,390,571,502,274,457,317,7444,470,556,512,362,764,2380,776,582,195,1694,638,258,660,581,134,611,362,904,301,686,13768,1125,742,324,824,452,832,406,86,991,247,302,1648,704,262,160,687,642,177,1433,3802,367,242,1795,5777,143246,1302,1014,192,526,712,1270,133,1805,246,3253,186,538,199,1299,861,447,726,277,1205,370,320,668,1407,519,445,401,925,548,891,30,712,580,1070,406,439,950,425,351,2077,258,569,602,41,1160,491,494,2965,205,103,421,426,117,551,117,545,1013,951,2145,226,271,555,657,461,336,517,730,1252,316,822,923,684,347,1290,355,1118,9224,337,631,655,530,4251,225,469,334,315,203,621,1946,214,887,358,578,467,788,493,455,490,746,1792,1223,873,270,483,639,245,844,474,482,1668,1743,164,817,324,589,760,363,717,488,604,429,240,308,454,734,563,587,508,592,611,376,260,438,934,265,359,1031,1933,555,457,781,402,2528,654,820,856,210,509,849,475,157,371,814,199,2807,350,165,523,1793,1017,139,301,213,152,442,631,1424,969,522,663,138,1461,1673,537,729,541,671,427,138,2296,279,294,651,745,739,342,780,600,755,98,942,2666,1951,975,4348,923,955,1146,1266,412,856,1124,1789,772,1387,923,1261,1262,2798,1229,2025,841,656,326,1301,1383,727,908,473,2146,2523,717,1709,1534,332,684,1931,2759,710,349,1443,305,1862,8558,1176,1146,1201,5135,390,585,684,576,241,2371,5771,1020,499,1836,2933,680,799,2005,1719,548,622,139,2199,546,828,590,1339,1876,1660,3071,907,451,1293,2009,1754,12199,693,1090,756,2628,2063,619,749,456,282,480,1033,867,523,1162,1081,1414,9050,832,1459,837,4786,1242,592,307,452,854,1632,629,1024,272,383,467,1700,8243,2068,740,842,853,919,330,1556,160,525,610,536,1359,810,529,938,641,858,3205,1782,518,292,4246,1230,2434,1244,1124,1003,685,1065,1856,1241,1278,917,4020,1349,4354,465,542,625,399,1257,423,509,817,712,3551,630,564,4832,502,351,611,771,1019,650,1774,36067,689,480,18093,1091,931,766,312,567,350,1232,1407,648,329,440,1416,503,1686,1213,1536,579,2258,1283,1912,741,911,1415,6165,1729,1984,4339,1581,777,266,816,377,5146,652,1012,533,2545,357,799,648,826,463,249,1655,648,607,783,752,531,1636,1898,937,600,527,311,1810,1511,821,779,690,772,471,510,580,522,567,927,457,1784,755,701,1945,397,462,417,1110,935,503,1001,737,1052,2040,1334,857,1032,798,420,1584,785,2470,1492,390,935,561,587,687,608,1418,664,1240,716,785,962,697,431,1024,263,1312,543,407,563,392,222,520,657,420,955,915,536,1167,1314,568,459,347,1087,621,503,619,224,860,1084,722,245,570,1135,503,307,86,765,1582,259,614,171,1124,425,270,608,170,452,902,448,806,2975,619,697,1400,983,305,425,531,630,1041,372,1207,530,590,987,362,1581,302,178,255,904,1589,195,305,516,2273,1229,453,378,392,385,2918,773,1110,1144,371,121,1935,1643,402,468,227,172,326,642,607,1591,713,504,309,1030,386,1083,738,119,236,2150,164,826,573,318,1932,198,1600,1594,1000,430,852,323,1060,348,1396,242,371,977,297,537,864,1115,1253,945,427,436,1409,2203,1223,675,311,827,709,1807,852,1060,1136,790,667,236,766,559,314,2906,974,191,1189,614,547,327,597,150,1000,903,281,365,273,365,952,1311,2077,931,613,403,887,618,949,326,1143,1790,520,454,208,399,295,454,431,418,460,127,265,507,282,186,556,57,487,280,135,734,346,711,446,863,262,711,714,1038,650,924,711,921,685,272,1447,632,914,1272,67,1454,921,2714,913,2059,3192,457,378,135,772,1238,1131,128,1074,3194,3235,416,628,253,141,240,571,213,511,204,161,232,213,91,144,427,217,279,175,327,279,2314,518,740,192,1037,176,592,487],["44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","44","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","53","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","72","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","44","44","44","44","44","44","44","44","44","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","49","53","53","53","53","53","53","72","72","72","72","72","72","72","72","72","72","72","72","72","72","85","85","85","85","85","85","85","85","85","85","85","85","85","85","85","49","85","53","72","44","44","44","49","49","49","49","49","49","49","49","49","49","49","49","49","53","53","53","53","53","53","53","53","53","53","53","53","53","85","85","85","85","85","85","85","85","85","85","85","85","85"],["52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52","52"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DC<\/th>\n      <th>NCC<\/th>\n      <th>PMUN15<\/th>\n      <th>PMUN10<\/th>\n      <th>PMUN06<\/th>\n      <th>PSDC99<\/th>\n      <th>PSDC90<\/th>\n      <th>PSDC82<\/th>\n      <th>PSDC75<\/th>\n      <th>PSDC68<\/th>\n      <th>D<\/th>\n      <th>REGION<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5,6,7,8,9,10]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="enlever-le-numéro-des-lignes" class="slide section level2">
<h1>Enlever le numéro des lignes</h1>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(poplegale_6815, <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="modifier-le-nom-de-certaines-colonnes-uniquement-à-laffichage"
class="slide section level2">
<h1>Modifier le nom de certaines colonnes uniquement à l’affichage</h1>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(poplegale_6815, <span class="at">colnames =</span> <span class="fu">c</span>(<span class="st">&quot;Département&quot;</span> <span class="ot">=</span> <span class="st">&quot;D&quot;</span>,<span class="st">&quot;Région&quot;</span> <span class="ot">=</span> <span class="st">&quot;REGION&quot;</span>))</span></code></pre></div>
</div>
<div id="ajouter-un-titre" class="slide section level2">
<h1>Ajouter un titre</h1>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(poplegale_6815, <span class="at">caption =</span> <span class="st">&quot;Ca n&#39;existe plus le Poitou-Charentes!!!&quot;</span>)</span></code></pre></div>
</div>
<div id="ajouter-la-possibilité-de-filtrer-laffichage"
class="slide section level2">
<h1>Ajouter la possibilité de filtrer l’affichage</h1>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(poplegale_6815, <span class="at">filter =</span> <span class="st">&quot;bottom&quot;</span>) <span class="co"># ou &quot;none</span></span></code></pre></div>
</div>
<div id="changer-le-format-daffichage-des-nombres"
class="slide section level2">
<h1>Changer le format d’affichage des nombres</h1>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(EuStockMarkets, <span class="at">rownames =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span>  <span class="fu">formatCurrency</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,              <span class="co"># Concerne uniquement les colonnes 1 à 4</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>                                                              <span class="st">&#39;\U20AC&#39;</span>,          <span class="co"># L&#39;unité est l&#39;euro (c&#39;est le signe unicode de l&#39;euro)</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>                                                              <span class="at">digits =</span> <span class="dv">2</span>,        <span class="co"># on garde deux décimales</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>                                                              <span class="at">before =</span> <span class="cn">FALSE</span>,    <span class="co"># l&#39;unité ne se place pas avant le nombre (contrairement au $)</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>                                                                <span class="at">mark =</span> <span class="st">&#39;\U2009&#39;</span>, <span class="co"># Signe utilisé comme séparateur de millier</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>                                                            <span class="at">dec.mark =</span> <span class="st">&#39;,&#39;</span>)      <span class="co"># signe du séparateur entre nombre entier et décimal, la virgule</span></span></code></pre></div>
</div>
<div id="documentation-sur-dt" class="slide section level2">
<h1>Documentation sur DT</h1>
<ul>
<li>sur le package : <a href="https://rstudio.github.io/DT/"
class="uri">https://rstudio.github.io/DT/</a><br></li>
<li>sur les options : <a href="https://datatables.net/reference/option/"
class="uri">https://datatables.net/reference/option/</a><br></li>
<li>sur les styles : <a
href="https://datatables.net/manual/styling/classes"
class="uri">https://datatables.net/manual/styling/classes</a><br></li>
</ul>
</div>

<div id="séquence-13---graphiques"
class="title-slide slide section level1">
<h1>Séquence 13 - Graphiques</h1>

</div>
<div id="galerie" class="slide section level2">
<h1>Galerie</h1>
<!--cf random graphes ggplot2-->
<!-- + script exemple_graphique.R-->
</div>
<div id="les-graphiques-avec-r" class="slide section level2">
<h1>Les graphiques avec R</h1>
<p>Il est possible de créer des graphiques de différentes manières avec
R :<br />
- en utilisant les fonctions de base, - en utilisant le package
<strong>ggplot2</strong>, qui offre une grammaire cohérente pour les
différents types de graphiques possibles, - en utilisant d’autres
packages existant comme <strong>lattice</strong>, <strong>ggvis</strong>
ou <strong>htmlwidgets</strong>…</p>
<p>On fait le choix ici d’utiliser le package
<strong>ggformula</strong>, qui offre une interface au package
<strong>ggplot2</strong>. Le package <strong>ggformula</strong> permet
de créer un graphique en utilisant des <strong>formules</strong> plutôt
que d’utiliser les fonctions spécifiques de
<strong>ggplot2</strong>.</p>
</div>
<div id="ggplot2" class="slide section level2">
<h1>ggplot2</h1>
<p><strong>ggplot2</strong> est un package écrit par Hadley Wickham et
qui s’appuie sur une grammaire unique permettant de décrire en détail
une large gamme de graphiques.</p>
<p>Cette grammaire comporte :<br />
- Des données (data.frame et les variables utilisées) - Un système de
coordonnées (par défaut, un repère cartésien) - Une fonction permettant
de transformer les données en marqueurs visuels - Eventuellement des
options.</p>
</div>
<div id="ggformula" class="slide section level2">
<h1>ggformula</h1>
<p><strong>ggformula</strong> est un package écrit par Danny Kaplan et
Randall Pruim, qui offre une surcouche à <strong>ggplot2</strong>,
permettant d’associer une syntaxe légère et une interface de type
‘formulaire’ à la puissance de <strong>ggplot2</strong></p>
<p>Par interface ‘formulaire’, on entend que les fonctions du package
<strong>ggformula</strong> pour créer les graphiques seront de la forme
<strong>objectif</strong>(<strong>y</strong> ~ <strong>x</strong>, data
= <strong>mes_donnees</strong>)</p>
<p>Noter que, comme dans le package <strong>tables</strong>, la table en
entrée n’est pas le premier paramètre : ceci provient de la possibilité
d’utiliser uniquement des vecteurs dans la formule et de se passer de
table de données.</p>
</div>
<div
id="afficher-la-distribution-dune-variable-discrète-la-fonction-gf_bar"
class="slide section level2">
<h1>Afficher la distribution d’une variable discrète : la fonction
<code>gf_bar()</code></h1>
<p>On va travailler sur la table <em>diamonds</em>, incluse dans le
package <strong>ggplot2</strong>.<br />
Pour cela, on va charger les librairies <strong>dplyr</strong>,
<strong>ggplot2</strong> et <strong>ggformula</strong>
(<strong>dplyr</strong> est optionnel mais permettra de vérifier que les
graphiques sont corrects) et on va examiner la table <em>diamonds</em>
:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggformula)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(diamonds, <span class="at">n =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>Les fonctions de création de graphiques sont préfixées par
<em>gf_</em>.</p>
<p>On va travailler sur la variable <em>cut</em> de la table
<em>diamonds</em>, variable qualitative qui indique la qualité de la
taille d’un diamant.</p>
<p>Pour représenter une unique variable qualitative ou discrète, on va
utiliser un <strong>diagramme en barre</strong>, défini par la fonction
<code>gf_bar</code> et en utilisant la formule <code>~ cut</code> vu
qu’il n’y a qu’une variable :</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_bar</span>(<span class="sc">~</span>cut)</span></code></pre></div>
<p>Le graphique obtenu doit correspondre aux résultats d’un tableau de
comptage :</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(cut) <span class="sc">%&gt;%</span> </span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table</span>()</span></code></pre></div>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_bar</span>(<span class="sc">~</span>cut)</span></code></pre></div>
</div>
<div
id="afficher-la-distribution-dune-variable-continue-12-la-fonction-gf_histogram"
class="slide section level2">
<h1>Afficher la distribution d’une variable continue (1/2) : la fonction
<code>gf_histogram</code></h1>
<p>
On va s’intéresser à la variable <em>price</em> de la table
<em>diamonds</em>, variable quantitative continue donnant le prix en
dollars d’un diamant.<br />
On va utiliser un <strong>histogramme</strong>, défini par la fonction
<code>gf_histogram</code> :
</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_histogram</span>(<span class="sc">~</span>price)</span></code></pre></div>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_histogram</span>(<span class="sc">~</span>price)</span></code></pre></div>
</div>
<div
id="afficher-la-distribution-dune-variable-continue-22-la-fonction-gf_dens"
class="slide section level2">
<h1>Afficher la distribution d’une variable continue (2/2) : la fonction
<code>gf_dens</code></h1>
<p>
On peut aussi représenter la distribution (ou densité) lissée de la
variable, définie par la fonction <code>gf_dens</code>.<br />
Attention ! Dans ce cas, R fait une estimation par noyau de la densité
de probabilité. Il faut donc s’assurer de bien savoir ce que R fait et
comment bien gérer les paramètres.
</p>
<div class="sourceCode" id="cb100"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_dens</span>(<span class="sc">~</span>price)</span></code></pre></div>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb101"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_dens</span>(<span class="sc">~</span>price)</span></code></pre></div>
</div>
<div id="afficher-un-nuage-de-points-la-fonction-gf_point"
class="slide section level2">
<h1>Afficher un nuage de points : la fonction <code>gf_point</code></h1>
<p>
On va s’intéresser aux variables <em>price</em> et <em>carat</em> de la
table <em>diamonds</em>.<br />
On va utiliser un <strong>nuage de points</strong>, défini par la
fonction <code>gf_point</code> :
</p>
<div class="sourceCode" id="cb102"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price)</span></code></pre></div>
<p>
La variable à droite du tilde <code>~</code> définit les abscisses, la
variable à gauche les ordonnées
</p>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb103"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price)</span></code></pre></div>
</div>
<div
id="afficher-les-distributions-dun-ensemble-de-variables-continues-12-la-fonction-gf_boxplot"
class="slide section level2">
<h1>Afficher les distributions d’un ensemble de variables continues
(1/2) : la fonction <code>gf_boxplot</code></h1>
<p>
On va s’intéresser à la variable <em>price</em> en fonction des
modalités de <em>cut</em>, de la table <em>diamonds</em>.<br />
On peut utiliser une <strong>boîte à moustache</strong> ou box-plot,
définie par la fonction <code>gf_boxplot</code> :
<p>
<div class="sourceCode" id="cb104"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_boxplot</span>(carat <span class="sc">~</span> cut)</span></code></pre></div>
<p>
Attention : la variable à droite du tilde est la variable discrète.
</p>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb105"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_boxplot</span>(carat <span class="sc">~</span> cut)</span></code></pre></div>
</div>
<div
id="afficher-les-distributions-dun-ensemble-de-variables-continues-12-la-fonction-gf_violin"
class="slide section level2">
<h1>Afficher les distributions d’un ensemble de variables continues
(1/2) : la fonction <code>gf_violin</code></h1>
<p>
On peut également utiliser une représentation en violon, qui illustre
une estimation lissée de la distribution des variables.<br />
<b>Attention</b>, les mêmes précautions que pour la représentation de la
densité s’appliquent.
<p>
<div class="sourceCode" id="cb106"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_violin</span>(carat <span class="sc">~</span> cut)</span></code></pre></div>
<p>
Les résultats devront être compatibles avec ce qu’on peut trouver en
calculant la moyenne par modalité discrète :
</p>
<div class="sourceCode" id="cb107"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cut) <span class="sc">%&gt;%</span> </span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg =</span> <span class="fu">mean</span>(price))</span></code></pre></div>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb108"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_violin</span>(carat <span class="sc">~</span> cut)</span></code></pre></div>
</div>
<div id="représentation-dune-série-chronologique"
class="slide section level2">
<h1>Représentation d’une série chronologique</h1>
<p>
On va maintenant utiliser la table <em>economics</em> et les variables
<em>date</em> et <em>unemploy</em>.<br />
On veut illustrer l’évolution du nombre de chômeurs au cours du temps.
</p>
<div class="sourceCode" id="cb109"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(economics, <span class="at">n =</span> <span class="dv">3</span>)</span></code></pre></div>
<div class="sourceCode" id="cb110"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>economics <span class="sc">%&gt;%</span> </span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_line</span>(unemploy <span class="sc">~</span> date)</span></code></pre></div>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb111"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>economics <span class="sc">%&gt;%</span> </span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_line</span>(unemploy <span class="sc">~</span> date)</span></code></pre></div>
</div>
<div id="jouer-avec-le-thème" class="slide section level2">
<h1>Jouer avec le thème</h1>
<p>
Le thème permet d’utiliser un ensemble d’options graphiques pré-définies
en une seule commande. Le package <strong>ggformula</strong> offre un
certain nombre de thèmes de base, mais il est possible de définir les
siens. Ce dernier point est en dehors du périmètre de cette formation.
</p>
<div class="sourceCode" id="cb112"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">gf_bar</span>(<span class="sc">~</span>cut) <span class="sc">%&gt;%</span> <span class="fu">gf_theme</span>(<span class="fu">theme_bw</span>()) <span class="co"># fond blanc, quadrillage gris</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">gf_bar</span>(<span class="sc">~</span>cut) <span class="sc">%&gt;%</span> <span class="fu">gf_theme</span>(<span class="fu">theme_gray</span>()) <span class="co"># fond gris, quadrillage blanc</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">gf_bar</span>(<span class="sc">~</span>cut) <span class="sc">%&gt;%</span> <span class="fu">gf_theme</span>(<span class="fu">theme_dark</span>()) <span class="co"># fond gris, quadrillage gris foncé</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">gf_bar</span>(<span class="sc">~</span>cut) <span class="sc">%&gt;%</span> <span class="fu">gf_theme</span>(<span class="fu">theme_minimal</span>()) <span class="co"># fond blanc, quadrillage gris, axes non affichés</span></span></code></pre></div>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb113"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_bar</span>(<span class="sc">~</span>cut) <span class="sc">%&gt;%</span> </span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_theme</span>(<span class="fu">theme_dark</span>())</span></code></pre></div>
</div>
<div id="jouer-avec-les-formes-et-les-couleurs"
class="slide section level2">
<h1>Jouer avec les formes et les couleurs</h1>
<p>
Reprenons la table <em>economics</em> et l’évolution du nombre de
chômeurs.
</p>
<div class="sourceCode" id="cb114"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>economics <span class="sc">%&gt;%</span> </span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_area</span>(unemploy <span class="sc">~</span> date)</span></code></pre></div>
</div>
<div class="slide section level2">

<p>On peut modifier les couleurs sans ajouter d’information.</p>
<div class="sourceCode" id="cb115"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>economics <span class="sc">%&gt;%</span> </span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_area</span>(unemploy <span class="sc">~</span> date, <span class="at">colour =</span> <span class="st">&#39;black&#39;</span>, <span class="at">fill =</span> <span class="st">&#39;blue&#39;</span>, <span class="at">alpha =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p>
<ul>
<li>colour : couleur du contour</li>
<li>fill : couleur de l’aire intérieure</li>
<li>alpha : transparence de l’aire intérieure (entre 0 et 1)</li>
</ul>
</p>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb116"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>economics <span class="sc">%&gt;%</span> </span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_area</span>(unemploy <span class="sc">~</span> date, <span class="at">colour =</span> <span class="st">&#39;black&#39;</span>, <span class="at">fill =</span> <span class="st">&#39;blue&#39;</span>, <span class="at">alpha =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<table style="width:7%;">
<colgroup>
<col width="6%" />
</colgroup>
<tbody>
<tr class="odd">
<td></td>
</tr>
<tr class="even">
<td><code>r diamonds %&gt;% sample_n(size = 500)</code></td>
</tr>
<tr class="odd">
<td></td>
</tr>
<tr class="even">
<td><code>r diamonds %&gt;% sample_n(size = 500) %&gt;% gf_point(carat ~ price, colour = ~cut)</code></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb117"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price, <span class="at">colour =</span> <span class="sc">~</span>cut)</span></code></pre></div>
</div>
<div class="slide section level2">

<p>
On peut aussi faire varier la forme des points.
</p>
<div class="sourceCode" id="cb118"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price, <span class="at">shape =</span> <span class="sc">~</span>cut)</span></code></pre></div>
<p>
Ou même les deux, si on utilise une quatrième variable, la variable
<em>color</em>.
</p>
<div class="sourceCode" id="cb119"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price, </span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">colour =</span> <span class="sc">~</span>color,</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">shape =</span> <span class="sc">~</span>cut)</span></code></pre></div>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb120"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price, </span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">colour =</span> <span class="sc">~</span>color,</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">shape =</span> <span class="sc">~</span>cut)</span></code></pre></div>
</div>
<div id="la-fonction-gf_labs-changer-le-titre"
class="slide section level2">
<h1>La fonction <code>gf_labs</code> : changer le titre</h1>
<p>
On peut modifier le titre d’un graphique avec la fonction
<code>gf_labs</code> :
</p>
<div class="sourceCode" id="cb121"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price) <span class="sc">%&gt;%</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_labs</span>(<span class="at">title =</span> <span class="st">&quot;Lien entre prix et carat des diamants&quot;</span>)</span></code></pre></div>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb122"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price) <span class="sc">%&gt;%</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_labs</span>(<span class="at">title =</span> <span class="st">&quot;Lien entre prix et carat des diamants&quot;</span>)</span></code></pre></div>
</div>
<div id="la-fonction-gf_labs-changer-le-nom-des-axes"
class="slide section level2">
<h1>La fonction <code>gf_labs</code> : changer le nom des axes</h1>
<p>
On peut modifier le nom des axes :
</p>
<div class="sourceCode" id="cb123"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price) <span class="sc">%&gt;%</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_labs</span>(<span class="at">x =</span> <span class="st">&quot;Prix en dollars&quot;</span>,</span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> <span class="st">&quot;Taille en carat&quot;</span>)</span></code></pre></div>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb124"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price) <span class="sc">%&gt;%</span></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_labs</span>(<span class="at">x =</span> <span class="st">&quot;Prix en dollars&quot;</span>,</span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> <span class="st">&quot;Taille en carat&quot;</span>)</span></code></pre></div>
</div>
<div id="changer-les-limites-des-axes-la-fonction-gf_lims"
class="slide section level2">
<h1>Changer les limites des axes : la fonction <code>gf_lims</code></h1>
<p>
On peut modifier l’intervalle des axes, pour des variables continues :
</p>
<div class="sourceCode" id="cb125"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price) <span class="sc">%&gt;%</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_lims</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">10000</span>, <span class="dv">20000</span>),</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span></code></pre></div>
<p>
R écrit un message d’avertissement. En effet, certaines observations
sont en dehors de la fenêtre représentée sur le graphique. R ne les
affiche pas, mais nous prévient qu’il manque des observations sur le
graphique.
</p>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb126"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price) <span class="sc">%&gt;%</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_lims</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">10000</span>, <span class="dv">20000</span>),</span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span></code></pre></div>
<p><br></p>
</div>
<div id="la-fonction-gf_refine-changer-les-graduations-des-axes"
class="slide section level2">
<h1>La fonction <code>gf_refine</code> : changer les graduations des
axes</h1>
<p>
On peut modifier les graduations d’une variable continue avec les
fonctions <code>gf_refine</code> et <code>scale_x_continuous</code> ou
<code>scale_y_continuous</code> :
</p>
<div class="sourceCode" id="cb127"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price) <span class="sc">%&gt;%</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_refine</span>(<span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">9000</span>,<span class="dv">18000</span>)))</span></code></pre></div>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb128"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(carat <span class="sc">~</span> price) <span class="sc">%&gt;%</span></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_refine</span>(<span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">9000</span>,<span class="dv">18000</span>)))</span></code></pre></div>
</div>
<div id="la-fonction-gf_refine-changer-lordre-des-modalités-des-axes"
class="slide section level2">
<h1>La fonction <code>gf_refine</code> : changer l’ordre des modalités
des axes</h1>
<p>
On peut également modifier l’ordre des modalités quand on travaille sur
une variable discrète, avec <code>scale_x_discrete</code> ou
<code>scale_y_discrete</code> et l’argument <code>limits</code> :
</p>
<div class="sourceCode" id="cb129"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_bar</span>(<span class="sc">~</span> cut) <span class="sc">%&gt;%</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_refine</span>(<span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;Ideal&quot;</span>, <span class="st">&quot;Premium&quot;</span>, <span class="st">&quot;Very Good&quot;</span>, <span class="st">&quot;Good&quot;</span>, <span class="st">&quot;Fair&quot;</span>)))</span></code></pre></div>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb130"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_bar</span>(<span class="sc">~</span> cut) <span class="sc">%&gt;%</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_refine</span>(<span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;Ideal&quot;</span>, <span class="st">&quot;Premium&quot;</span>, <span class="st">&quot;Very Good&quot;</span>, <span class="st">&quot;Good&quot;</span>, <span class="st">&quot;Fair&quot;</span>)))</span></code></pre></div>
</div>
<div id="la-fonction-gf_refine-changer-le-nom-des-modalités-des-axes"
class="slide section level2">
<h1>La fonction <code>gf_refine</code> : changer le nom des modalités
des axes</h1>
<p>
On peut modifier les noms des modalités avec l’argument
<code>labels</code> :
</p>
<div class="sourceCode" id="cb131"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_bar</span>(<span class="sc">~</span> cut) <span class="sc">%&gt;%</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_refine</span>(<span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Juste&quot;</span>, <span class="st">&quot;Bon&quot;</span>, <span class="st">&quot;Très bon&quot;</span>, <span class="st">&quot;Premier choix&quot;</span>, <span class="st">&quot;Idéal&quot;</span>)))</span></code></pre></div>
</div>
<div class="slide section level2">

<div class="sourceCode" id="cb132"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_bar</span>(<span class="sc">~</span> cut) <span class="sc">%&gt;%</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_refine</span>(<span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Juste&quot;</span>, <span class="st">&quot;Bon&quot;</span>, <span class="st">&quot;Très bon&quot;</span>, <span class="st">&quot;Premier choix&quot;</span>, <span class="st">&quot;Idéal&quot;</span>)))</span></code></pre></div>
</div>
<div id="exercice-5" class="slide section level2">
<h1>Exercice</h1>
<p>Reproduire le graphique suivant à partir du fichier
<code>donnees/support/fichier_date.RDS</code> :</p>
</div>
<div id="solution-1" class="slide section level2">
<h1>Solution</h1>
<div class="sourceCode" id="cb133"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggformula)</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>fichier_date <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&quot;donnees/support/fichier_date.RDS&quot;</span>)</span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a>fichier_date <span class="sc">%&gt;%</span> </span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="fu">ymd</span>(Date_string)) <span class="sc">%&gt;%</span> </span>
<span id="cb133-9"><a href="#cb133-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Date) <span class="sc">%&gt;%</span> </span>
<span id="cb133-10"><a href="#cb133-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Eff_total =</span> <span class="fu">sum</span>(Effectif_random)) <span class="sc">%&gt;%</span></span>
<span id="cb133-11"><a href="#cb133-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_point</span>(Eff_total <span class="sc">~</span> Date) <span class="sc">%&gt;%</span></span>
<span id="cb133-12"><a href="#cb133-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_line</span>(Eff_total <span class="sc">~</span> Date) <span class="sc">%&gt;%</span></span>
<span id="cb133-13"><a href="#cb133-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_labs</span>(<span class="at">title =</span> <span class="st">&quot;Evolution de l&#39;emploi en France&quot;</span>,</span>
<span id="cb133-14"><a href="#cb133-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">x =</span> <span class="st">&quot;Année&quot;</span>,</span>
<span id="cb133-15"><a href="#cb133-15" aria-hidden="true" tabindex="-1"></a>          <span class="at">y =</span> <span class="st">&quot;Effectif France (hors Mayotte)&quot;</span>)</span></code></pre></div>
</div>

<div id="séquence-14---bases-de-données"
class="title-slide slide section level1">
<h1>Séquence 14 - Bases de données</h1>

</div>
<div
id="travailler-sur-une-base-de-données-postgresql-avec-le-langage-sql"
class="slide section level2">
<h1>Travailler sur une base de données PostgreSQL avec le langage
SQL</h1>
<ul>
<li>Récupérer un <strong>driver</strong> adapté au moteur de bases de
données qu’on va utiliser.<br></li>
<li>Récupérer un <strong>identifiant de connexion</strong> vers la base
ciblée avec le driver récupéré.</li>
</ul>
<div class="sourceCode" id="cb134"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RPostgreSQL)                          </span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>driver <span class="ot">&lt;-</span> <span class="fu">dbDriver</span>(<span class="st">&quot;PostgreSQL&quot;</span>)</span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>base <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(driver, <span class="at">dbname =</span> <span class="st">&quot;postgres&quot;</span>, <span class="at">host =</span> <span class="st">&quot;localhost&quot;</span>, <span class="at">port =</span> <span class="dv">5432</span>, <span class="at">user =</span> <span class="st">&quot;h2izgk&quot;</span>, <span class="at">password =</span> params<span class="sc">$</span>password)</span></code></pre></div>
<ul>
<li>Travailler sur la base…</li>
<li>Et terminer en se déconnectant de la base :</li>
</ul>
<div class="sourceCode" id="cb135"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(base)</span></code></pre></div>
</div>
<div id="explorer-le-contenu-de-la-base" class="slide section level2">
<h1>Explorer le contenu de la base</h1>
<div class="sourceCode" id="cb136"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbGetQuery</span>(base, <span class="st">&quot;SELECT schema_name FROM information_schema.schemata&quot;</span>) <span class="co"># liste des schémas de la base</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListTables</span>(base)                                    <span class="co"># liste des tables du schéma public</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListFields</span>(base,<span class="st">&quot;pays&quot;</span>)                             <span class="co"># liste des colonnes d&#39;une table du schéma public (schéma par défaut)</span></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListFields</span>(base,<span class="fu">c</span>(<span class="st">&quot;formation&quot;</span>,<span class="st">&quot;poplegale_6815&quot;</span>))    <span class="co"># liste des colonnes d&#39;une table du schéma &#39;formation&#39;</span></span></code></pre></div>
</div>
<div id="récupérer-le-résultat-dune-requête-sql"
class="slide section level2">
<h1>Récupérer le résultat d’une requête SQL</h1>
<div class="sourceCode" id="cb137"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbGetQuery</span>(base,<span class="st">&quot;SELECT * FROM formation.poplegale_6815</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="st">                   WHERE pmun15&gt;300000&quot;</span>)</span></code></pre></div>
</div>
<div id="travailler-sur-une-table-postgresql-comme-sur-une-table-r"
class="slide section level2">
<h1>Travailler sur une table PostgreSQL comme sur une table R</h1>
<!-- cf C:\Users\GI1ZM7\Documents\00_Travaux\SNLA\Bonnes pratiques R\bonnes_pratiques_R_BDD.Rmd-->
</div>

<div id="séquence-15---partager-et-diffuser-ses-résultats"
class="title-slide slide section level1">
<h1>Séquence 15 - Partager et diffuser ses résultats</h1>

</div>
<div id="rmarkdown" class="slide section level2">
<h1>RMarkdown</h1>
<!--lien vers mon blabla pédagogique sur le sujet pour faire une démo live plutôt qu'une lecture de doc barbante-->
<p>Dans RStudio, cliquer sur
<code>"File" &gt; "New File" &gt; "RMarkdown..."</code> ou
<code>"R Notebook"</code> (le R Notebook étant un RMarkdown
enrichi).</p>
<p>On pourra ensuite partager le document avec des collègues, un chef de
projet, un stagiaire, … afin qu’ils puissent consulter les résultats,
reproduire l’analyse ou l’adapter pour leur propre compte.</p>
<p>Le corps d’un document RMarkdown se compose de trois types de
contenus : du code, des sorties, des commentaires.</p>
<ul>
<li>les blocs de code permettent d’importer nos packages, de travailler
nos données et de produire des analyses reproductibles comme le ferait
un script R</li>
<li>les sorties sont générées par les blocs de code et placées chacune à
la suite de celui qui les génère</li>
<li>les commentaires sont du texte rédigé dans le formalisme Markdown,
en dehors des blocs de code</li>
</ul>
<p>Les blocs de code sont ajoutés avec le raccourci clavier
<code>CTRL + ALT + I</code> (ou à la main avec trois accents graves
avant et après le code).</p>
<p>Ce corps est précédé d’une en-tête (YAML) pour le format d’export et
la titraille. On peut y ajouter des éléments dynamiques comme la date de
compilation du document ou des paramètres utilisables par le code du
corps du document (définis dans le champ <code>params:</code>, puis
invocables dans les blocs de code avec <code>params$</code>).</p>
<p>Le document RMarkdown peut être tissé pour produire la sortie (selon
les outputs définis dans l’en-tête) avec le raccourci
<code>CTRL + MAJ + K</code> (ou le bouton <code>Knit</code> au-dessus du
panneau de script dans RStudio)</p>
<!-- ajouter un .Rmd bac à sable avec des params dans le YAML pour que les stagiaires puissent s'amuser à faire bouger des trucs et constater le résultat -->
<p>Aller plus loin : * <a
href="https://rmarkdown.rstudio.com/lesson-1.html">Tutoriel RMarkdown
par RStudio</a> (en anglais) * <a
href="https://rmarkdown.rstudio.com/gallery.html">Exemples de documents,
diaporamas et sites web statiques réalisés avec RMarkdown</a></p>
</div>
<div id="shiny" class="slide section level2">
<h1>Shiny</h1>
<p>Package dédié au développement d’applications web interactives
(dashboards, data viz, …)</p>
<p>Voir la <a href="https://shiny.rstudio.com/gallery/">gallerie</a></p>
<p>Il existe une formation Insee dédiée à Shiny</p>
</div>

<div id="séquence-16---bonnes-pratiques-et-communautés-r-dans-le-ssp"
class="title-slide slide section level1">
<h1>Séquence 16 - Bonnes pratiques et communautés R dans le SSP</h1>

</div>
<div id="ressources" class="slide section level2">
<h1>Ressources</h1>
<ul>
<li><a
href="https://matrix.to/#/#RdIezwNF:agent.finances.tchap.gouv.fr">Langage_R</a></li>
<li><a
href="https://matrix.to/#/#SSPCloudXDpAw6v:agent.finances.tchap.gouv.fr">SSPCloud
(discussions/entraide)</a></li>
<li><a href="https://www.sspcloud.fr/formation">SSPCloud
(formations)</a></li>
<li><a href="https://www.pratiques.utilitr.org/">Utilitr</a></li>
<li><a
href="https://collaboratif-git-formation-insee.netlify.app/">Formation
R+Git Insee</a></li>
</ul>
</div>

<div id="récapitulons" class="title-slide slide section level1">
<h1>Récapitulons</h1>

</div>
<div id="principes-fondamentaux" class="slide section level2">
<h1>Principes fondamentaux</h1>
<p>R est un langage de programmation open-source dédié à la statistique,
qui travaille en mémoire vive</p>
<p>Tout ce qui existe en R est un objet</p>
<p>Tout ce qui se produit est le résultat d’un appel de fonctions</p>
<p>Les fonctions peuvent être enrichies par des packages</p>
<p>Les packages s’installent depuis un dépôt (par exemple, le CRAN)</p>
<p>Un package installé doit être chargé en mémoire à chaque nouvelle
session</p>
<p>Appuyer sur F1 pour ouvrir l’aide de la fonction sélectionnée (ou
exécuter <code>?nom_fonction</code>)</p>
</div>
<div id="tour-dhorizon-du-tidyverse" class="slide section level2">
<h1>Tour d’horizon du tidyverse</h1>
<!-- voir reveal.js dédié si le temps le permet -->
<p><a href="https://www.tidyverse.org/packages/">tidyverse</a></p>
<p>Packages chargés par défaut lors de <code>library(tidyverse)</code>
:</p>
<ul>
<li><code>ggplot2</code></li>
<li><code>dplyr</code></li>
<li><code>tidyr</code></li>
<li><code>readr</code></li>
<li><code>purrr</code></li>
<li><code>tibble</code></li>
<li><code>stringr</code></li>
<li><code>forcats</code></li>
</ul>
<p>Tidyverse “étendu” (packages à charger séparément) :</p>
<ul>
<li><code>lubridate</code></li>
<li><code>dbplyr</code></li>
<li><code>hms</code></li>
<li><code>blob</code></li>
<li><code>dtplyr</code></li>
<li><code>magrittr</code></li>
<li><code>glue</code></li>
<li><code>tidymodels</code></li>
</ul>
<p>Satellites :
DBI/haven/httr/readxl/googlesheets4/googledrive/rvest/jsonlite/xml2</p>
</div>
<div id="glossaire" class="slide section level2">
<h1>Glossaire</h1>
<ul>
<li>R : langage de programmation open-source dédié à la statistique</li>
<li>RStudio : IDE open source, avec version propriétaire payante</li>
<li>Rshiny : framework open source d’applications web</li>
<li>CRAN : dépôt de référence des packages R</li>
<li>vignette : une documentation liée à un package pour expliquer en
pratique comment s’en servir (sans devoir passer par l’étape rubik’s
cube qui consiste à lire le catalogue des fonctions et deviner comment
elles sont supposées s’enchaîner pour répondre à notre cas
d’utilisation)</li>
</ul>
</div>
<div id="et-pour-finir" class="slide section level2">
<h1>Et pour finir…</h1>
<p>Des questions ? Remarques ? Doutes ?</p>
<p>… Merci pour votre attention !</p>
</div>

  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

</body>
</html>
